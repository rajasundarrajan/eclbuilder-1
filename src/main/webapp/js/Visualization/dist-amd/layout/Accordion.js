(function(e,t){typeof define=="function"&&define.amd?define(["../common/HTMLWidget","../common/FAChar","css!./Accordion"],t):e.layout_Accordion=t(e.common_HTMLWidget,e.common_FAChar)})(this,function(e,t){function n(){e.call(this),this._tag="div",this._isClosed=!1}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" layout_Accordion",n.prototype.publish("content",[],"widgetArray","Array of widgets",null,{tags:["Basic"]}),n.prototype.publish("title","","string","Title of collapsible section",null,{tags:["Private"]}),n.prototype.publish("openIcon","","string","Icon to display when list is open",null,{tags:["Private"]}),n.prototype.publish("closedIcon","","string","Icon to display when list is closed",null,{tags:["Private"]}),n.prototype.publish("titleFontColor","#FFFFFF","html-color","Title font color",null,{tags:["Private"]}),n.prototype.publish("titleBackgroundColor","#333333","html-color","Title background color",null,{tags:["Private"]}),n.prototype.publish("defaultCollapsed",!1,"boolean","Collapsed by default if true",null,{tags:["Private"]}),n.prototype.pushListItem=function(e,t,n){var r=this.content();return e._protected=n,t?r.unshift(e):r.push(e),this.content(r),this},n.prototype.clearListItems=function(){var e=[];for(var t in this.content())this.content()[t]._protected&&e.push(this.content()[t]);return this.content(e),this},n.prototype.collapseClick=function(e){e.classed("closed")?(this._isClosed=!1,e.classed("open",!0),e.classed("closed",!1)):(this._isClosed=!0,e.classed("open",!1),e.classed("closed",!0))},n.prototype.enter=function(n,r){e.prototype.enter.apply(this,arguments);var i=this;this._isClosed=this.defaultCollapsed(),r.classed(this._isClosed?"closed":"open",!0),this.titleSpan=r.append("span").classed("collapsible-title",!0),this.iconDiv=r.append("div").classed("collapsible-icon",!0),this.ul=r.append("ul"),this.icon=(new t).size({height:24,width:24}).target(this.iconDiv.node()),this.iconDiv.on("click",function(){i.collapseClick(r),i.render()}),this.titleSpan.on("click",function(){i.collapseClick(r),i.render()})},n.prototype.update=function(t,n){e.prototype.update.apply(this,arguments);var r=this,i="";this.titleSpan.text(r.title().length>0?r.title()+i:"Accordion ["+r._id+"]"+i);var s=this.ul.selectAll("#"+r._id+" > ul > li").data(this.content(),function(e){return e._id});s.enter().append(function(e){var t=document.createElement("li");if(e._target!==null)return e._target;var n=e.size();if(n.width===0||n.height===0){var i=r.size();e.size({width:i.width,height:i.width})}return e.target(t),t}),s.exit().remove(),this.icon.text_colorFill(this.titleFontColor()).char(this._isClosed?this.closedIcon():this.openIcon()).render()},n.prototype.exit=function(t,n){e.prototype.exit.apply(this,arguments)},n});