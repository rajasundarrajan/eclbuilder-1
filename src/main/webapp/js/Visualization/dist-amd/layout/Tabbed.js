(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","../layout/Surface","../common/Text","css!./Tabbed"],t):e.layout_Tabbed=t(e.d3,e.common_HTMLWidget,e.layout_Surface,e.common_Text)})(this,function(e,t,n,r){function i(){t.call(this),this._tag="div"}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype._class+=" layout_Tabbed",i.prototype.publish("showTabs",!0,"boolean","Show Tabs",null,{}),i.prototype.publish("surfacePadding",4,"number","Padding"),i.prototype.publish("activeTabIdx",0,"number","Index of active tab",null,{}),i.prototype.publish("labels",[],"array","Array of tab labels sharing an index with ",null,{tags:["Private"]}),i.prototype.publish("tabLocation","top","set","Position the tabs at the bottom of the widget",["top","bottom"],{tags:["Private"]}),i.prototype.publish("widgets",[],"widgetArray","widgets",null,{tags:["Private"]}),i.prototype.clearTabs=function(){return this.labels([]),this.widgets([]),this},i.prototype.addTab=function(e,t,i,s){var o=e.size();o.width===0&&o.height===0&&e.size({width:"100%",height:"100%"});var u=this.labels(),a=this.widgets();i&&this.activeTabIdx(this.widgets().length),u.push(t);var f=(new n).widget(e?e:(new r).text("No widget defined for tab"));return a.push(f),this.labels(u),this.widgets(a),s&&s(f),this},i.prototype.widgetSize=function(e){var t=this.clientWidth(),n=this.clientHeight(),r=this._tabContainer.node().getBoundingClientRect();return typeof r.height!="undefined"&&(n-=r.height),{width:t,height:n}},i.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments),this._tabContainer=n.append("div"),this._contentContainer=n.append("div")},i.prototype.update=function(n,r){t.prototype.update.apply(this,arguments);var i=this;r.style("padding",this.surfacePadding_exists()?this.surfacePadding()+"px":null);var s=this._tabContainer.selectAll(".tab-button.id"+this.id()).data(this.showTabs()?this.labels():[],function(e){return e});s.enter().append("span").attr("class","tab-button id"+this.id()).style("cursor","pointer").on("click",function(e,t){i.click(i.widgets()[t].widget(),e,t),i.activeTabIdx(t).render()}),s.classed("active",function(e,t){return i.activeTabIdx()===t}).text(function(e){return e}),s.exit().remove();var o=this._contentContainer.selectAll(".tab-content.id"+this.id()).data(this.widgets(),function(e){return e.id()});o.enter().append("div").attr("class","tab-content id"+this.id()).each(function(e,t){e.target(this)}),o.classed("active",function(e,t){return i.activeTabIdx()===t}).style("display",function(e,t){return i.activeTabIdx()===t?"block":"none"}).each(function(t,n){t.visible(i.activeTabIdx()===n);if(i.activeTabIdx()===n){var r=i.widgetSize(e.select(this));t.surfaceBorderWidth(i.showTabs()?null:0).surfacePadding(i.showTabs()?null:0).resize(r)}}),o.exit().each(function(e,t){e.target(null)}).remove();switch(this.tabLocation()){case"bottom":this._tabContainer.attr("class","on_bottom").style("top",this._contentContainer.node().offsetHeight+this.surfacePadding()+"px").style("position","absolute"),this._contentContainer.style("top",this.surfacePadding_exists()?this.surfacePadding()+"px":null).style("position","absolute");break;default:this._tabContainer.attr("class","on_top").style("top",null).style("position","relative"),this._contentContainer.style("top",this._tabContainer.node().offsetHeight+this.surfacePadding()+"px").style("position","absolute")}},i.prototype.click=function(e,t,n){},i});