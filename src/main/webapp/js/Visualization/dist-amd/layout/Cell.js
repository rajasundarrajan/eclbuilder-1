(function(e,t){typeof define=="function"&&define.amd?define(["d3","./Surface","css!./Cell"],t):e.layout_Cell=t(e.d3,e.layout_Surface)})(this,function(e,t){function n(){t.call(this),this._dragHandles=["nw","n","ne","e","se","s","sw","w"],this._indicateTheseIds=[]}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._class+=" layout_Cell",n.prototype.publish("gridRow",0,"number","Grid Row Position",null,{tags:["Private"]}),n.prototype.publish("gridCol",0,"number","Grid Column Position",null,{tags:["Private"]}),n.prototype.publish("gridRowSpan",1,"number","Grid Row Span",null,{tags:["Private"]}),n.prototype.publish("gridColSpan",1,"number","Grid Column Span",null,{tags:["Private"]}),n.prototype.publish("handleSize",6,"number","Grid Row Position",null,{tags:["Private"]}),n.prototype.publish("indicatorGlowColor","#EEEE11","html-color","Glow color of update-indicator",null,{tags:["Basic"]}),n.prototype.publish("indicatorBorderColor","#F48A00","html-color","Border color of update-indicator",null,{tags:["Basic"]}),n.prototype.publish("indicatorOpacity",.8,"number","Opacity of update-indicator",null,{tags:["Basic"]}),n.prototype.indicateTheseIds=function(e){return arguments.length?(this._indicateTheseIds=e,this):this._indicateTheseIds},n.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments);var r=this;n.classed("layout_Surface",!0).on("mouseenter",function(e){r.onMouseEnter()}).on("mouseleave",function(e){r.onMouseLeave()})},n.prototype.update=function(n,r){t.prototype.update.apply(this,arguments);var i=r.selectAll("#"+this.id()+" > .dragHandle").data(this._dragHandles,function(e){return e});i.enter().append("div").attr("class",function(e){return"dragHandle dragHandle_"+e}).style({padding:"0px",margin:"0px",position:"absolute"}).each(function(t){switch(t){case"nw":e.select(this).style({width:"6px",height:"6px",left:"0px",top:"0px","z-index":1e3});break;case"ne":e.select(this).style({width:"6px",height:"6px",left:"calc(100% - 6px)",top:"0px","z-index":1e3});break;case"se":e.select(this).style({width:"6px",height:"6px",left:"calc(100% - 6px)",top:"calc(100% - 6px)","z-index":1e3});break;case"sw":e.select(this).style({width:"6px",height:"6px",left:"0px",top:"calc(100% - 6px)","z-index":1e3});break;case"n":e.select(this).style({width:"100%",height:"6px",left:"0px",top:"0px","z-index":900});break;case"e":e.select(this).style({width:"6px",height:"100%",left:"calc(100% - 6px)",top:"0px","z-index":900});break;case"s":e.select(this).style({width:"100%",height:"6px",left:"0px",top:"calc(100% - 6px)","z-index":900});break;case"w":e.select(this).style({width:"6px",height:"100%",left:"0px",top:"0px","z-index":900})}}),i.exit().remove()},n.prototype.onMouseEnter=function(t){var n=this.indicateTheseIds(),r=this.indicatorOpacity(),i=this.indicatorBorderColor(),s=this.indicatorGlowColor();for(var o=0;o<n.length;o++){var u=e.select("#"+n[o]),a=u.datum();u&&u.append("div").attr("class","update-indicator").style({width:a.width()+"px",height:a.height()+"px",opacity:r,"border-color":i,"-webkit-box-shadow":"inset 0px 0px 30px 0px "+s,"-moz-box-shadow":"inset 0px 0px 30px 0px "+s,"box-shadow":"inset 0px 0px 30px 0px "+s})}},n.prototype.onMouseLeave=function(){var t=this.indicateTheseIds();for(var n=0;n<t.length;n++)e.selectAll("#"+t[n]+" > div.update-indicator").remove()},n});