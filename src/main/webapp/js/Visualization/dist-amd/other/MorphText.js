(function(e,t){typeof define=="function"&&define.amd?define(["../common/SVGWidget","css!./MorphText"],t):e.other_MorphText=t(e.common_SVGWidget)})(this,function(e){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" other_MorphText",t.prototype.publish("anchor","middle","set","Sets anchor point",["middle"],{tags:["Basic"]}),t.prototype.publish("fontSize",14,"number","Sets fontsize",null,{tags:["Basic"]}),t.prototype.publish("reverse",!1,"boolean","Reverse Animation",null,{tags:["Basic"]}),t.prototype.publish("text","","string","Sets text/data of widget",null,{tags:["Basic"]}),t.prototype._origText=t.prototype.text,t.prototype.text=function(e){var n=t.prototype._origText.apply(this,arguments);if(arguments.length){var r={},i=e.split("");this.data(i.map(function(e){var t="_"+e;return r[t]===undefined&&(r[t]=0),r[t]++,{text:e,id:e.charCodeAt(0)+1024*r[t]}}))}return n},t.prototype.enter=function(e,t){if(!this.fontSize()){var n=window.getComputedStyle(e,null);this.fontSize(parseInt(n.fontSize))}this._fontWidth=this.fontSize()*32/48,this._textElement=t.append("g")},t.prototype.dateTime=function(){var e=new Date,t=e.getSeconds().toString().length===1?"0"+e.getSeconds():e.getSeconds(),n=e.getMinutes().toString().length===1?"0"+e.getMinutes():e.getMinutes(),r=e.getHours().toString().length===1?"0"+e.getHours():e.getHours(),i=e.getHours()>=12?"pm":"am",s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return o[e.getDay()]+" "+s[e.getMonth()]+" "+e.getDate()+" "+e.getFullYear()+" "+r+":"+n+":"+t+i},t.prototype.update=function(e,t){var n=this,r=this._textElement.selectAll("text").data(this.data(),function(e){return e.id});r.attr("class","update"),this.transition.apply(r).attr("x",function(e,t){return(-n.data().length/2+t)*n._fontWidth+n._fontWidth/2});var i=r.enter().append("text").attr("class","enter").attr("font-size",this.fontSize()).attr("dy",".35em").attr("y",(this.reverse()?1:-1)*this._fontWidth*2).attr("x",function(e,t){return(-n.data().length/2+t)*n._fontWidth+n._fontWidth/2}).style("fill-opacity",1e-6).style("text-anchor",this.anchor()).text(function(e){return e.text});this.transition.apply(i).attr("y",0).style("fill-opacity",1),r.exit().attr("class","exit"),this.transition.apply(r.exit()).attr("y",(this.reverse()?-1:1)*this._fontWidth*2).style("fill-opacity",1e-6).remove()},t});