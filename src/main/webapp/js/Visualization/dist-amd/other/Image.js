(function(e,t){typeof define=="function"&&define.amd?define(["../common/HTMLWidget"],t):e.other_Image=t(e.common_HTMLWidget)})(this,function(e){function t(){e.call(this),this._tag="img",this._prevSource=undefined}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" other_Image",t.prototype.publish("source",null,"string","Image Source",null,{tags:["Basic"]}),t.prototype.publish("sizing","actual","set","Controls sizing mode",["actual","fit","custom"],{tags:["Basic"]}),t.prototype.publish("customWidth","50%","string","Applies this width to IMG element if 'sizing' is set to 'custom'",null,{tags:["Basic"]}),t.prototype.publish("customHeight","20%","string","Applies this height to IMG element if 'sizing' is set to 'custom'",null,{tags:["Basic"]}),t.prototype.publish("lockAspectRatio",!0,"boolean","Locks the aspect ratio when scaling/stretching",null,{tags:["Basic"]}),t.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments),n.attr("src",this.source()),this._prevSource=this.source(),this.initSource(n)},t.prototype.update=function(t,n){e.prototype.update.apply(this,arguments),this.changedSource()&&this.initSource(n),this.sizing()==="custom"?n.style({width:this.customWidth(),height:this.customHeight()}):this.sizing()==="actual"?n.style({width:"auto",height:"auto"}):this.sizing()==="fit"&&n.style({width:"100%",height:"100%"}),this.lockAspectRatio()&&this.applyAspectRatio(n);var r=n.node().getBoundingClientRect();this._projectScaleY=r.height/this._sourceHeight,this._projectScaleX=r.width/this._sourceWidth},t.prototype.changedSource=function(){return this._prevSource!==this.source()},t.prototype.exit=function(t,n){e.prototype.exit.apply(this,arguments)},t.prototype.initSource=function(e){e.attr("src",this.source()),e.style({width:"auto",height:"auto"}),this._prevSource=this.source(),this._sourceBBox=e.node().getBoundingClientRect(),this._sourceWidth=this._sourceBBox.width,this._sourceHeight=this._sourceBBox.height,this._ratio=this._sourceBBox.width/this._sourceBBox.height},t.prototype.projection=function(e,t){return{x:e*this._projectScaleX,y:t*this._projectScaleY}},t.prototype.applyAspectRatio=function(e){var t=e.node().getBoundingClientRect();t.width<t.height?e.style({height:1/this._ratio*t.width+"px"}):e.style({width:this._ratio*t.height+"px"})},t});