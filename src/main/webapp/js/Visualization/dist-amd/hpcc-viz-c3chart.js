(function(e){"use strict";function s(e){this.owner=e}function o(e,t){if(Object.create)t.prototype=Object.create(e.prototype);else{var n=function(){};n.prototype=e.prototype,t.prototype=new n}return t.prototype.constructor=t,t}function u(e){var t=this.internal=new a(this);t.loadConfig(e),t.beforeInit(e),t.init(),t.afterInit(e),function r(e,t,n){Object.keys(e).forEach(function(i){t[i]=e[i].bind(n),Object.keys(e[i]).length>0&&r(e[i],t[i],n)})}(n,this,this)}function a(t){var n=this;n.d3=e.d3?e.d3:typeof require!="undefined"?require("d3"):undefined,n.api=t,n.config=n.getDefaultConfig(),n.data={},n.cache={},n.axes={}}function f(e){s.call(this,e)}function C(e,t){function p(e,t){e.attr("transform",function(e){return"translate("+Math.ceil(t(e)+l)+", 0)"})}function d(e,t){e.attr("transform",function(e){return"translate(0,"+Math.ceil(t(e))+")"})}function v(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function m(e){var t,n,r=[];if(e.ticks)return e.ticks.apply(e,f);n=e.domain();for(t=Math.ceil(n[0]);t<n[1];t++)r.push(t);return r.length>0&&r[0]>0&&r.unshift(r[0]-(r[1]-r[0])),r}function g(){var e=n.copy(),r;return t.isCategory&&(r=n.domain(),e.domain([r[0],r[1]-1])),e}function y(e){var t=a?a(e):e;return typeof t!="undefined"?t:""}function b(e){if(N)return N;var t={h:11.5,w:5.5};return e.select("text").text(y).each(function(e){var n=this.getBoundingClientRect(),r=y(e),i=n.height,s=r?n.width/r.length:undefined;i&&s&&(t.h=i,t.w=s)}).text(""),N=t,t}function w(n){return t.withoutTransition?n:e.transition(n)}function E(a){a.each(function(){function z(e,n){function a(e,t){s=undefined;for(var r=1;r<t.length;r++){t.charAt(r)===" "&&(s=r),i=t.substr(0,r+1),o=I.w*i.length;if(n<o)return a(e.concat(t.substr(0,s?s:r)),t.slice(s?s+1:r))}return e.concat(t)}var r=y(e),i,s,o,u=[];if(Object.prototype.toString.call(r)==="[object Array]")return r;if(!n||n<=0)n=U?95:t.isCategory?Math.ceil(c(S[1])-c(S[0]))-12:110;return a(u,r+"")}function W(e,t){var n=I.h;return t===0&&(r==="left"||r==="right"?n=-((q[e.index]-1)*(I.h/2)-3):n=".71em"),n}function X(e){var t=n(e)+(h?0:l);return O[0]<t&&t<O[1]?i:0}function $(e){return e?e>0?"start":"end":"middle"}function J(e){return e?"rotate("+e+")":""}function K(e){return e?8*Math.sin(Math.PI*(e/180)):0}function Q(e){return e?11.5-2.5*(e/15)*(e>0?1:-1):R}var a=E.g=e.select(this),f=this.__chart__||n,c=this.__chart__=g(),S=u?u:m(c),x=a.selectAll(".tick").data(S,c),T=x.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),N=x.exit().remove(),C=w(x).style("opacity",1),k,L,A,O=n.rangeExtent?n.rangeExtent():v(n.range()),M=a.selectAll(".domain").data([0]),_=(M.enter().append("path").attr("class","domain"),w(M));T.append("line"),T.append("text");var D=T.select("line"),P=C.select("line"),H=T.select("text"),B=C.select("text");t.isCategory?(l=Math.ceil((c(1)-c(0))/2),L=h?0:l,A=h?l:0):l=L=0;var j,F,I=b(a.select(".tick")),q=[],R=Math.max(i,0)+o,U=r==="left"||r==="right";j=x.select("text"),F=j.selectAll("tspan").data(function(e,n){var r=t.tickMultiline?z(e,t.tickWidth):[].concat(y(e));return q[n]=r.length,r.map(function(e){return{index:n,splitted:e}})}),F.enter().append("tspan"),F.exit().remove(),F.text(function(e){return e.splitted});var V=t.tickTextRotate;switch(r){case"bottom":k=p,D.attr("y2",i),H.attr("y",R),P.attr("x1",L).attr("x2",L).attr("y2",X),B.attr("x",0).attr("y",Q(V)).style("text-anchor",$(V)).attr("transform",J(V)),F.attr("x",0).attr("dy",W).attr("dx",K(V)),_.attr("d","M"+O[0]+","+s+"V0H"+O[1]+"V"+s);break;case"top":k=p,D.attr("y2",-i),H.attr("y",-R),P.attr("x2",0).attr("y2",-i),B.attr("x",0).attr("y",-R),j.style("text-anchor","middle"),F.attr("x",0).attr("dy","0em"),_.attr("d","M"+O[0]+","+ -s+"V0H"+O[1]+"V"+ -s);break;case"left":k=d,D.attr("x2",-i),H.attr("x",-R),P.attr("x2",-i).attr("y1",A).attr("y2",A),B.attr("x",-R).attr("y",l),j.style("text-anchor","end"),F.attr("x",-R).attr("dy",W),_.attr("d","M"+ -s+","+O[0]+"H0V"+O[1]+"H"+ -s);break;case"right":k=d,D.attr("x2",i),H.attr("x",R),P.attr("x2",i).attr("y2",0),B.attr("x",R).attr("y",0),j.style("text-anchor","start"),F.attr("x",R).attr("dy",W),_.attr("d","M"+s+","+O[0]+"H0V"+O[1]+"H"+s)}if(c.rangeBand){var G=c,Y=G.rangeBand()/2;f=c=function(e){return G(e)+Y}}else f.rangeBand?f=c:N.call(k,c);T.call(k,f),C.call(k,c)})}var n=e.scale.linear(),r="bottom",i=6,s,o=3,u=null,a,f,l=0,c=!0,h;return t=t||{},s=t.withOuterTick?6:0,E.scale=function(e){return arguments.length?(n=e,E):n},E.orient=function(e){return arguments.length?(r=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom",E):r},E.tickFormat=function(e){return arguments.length?(a=e,E):a},E.tickCentered=function(e){return arguments.length?(h=e,E):h},E.tickOffset=function(){return l},E.tickInterval=function(){var e,n;return t.isCategory?e=l*2:(n=E.g.select("path.domain").node().getTotalLength()-s*2,e=n/E.g.selectAll("line").size()),e===Infinity?0:e},E.ticks=function(){return arguments.length?(f=arguments,E):f},E.tickCulling=function(e){return arguments.length?(c=e,E):c},E.tickValues=function(e){if(typeof e=="function")u=function(){return e(n.domain())};else{if(!arguments.length)return u;u=e}return E},E}var t={version:"0.4.11"},n,r,i;t.generate=function(e){return new u(e)},t.chart={fn:u.prototype,internal:{fn:a.prototype,axis:{fn:f.prototype}}},n=t.chart.fn,r=t.chart.internal.fn,i=t.chart.internal.axis.fn,r.beforeInit=function(){},r.afterInit=function(){},r.init=function(){var e=this,t=e.config;e.initParams();if(t.data_url)e.convertUrlToData(t.data_url,t.data_mimeType,t.data_headers,t.data_keys,e.initWithData);else if(t.data_json)e.initWithData(e.convertJsonToData(t.data_json,t.data_keys));else if(t.data_rows)e.initWithData(e.convertRowsToData(t.data_rows));else{if(!t.data_columns)throw Error("url or json or rows or columns is required.");e.initWithData(e.convertColumnsToData(t.data_columns))}},r.initParams=function(){var e=this,t=e.d3,n=e.config;e.clipId="c3-"+ +(new Date)+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeFormat=n.data_xLocaltime?t.time.format:t.time.format.utc,e.axisTimeFormat=n.axis_x_localtime?t.time.format:t.time.format.utc,e.defaultAxisTimeFormat=e.axisTimeFormat.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%-m/%-d",function(e){return e.getDay()&&e.getDate()!==1}],["%-m/%-d",function(e){return e.getDate()!==1}],["%-m/%-d",function(e){return e.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=n.axis_rotated?"left":"bottom",e.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",e.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",e.subXOrient=n.axis_rotated?"left":"bottom",e.isLegendRight=n.legend_position==="right",e.isLegendInset=n.legend_position==="inset",e.isLegendTop=n.legend_inset_anchor==="top-left"||n.legend_inset_anchor==="top-right",e.isLegendLeft=n.legend_inset_anchor==="top-left"||n.legend_inset_anchor==="bottom-left",e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=undefined,e.axes.subx=t.selectAll([])},r.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},r.initWithData=function(e){var t=this,n=t.d3,r=t.config,i,s,o=!0;t.axis=new f(t),t.initPie&&t.initPie(),t.initBrush&&t.initBrush(),t.initZoom&&t.initZoom(),r.bindto?typeof r.bindto.node=="function"?t.selectChart=r.bindto:t.selectChart=n.select(r.bindto):t.selectChart=n.selectAll([]),t.selectChart.empty()&&(t.selectChart=n.select(document.createElement("div")).style("opacity",0),t.observeInserted(t.selectChart),o=!1),t.selectChart.html("").classed("c3",!0),t.data.xs={},t.data.targets=t.convertDataToTargets(e),r.data_filter&&(t.data.targets=t.data.targets.filter(r.data_filter)),r.data_hide&&t.addHiddenTargetIds(r.data_hide===!0?t.mapToIds(t.data.targets):r.data_hide),r.legend_hide&&t.addHiddenLegendIds(r.legend_hide===!0?t.mapToIds(t.data.targets):r.legend_hide),t.hasType("gauge")&&(r.legend_show=!1),t.updateSizes(),t.updateScales(),t.x.domain(n.extent(t.getXDomain(t.data.targets))),t.y.domain(t.getYDomain(t.data.targets,"y")),t.y2.domain(t.getYDomain(t.data.targets,"y2")),t.subX.domain(t.x.domain()),t.subY.domain(t.y.domain()),t.subY2.domain(t.y2.domain()),t.orgXDomain=t.x.domain(),t.brush&&t.brush.scale(t.subX),r.zoom_enabled&&t.zoom.scale(t.x),t.svg=t.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return r.onmouseover.call(t)}).on("mouseleave",function(){return r.onmouseout.call(t)}),t.config.svg_classname&&t.svg.attr("class",t.config.svg_classname),i=t.svg.append("defs"),t.clipChart=t.appendClip(i,t.clipId),t.clipXAxis=t.appendClip(i,t.clipIdForXAxis),t.clipYAxis=t.appendClip(i,t.clipIdForYAxis),t.clipGrid=t.appendClip(i,t.clipIdForGrid),t.clipSubchart=t.appendClip(i,t.clipIdForSubchart),t.updateSvgSize(),s=t.main=t.svg.append("g").attr("transform",t.getTranslate("main")),t.initSubchart&&t.initSubchart(),t.initTooltip&&t.initTooltip(),t.initLegend&&t.initLegend(),t.initTitle&&t.initTitle(),s.append("text").attr("class",l.text+" "+l.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),t.initRegion(),t.initGrid(),s.append("g").attr("clip-path",t.clipPath).attr("class",l.chart),r.grid_lines_front&&t.initGridLines(),t.initEventRect(),t.initChartElements(),s.insert("rect",r.zoom_privileged?null:"g."+l.regions).attr("class",l.zoomRect).attr("width",t.width).attr("height",t.height).style("opacity",0).on("dblclick.zoom",null),r.axis_x_extent&&t.brush.extent(t.getDefaultExtent()),t.axis.init(),t.updateTargets(t.data.targets),o&&(t.updateDimension(),t.config.oninit.call(t),t.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),t.bindResize(),t.api.element=t.selectChart.node()},r.smoothLines=function(e,t){var n=this;t==="grid"&&e.each(function(){var e=n.d3.select(this),t=e.attr("x1"),r=e.attr("x2"),i=e.attr("y1"),s=e.attr("y2");e.attr({x1:Math.ceil(t),x2:Math.ceil(r),y1:Math.ceil(i),y2:Math.ceil(s)})})},r.updateSizes=function(){var e=this,t=e.config,n=e.legend?e.getLegendHeight():0,r=e.legend?e.getLegendWidth():0,i=e.isLegendRight||e.isLegendInset?0:n,s=e.hasArcType(),o=t.axis_rotated||s?0:e.getHorizontalAxisHeight("x"),u=t.subchart_show&&!s?t.subchart_size_height+o:0;e.currentWidth=e.getCurrentWidth(),e.currentHeight=e.getCurrentHeight(),e.margin=t.axis_rotated?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:s?0:e.getCurrentPaddingRight(),bottom:e.getHorizontalAxisHeight("y")+i+e.getCurrentPaddingBottom(),left:u+(s?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:s?0:e.getCurrentPaddingRight(),bottom:o+u+i+e.getCurrentPaddingBottom(),left:s?0:e.getCurrentPaddingLeft()},e.margin2=t.axis_rotated?{top:e.margin.top,right:NaN,bottom:20+i,left:e.rotated_padding_left}:{top:e.currentHeight-u-i,right:NaN,bottom:o+i,left:e.margin.left},e.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(n,r),e.width=e.currentWidth-e.margin.left-e.margin.right,e.height=e.currentHeight-e.margin.top-e.margin.bottom,e.width<0&&(e.width=0),e.height<0&&(e.height=0),e.width2=t.axis_rotated?e.margin.left-e.rotated_padding_left-e.rotated_padding_right:e.width,e.height2=t.axis_rotated?e.height:e.currentHeight-e.margin2.top-e.margin2.bottom,e.width2<0&&(e.width2=0),e.height2<0&&(e.height2=0),e.arcWidth=e.width-(e.isLegendRight?r+10:0),e.arcHeight=e.height-(e.isLegendRight?0:10),e.hasType("gauge")&&!t.gauge_fullCircle&&(e.arcHeight+=e.height-e.getGaugeLabelHeight()),e.updateRadius&&e.updateRadius(),e.isLegendRight&&s&&(e.margin3.left=e.arcWidth/2+e.radiusExpanded*1.1)},r.updateTargets=function(e){var t=this;t.updateTargetsForText(e),t.updateTargetsForBar(e),t.updateTargetsForLine(e),t.hasArcType()&&t.updateTargetsForArc&&t.updateTargetsForArc(e),t.updateTargetsForSubchart&&t.updateTargetsForSubchart(e),t.showTargets()},r.showTargets=function(){var e=this;e.svg.selectAll("."+l.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},r.redraw=function(e,t){var n=this,r=n.main,i=n.d3,s=n.config,o=n.getShapeIndices(n.isAreaType),u=n.getShapeIndices(n.isBarType),a=n.getShapeIndices(n.isLineType),f,c,h,p,d,v,m,g,y,b,w,S,x,T=n.hasArcType(),N,C,k,L,A,O,M,_,D,P,H=n.filterTargetsToShow(n.data.targets),B,j,F,I,q=n.xv.bind(n),R,U;e=e||{},f=E(e,"withY",!0),c=E(e,"withSubchart",!0),h=E(e,"withTransition",!0),v=E(e,"withTransform",!1),m=E(e,"withUpdateXDomain",!1),g=E(e,"withUpdateOrgXDomain",!1),y=E(e,"withTrimXDomain",!0),x=E(e,"withUpdateXAxis",m),b=E(e,"withLegend",!1),w=E(e,"withEventRect",!0),S=E(e,"withDimension",!0),p=E(e,"withTransitionForExit",h),d=E(e,"withTransitionForAxis",h),O=h?s.transition_duration:0,M=p?O:0,_=d?O:0,t=t||n.axis.generateTransitions(_),b&&s.legend_show?n.updateLegend(n.mapToIds(n.data.targets),e,t):S&&n.updateDimension(!0),n.isCategorized()&&H.length===0&&n.x.domain([0,n.axes.x.selectAll(".tick").size()]),H.length?(n.updateXDomain(H,m,g,y),s.axis_x_tick_values||(B=n.axis.updateXAxisTickValues(H))):(n.xAxis.tickValues([]),n.subXAxis.tickValues([])),s.zoom_rescale&&!e.flow&&(I=n.x.orgDomain()),n.y.domain(n.getYDomain(H,"y",I)),n.y2.domain(n.getYDomain(H,"y2",I)),!s.axis_y_tick_values&&s.axis_y_tick_count&&n.yAxis.tickValues(n.axis.generateTickValues(n.y.domain(),s.axis_y_tick_count)),!s.axis_y2_tick_values&&s.axis_y2_tick_count&&n.y2Axis.tickValues(n.axis.generateTickValues(n.y2.domain(),s.axis_y2_tick_count)),n.axis.redraw(t,T),n.axis.updateLabels(h);if((m||x)&&H.length)if(s.axis_x_tick_culling&&B){for(j=1;j<B.length;j++)if(B.length/j<s.axis_x_tick_culling_max){F=j;break}n.svg.selectAll("."+l.axisX+" .tick text").each(function(e){var t=B.indexOf(e);t>=0&&i.select(this).style("display",t%F?"none":"block")})}else n.svg.selectAll("."+l.axisX+" .tick text").style("display","block");N=n.generateDrawArea?n.generateDrawArea(o,!1):undefined,C=n.generateDrawBar?n.generateDrawBar(u):undefined,k=n.generateDrawLine?n.generateDrawLine(a,!1):undefined,L=n.generateXYForText(o,u,a,!0),A=n.generateXYForText(o,u,a,!1),f&&(n.subY.domain(n.getYDomain(H,"y")),n.subY2.domain(n.getYDomain(H,"y2"))),n.updateXgridFocus(),r.select("text."+l.text+"."+l.empty).attr("x",n.width/2).attr("y",n.height/2).text(s.data_empty_label_text).transition().style("opacity",H.length?0:1),n.updateGrid(O),n.updateRegion(O),n.updateBar(M),n.updateLine(M),n.updateArea(M),n.updateCircle(),n.hasDataLabel()&&n.updateText(M),n.redrawTitle&&n.redrawTitle(),n.redrawArc&&n.redrawArc(O,M,v),n.redrawSubchart&&n.redrawSubchart(c,t,O,M,o,u,a),r.selectAll("."+l.selectedCircles).filter(n.isBarType.bind(n)).selectAll("circle").remove(),s.interaction_enabled&&!e.flow&&w&&(n.redrawEventRect(),n.updateZoom&&n.updateZoom()),n.updateCircleY(),R=(n.config.axis_rotated?n.circleY:n.circleX).bind(n),U=(n.config.axis_rotated?n.circleX:n.circleY).bind(n),e.flow&&(P=n.generateFlow({targets:H,flow:e.flow,duration:e.flow.duration,drawBar:C,drawLine:k,drawArea:N,cx:R,cy:U,xv:q,xForText:L,yForText:A})),(O||P)&&n.isTabVisible()?i.transition().duration(O).each(function(){var t=[];[n.redrawBar(C,!0),n.redrawLine(k,!0),n.redrawArea(N,!0),n.redrawCircle(R,U,!0),n.redrawText(L,A,e.flow,!0),n.redrawRegion(!0),n.redrawGrid(!0)].forEach(function(e){e.forEach(function(e){t.push(e)})}),D=n.generateWait(),t.forEach(function(e){D.add(e)})}).call(D,function(){P&&P(),s.onrendered&&s.onrendered.call(n)}):(n.redrawBar(C),n.redrawLine(k),n.redrawArea(N),n.redrawCircle(R,U),n.redrawText(L,A,e.flow),n.redrawRegion(),n.redrawGrid(),s.onrendered&&s.onrendered.call(n)),n.mapToIds(n.data.targets).forEach(function(e){n.withoutFadeIn[e]=!0})},r.updateAndRedraw=function(e){var t=this,n=t.config,r;e=e||{},e.withTransition=E(e,"withTransition",!0),e.withTransform=E(e,"withTransform",!1),e.withLegend=E(e,"withLegend",!1),e.withUpdateXDomain=!0,e.withUpdateOrgXDomain=!0,e.withTransitionForExit=!1,e.withTransitionForTransform=E(e,"withTransitionForTransform",e.withTransition),t.updateSizes();if(!e.withLegend||!n.legend_show)r=t.axis.generateTransitions(e.withTransitionForAxis?n.transition_duration:0),t.updateScales(),t.updateSvgSize(),t.transformAll(e.withTransitionForTransform,r);t.redraw(e,r)},r.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},r.isTimeSeries=function(){return this.config.axis_x_type==="timeseries"},r.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},r.isCustomX=function(){var e=this,t=e.config;return!e.isTimeSeries()&&(t.data_x||w(t.data_xs))},r.isTimeSeriesY=function(){return this.config.axis_y_type==="timeseries"},r.getTranslate=function(e){var t=this,n=t.config,r,i;return e==="main"?(r=g(t.margin.left),i=g(t.margin.top)):e==="context"?(r=g(t.margin2.left),i=g(t.margin2.top)):e==="legend"?(r=t.margin3.left,i=t.margin3.top):e==="x"?(r=0,i=n.axis_rotated?0:t.height):e==="y"?(r=0,i=n.axis_rotated?t.height:0):e==="y2"?(r=n.axis_rotated?0:t.width,i=n.axis_rotated?1:0):e==="subx"?(r=0,i=n.axis_rotated?0:t.height2):e==="arc"&&(r=t.arcWidth/2,i=t.arcHeight/2),"translate("+r+","+i+")"},r.initialOpacity=function(e){return e.value!==null&&this.withoutFadeIn[e.id]?1:0},r.initialOpacityForCircle=function(e){return e.value!==null&&this.withoutFadeIn[e.id]?this.opacityForCircle(e):0},r.opacityForCircle=function(e){var t=this.config.point_show?1:0;return c(e.value)?this.isScatterType(e)?.5:t:0},r.opacityForText=function(){return this.hasDataLabel()?1:0},r.xx=function(e){return e?this.x(e.x):null},r.xv=function(e){var t=this,n=e.value;return t.isTimeSeries()?n=t.parseDate(e.value):t.isCategorized()&&typeof e.value=="string"&&(n=t.config.axis_x_categories.indexOf(e.value)),Math.ceil(t.x(n))},r.yv=function(e){var t=this,n=e.axis&&e.axis==="y2"?t.y2:t.y;return Math.ceil(n(e.value))},r.subxx=function(e){return e?this.subX(e.x):null},r.transformMain=function(e,t){var n=this,r,i,s;t&&t.axisX?r=t.axisX:(r=n.main.select("."+l.axisX),e&&(r=r.transition())),t&&t.axisY?i=t.axisY:(i=n.main.select("."+l.axisY),e&&(i=i.transition())),t&&t.axisY2?s=t.axisY2:(s=n.main.select("."+l.axisY2),e&&(s=s.transition())),(e?n.main.transition():n.main).attr("transform",n.getTranslate("main")),r.attr("transform",n.getTranslate("x")),i.attr("transform",n.getTranslate("y")),s.attr("transform",n.getTranslate("y2")),n.main.select("."+l.chartArcs).attr("transform",n.getTranslate("arc"))},r.transformAll=function(e,t){var n=this;n.transformMain(e,t),n.config.subchart_show&&n.transformContext(e,t),n.legend&&n.transformLegend(e)},r.updateSvgSize=function(){var e=this,t=e.svg.select(".c3-brush .background");e.svg.attr("width",e.currentWidth).attr("height",e.currentHeight),e.svg.selectAll(["#"+e.clipId,"#"+e.clipIdForGrid]).select("rect").attr("width",e.width).attr("height",e.height),e.svg.select("#"+e.clipIdForXAxis).select("rect").attr("x",e.getXAxisClipX.bind(e)).attr("y",e.getXAxisClipY.bind(e)).attr("width",e.getXAxisClipWidth.bind(e)).attr("height",e.getXAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForYAxis).select("rect").attr("x",e.getYAxisClipX.bind(e)).attr("y",e.getYAxisClipY.bind(e)).attr("width",e.getYAxisClipWidth.bind(e)).attr("height",e.getYAxisClipHeight.bind(e)),e.svg.select("#"+e.clipIdForSubchart).select("rect").attr("width",e.width).attr("height",t.size()?t.attr("height"):0),e.svg.select("."+l.zoomRect).attr("width",e.width).attr("height",e.height),e.selectChart.style("max-height",e.currentHeight+"px")},r.updateDimension=function(e){var t=this;e||(t.config.axis_rotated?(t.axes.x.call(t.xAxis),t.axes.subx.call(t.subXAxis)):(t.axes.y.call(t.yAxis),t.axes.y2.call(t.y2Axis))),t.updateSizes(),t.updateScales(),t.updateSvgSize(),t.transformAll(!1)},r.observeInserted=function(t){var n=this,r;if(typeof MutationObserver=="undefined"){e.console.error("MutationObserver not defined.");return}r=new MutationObserver(function(i){i.forEach(function(i){i.type==="childList"&&i.previousSibling&&(r.disconnect(),n.intervalForObserveInserted=e.setInterval(function(){t.node().parentNode&&(e.clearInterval(n.intervalForObserveInserted),n.updateDimension(),n.brush&&n.brush.update(),n.config.oninit.call(n),n.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity",1))},10))})}),r.observe(t.node(),{attributes:!0,childList:!0,characterData:!0})},r.bindResize=function(){var t=this,n=t.config;t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){n.onresize.call(t)}),n.resize_auto&&t.resizeFunction.add(function(){t.resizeTimeout!==undefined&&e.clearTimeout(t.resizeTimeout),t.resizeTimeout=e.setTimeout(function(){delete t.resizeTimeout,t.api.flush()},100)}),t.resizeFunction.add(function(){n.onresized.call(t)});if(e.attachEvent)e.attachEvent("onresize",t.resizeFunction);else if(e.addEventListener)e.addEventListener("resize",t.resizeFunction,!1);else{var r=e.onresize;if(!r)r=t.generateResize();else if(!r.add||!r.remove)r=t.generateResize(),r.add(e.onresize);r.add(t.resizeFunction),e.onresize=r}},r.generateResize=function(){function t(){e.forEach(function(e){e()})}var e=[];return t.add=function(t){e.push(t)},t.remove=function(t){for(var n=0;n<e.length;n++)if(e[n]===t){e.splice(n,1);break}},t},r.endall=function(e,t){var n=0;e.each(function(){++n}).each("end",function(){--n||t.apply(this,arguments)})},r.generateWait=function(){var e=[],t=function(t,n){var r=setInterval(function(){var t=0;e.forEach(function(e){if(e.empty()){t+=1;return}try{e.transition()}catch(n){t+=1}}),t===e.length&&(clearInterval(r),n&&n())},10)};return t.add=function(t){e.push(t)},t},r.parseDate=function(t){var n=this,r;return t instanceof Date?r=t:typeof t=="string"?r=n.dataTimeFormat(n.config.data_xFormat).parse(t):typeof t=="number"&&!isNaN(t)&&(r=new Date(+t)),(!r||isNaN(+r))&&e.console.error("Failed to parse x '"+t+"' to Date object"),r},r.isTabVisible=function(){var e;return typeof document.hidden!="undefined"?e="hidden":typeof document.mozHidden!="undefined"?e="mozHidden":typeof document.msHidden!="undefined"?e="msHidden":typeof document.webkitHidden!="undefined"&&(e="webkitHidden"),document[e]?!1:!0},r.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:undefined,size_width:undefined,size_height:undefined,padding_left:undefined,padding_right:undefined,padding_top:undefined,padding_bottom:undefined,resize_auto:!0,zoom_enabled:!1,zoom_extent:undefined,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:undefined,zoom_x_max:undefined,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:undefined,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(e){return e},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:undefined,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:undefined,data_colors:{},data_hide:!1,data_filter:undefined,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:undefined,data_headers:undefined,data_json:undefined,data_rows:undefined,data_columns:undefined,data_mimeType:undefined,data_keys:undefined,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:undefined,legend_item_onclick:undefined,legend_item_onmouseover:undefined,legend_item_onmouseout:undefined,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:undefined,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:undefined,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:undefined,axis_x_min:undefined,axis_x_padding:{},axis_x_height:undefined,axis_x_extent:undefined,axis_x_label:{},axis_y_show:!0,axis_y_type:undefined,axis_y_max:undefined,axis_y_min:undefined,axis_y_inverted:!1,axis_y_center:undefined,axis_y_inner:undefined,axis_y_label:{},axis_y_tick_format:undefined,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:undefined,axis_y_tick_time_value:undefined,axis_y_tick_time_interval:undefined,axis_y_padding:{},axis_y_default:undefined,axis_y2_show:!1,axis_y2_max:undefined,axis_y2_min:undefined,axis_y2_inverted:!1,axis_y2_center:undefined,axis_y2_inner:undefined,axis_y2_label:{},axis_y2_tick_format:undefined,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:undefined,axis_y2_padding:{},axis_y2_default:undefined,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:undefined,point_select_r:undefined,line_connectNull:!1,line_step_type:"step",bar_width:undefined,bar_width_ratio:.6,bar_width_max:undefined,bar_zerobased:!0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:undefined,pie_label_threshold:.05,pie_label_ratio:undefined,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:undefined,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_units:undefined,gauge_width:undefined,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:undefined,donut_label_threshold:.05,donut_label_ratio:undefined,donut_width:undefined,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:undefined,tooltip_format_name:undefined,tooltip_format_value:undefined,tooltip_position:undefined,tooltip_contents:function(e,t,n,r){return this.getTooltipContent?this.getTooltipContent(e,t,n,r):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:undefined,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},r.additionalConfig={},r.loadConfig=function(e){function s(){var e=r.shift();return e&&n&&typeof n=="object"&&e in n?(n=n[e],s()):e?undefined:n}var t=this.config,n,r,i;Object.keys(t).forEach(function(o){n=e,r=o.split("_"),i=s(),v(i)&&(t[o]=i)})},r.getScale=function(e,t,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([e,t])},r.getX=function(e,t,n,r){var i=this,s=i.getScale(e,t,i.isTimeSeries()),o=n?s.domain(n):s,u;i.isCategorized()?(r=r||function(){return 0},s=function(e,t){var n=o(e)+r(e);return t?n:Math.ceil(n)}):s=function(e,t){var n=o(e);return t?n:Math.ceil(n)};for(u in o)s[u]=o[u];return s.orgDomain=function(){return o.domain()},i.isCategorized()&&(s.domain=function(e){return arguments.length?(o.domain(e),s):(e=this.orgDomain(),[e[0],e[1]+1])}),s},r.getY=function(e,t,n){var r=this.getScale(e,t,this.isTimeSeriesY());return n&&r.domain(n),r},r.getYScale=function(e){return this.axis.getId(e)==="y2"?this.y2:this.y},r.getSubYScale=function(e){return this.axis.getId(e)==="y2"?this.subY2:this.subY},r.updateScales=function(){var e=this,t=e.config,n=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,n?undefined:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,n?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,n?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,n?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,n?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer),n||(e.brush&&e.brush.scale(e.subX),t.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},r.getYDomainMin=function(e){var t=this,n=t.config,r=t.mapToIds(e),i=t.getValuesAsIdKeyed(e),s,o,u,a,f,l;if(n.data_groups.length>0){l=t.hasNegativeValueInTargets(e);for(s=0;s<n.data_groups.length;s++){a=n.data_groups[s].filter(function(e){return r.indexOf(e)>=0});if(a.length===0)continue;u=a[0],l&&i[u]&&i[u].forEach(function(e,t){i[u][t]=e<0?e:0});for(o=1;o<a.length;o++){f=a[o];if(!i[f])continue;i[f].forEach(function(e,n){t.axis.getId(f)===t.axis.getId(u)&&i[u]&&!(l&&+e>0)&&(i[u][n]+=+e)})}}}return t.d3.min(Object.keys(i).map(function(e){return t.d3.min(i[e])}))},r.getYDomainMax=function(e){var t=this,n=t.config,r=t.mapToIds(e),i=t.getValuesAsIdKeyed(e),s,o,u,a,f,l;if(n.data_groups.length>0){l=t.hasPositiveValueInTargets(e);for(s=0;s<n.data_groups.length;s++){a=n.data_groups[s].filter(function(e){return r.indexOf(e)>=0});if(a.length===0)continue;u=a[0],l&&i[u]&&i[u].forEach(function(e,t){i[u][t]=e>0?e:0});for(o=1;o<a.length;o++){f=a[o];if(!i[f])continue;i[f].forEach(function(e,n){t.axis.getId(f)===t.axis.getId(u)&&i[u]&&!(l&&+e<0)&&(i[u][n]+=+e)})}}}return t.d3.max(Object.keys(i).map(function(e){return t.d3.max(i[e])}))},r.getYDomain=function(e,t,n){var r=this,i=r.config,s=e.filter(function(e){return r.axis.getId(e.id)===t}),o=n?r.filterByXDomain(s,n):s,u=t==="y2"?i.axis_y2_min:i.axis_y_min,a=t==="y2"?i.axis_y2_max:i.axis_y_max,f=r.getYDomainMin(o),l=r.getYDomainMax(o),h,p,d,v,m,g=t==="y2"?i.axis_y2_center:i.axis_y_center,b,E,S,x,T,N,C=r.hasType("bar",o)&&i.bar_zerobased||r.hasType("area",o)&&i.area_zerobased,k=t==="y2"?i.axis_y2_inverted:i.axis_y_inverted,L=r.hasDataLabel()&&i.axis_rotated,A=r.hasDataLabel()&&!i.axis_rotated;f=c(u)?u:c(a)?f<a?f:a-10:f,l=c(a)?a:c(u)?u<l?l:u+10:l;if(o.length===0)return t==="y2"?r.y2.domain():r.y.domain();isNaN(f)&&(f=0),isNaN(l)&&(l=f),f===l&&(f<0?l=0:f=0),T=f>=0&&l>=0,N=f<=0&&l<=0;if(c(u)&&T||c(a)&&N)C=!1;return C&&(T&&(f=0),N&&(l=0)),p=Math.abs(l-f),d=v=m=p*.1,typeof g!="undefined"&&(b=Math.max(Math.abs(f),Math.abs(l)),l=g+b,f=g-b),L?(E=r.getDataLabelLength(f,l,"width"),S=y(r.y.range()),x=[E[0]/S,E[1]/S],v+=p*(x[1]/(1-x[0]-x[1])),m+=p*(x[0]/(1-x[0]-x[1]))):A&&(E=r.getDataLabelLength(f,l,"height"),v+=r.axis.convertPixelsToAxisPadding(E[1],p),m+=r.axis.convertPixelsToAxisPadding(E[0],p)),t==="y"&&w(i.axis_y_padding)&&(v=r.axis.getPadding(i.axis_y_padding,"top",v,p),m=r.axis.getPadding(i.axis_y_padding,"bottom",m,p)),t==="y2"&&w(i.axis_y2_padding)&&(v=r.axis.getPadding(i.axis_y2_padding,"top",v,p),m=r.axis.getPadding(i.axis_y2_padding,"bottom",m,p)),C&&(T&&(m=f),N&&(v=-l)),h=[f-m,l+v],k?h.reverse():h},r.getXDomainMin=function(e){var t=this,n=t.config;return v(n.axis_x_min)?t.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:t.d3.min(e,function(e){return t.d3.min(e.values,function(e){return e.x})})},r.getXDomainMax=function(e){var t=this,n=t.config;return v(n.axis_x_max)?t.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:t.d3.max(e,function(e){return t.d3.max(e.values,function(e){return e.x})})},r.getXDomainPadding=function(e){var t=this,n=t.config,r=e[1]-e[0],i,s,o,u;return t.isCategorized()?s=0:t.hasType("bar")?(i=t.getMaxDataCount(),s=i>1?r/(i-1)/2:.5):s=r*.01,typeof n.axis_x_padding=="object"&&w(n.axis_x_padding)?(o=c(n.axis_x_padding.left)?n.axis_x_padding.left:s,u=c(n.axis_x_padding.right)?n.axis_x_padding.right:s):typeof n.axis_x_padding=="number"?o=u=n.axis_x_padding:o=u=s,{left:o,right:u}},r.getXDomain=function(e){var t=this,n=[t.getXDomainMin(e),t.getXDomainMax(e)],r=n[0],i=n[1],s=t.getXDomainPadding(n),o=0,u=0;r-i===0&&!t.isCategorized()&&(t.isTimeSeries()?(r=new Date(r.getTime()*.5),i=new Date(i.getTime()*1.5)):(r=r===0?1:r*.5,i=i===0?-1:i*1.5));if(r||r===0)o=t.isTimeSeries()?new Date(r.getTime()-s.left):r-s.left;if(i||i===0)u=t.isTimeSeries()?new Date(i.getTime()+s.right):i+s.right;return[o,u]},r.updateXDomain=function(e,t,n,r,i){var s=this,o=s.config;return n&&(s.x.domain(i?i:s.d3.extent(s.getXDomain(e))),s.orgXDomain=s.x.domain(),o.zoom_enabled&&s.zoom.scale(s.x).updateScaleExtent(),s.subX.domain(s.x.domain()),s.brush&&s.brush.scale(s.subX)),t&&(s.x.domain(i?i:!s.brush||s.brush.empty()?s.orgXDomain:s.brush.extent()),o.zoom_enabled&&s.zoom.scale(s.x).updateScaleExtent()),r&&s.x.domain(s.trimXDomain(s.x.orgDomain())),s.x.domain()},r.trimXDomain=function(e){var t=this.getZoomDomain(),n=t[0],r=t[1];return e[0]<=n&&(e[1]=+e[1]+(n-e[0]),e[0]=n),r<=e[1]&&(e[0]=+e[0]-(e[1]-r),e[1]=r),e},r.isX=function(e){var t=this,n=t.config;return n.data_x&&e===n.data_x||w(n.data_xs)&&S(n.data_xs,e)},r.isNotX=function(e){return!this.isX(e)},r.getXKey=function(e){var t=this,n=t.config;return n.data_x?n.data_x:w(n.data_xs)?n.data_xs[e]:null},r.getXValuesOfXKey=function(e,t){var n=this,r,i=t&&w(t)?n.mapToIds(t):[];return i.forEach(function(t){n.getXKey(t)===e&&(r=n.data.xs[t])}),r},r.getIndexByX=function(e){var t=this,n=t.filterByX(t.data.targets,e);return n.length?n[0].index:null},r.getXValue=function(e,t){var n=this;return e in n.data.xs&&n.data.xs[e]&&c(n.data.xs[e][t])?n.data.xs[e][t]:t},r.getOtherTargetXs=function(){var e=this,t=Object.keys(e.data.xs);return t.length?e.data.xs[t[0]]:null},r.getOtherTargetX=function(e){var t=this.getOtherTargetXs();return t&&e<t.length?t[e]:null},r.addXs=function(e){var t=this;Object.keys(e).forEach(function(n){t.config.data_xs[n]=e[n]})},r.hasMultipleX=function(e){return this.d3.set(Object.keys(e).map(function(t){return e[t]})).size()>1},r.isMultipleX=function(){return w(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},r.addName=function(e){var t=this,n;return e&&(n=t.config.data_names[e.id],e.name=n!==undefined?n:e.id),e},r.getValueOnIndex=function(e,t){var n=e.filter(function(e){return e.index===t});return n.length?n[0]:null},r.updateTargetX=function(e,t){var n=this;e.forEach(function(e){e.values.forEach(function(r,i){r.x=n.generateTargetX(t[i],e.id,i)}),n.data.xs[e.id]=t})},r.updateTargetXs=function(e,t){var n=this;e.forEach(function(e){t[e.id]&&n.updateTargetX([e],t[e.id])})},r.generateTargetX=function(e,t,n){var r=this,i;return r.isTimeSeries()?i=e?r.parseDate(e):r.parseDate(r.getXValue(t,n)):r.isCustomX()&&!r.isCategorized()?i=c(e)?+e:r.getXValue(t,n):i=n,i},r.cloneTarget=function(e){return{id:e.id,id_org:e.id_org,values:e.values.map(function(e){return{x:e.x,value:e.value,id:e.id}})}},r.updateXs=function(){var e=this;e.data.targets.length&&(e.xs=[],e.data.targets[0].values.forEach(function(t){e.xs[t.index]=t.x}))},r.getPrevX=function(e){var t=this.xs[e-1];return typeof t!="undefined"?t:null},r.getNextX=function(e){var t=this.xs[e+1];return typeof t!="undefined"?t:null},r.getMaxDataCount=function(){var e=this;return e.d3.max(e.data.targets,function(e){return e.values.length})},r.getMaxDataCountTarget=function(e){var t=e.length,n=0,r;return t>1?e.forEach(function(e){e.values.length>n&&(r=e,n=e.values.length)}):r=t?e[0]:null,r},r.getEdgeX=function(e){var t=this;return e.length?[t.d3.min(e,function(e){return e.values[0].x}),t.d3.max(e,function(e){return e.values[e.values.length-1].x})]:[0,0]},r.mapToIds=function(e){return e.map(function(e){return e.id})},r.mapToTargetIds=function(e){var t=this;return e?[].concat(e):t.mapToIds(t.data.targets)},r.hasTarget=function(e,t){var n=this.mapToIds(e),r;for(r=0;r<n.length;r++)if(n[r]===t)return!0;return!1},r.isTargetToShow=function(e){return this.hiddenTargetIds.indexOf(e)<0},r.isLegendToShow=function(e){return this.hiddenLegendIds.indexOf(e)<0},r.filterTargetsToShow=function(e){var t=this;return e.filter(function(e){return t.isTargetToShow(e.id)})},r.mapTargetsToUniqueXs=function(e){var t=this,n=t.d3.set(t.d3.merge(e.map(function(e){return e.values.map(function(e){return+e.x})}))).values();return n=t.isTimeSeries()?n.map(function(e){return new Date(+e)}):n.map(function(e){return+e}),n.sort(function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN})},r.addHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.concat(e)},r.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},r.addHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.concat(e)},r.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},r.getValuesAsIdKeyed=function(e){var t={};return e.forEach(function(e){t[e.id]=[],e.values.forEach(function(n){t[e.id].push(n.value)})}),t},r.checkValueInTargets=function(e,t){var n=Object.keys(e),r,i,s;for(r=0;r<n.length;r++){s=e[n[r]].values;for(i=0;i<s.length;i++)if(t(s[i].value))return!0}return!1},r.hasNegativeValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return e<0})},r.hasPositiveValueInTargets=function(e){return this.checkValueInTargets(e,function(e){return e>0})},r.isOrderDesc=function(){var e=this.config;return typeof e.data_order=="string"&&e.data_order.toLowerCase()==="desc"},r.isOrderAsc=function(){var e=this.config;return typeof e.data_order=="string"&&e.data_order.toLowerCase()==="asc"},r.orderTargets=function(e){var t=this,n=t.config,r=t.isOrderAsc(),i=t.isOrderDesc();return r||i?e.sort(function(e,t){var n=function(e,t){return e+Math.abs(t.value)},i=e.values.reduce(n,0),s=t.values.reduce(n,0);return r?s-i:i-s}):h(n.data_order)&&e.sort(n.data_order),e},r.filterByX=function(e,t){return this.d3.merge(e.map(function(e){return e.values})).filter(function(e){return e.x-t===0})},r.filterRemoveNull=function(e){return e.filter(function(e){return c(e.value)})},r.filterByXDomain=function(e,t){return e.map(function(e){return{id:e.id,id_org:e.id_org,values:e.values.filter(function(e){return t[0]<=e.x&&e.x<=t[1]})}})},r.hasDataLabel=function(){var e=this.config;return typeof e.data_labels=="boolean"&&e.data_labels?!0:typeof e.data_labels=="object"&&w(e.data_labels)?!0:!1},r.getDataLabelLength=function(e,t,n){var r=this,i=[0,0],s=1.3;return r.selectChart.select("svg").selectAll(".dummy").data([e,t]).enter().append("text").text(function(e){return r.dataLabelFormat(e.id)(e)}).each(function(e,t){i[t]=this.getBoundingClientRect()[n]*s}).remove(),i},r.isNoneArc=function(e){return this.hasTarget(this.data.targets,e.id)},r.isArc=function(e){return"data"in e&&this.hasTarget(this.data.targets,e.data.id)},r.findSameXOfValues=function(e,t){var n,r=e[t].x,i=[];for(n=t-1;n>=0;n--){if(r!==e[n].x)break;i.push(e[n])}for(n=t;n<e.length;n++){if(r!==e[n].x)break;i.push(e[n])}return i},r.findClosestFromTargets=function(e,t){var n=this,r;return r=e.map(function(e){return n.findClosest(e.values,t)}),n.findClosest(r,t)},r.findClosest=function(e,t){var n=this,r=n.config.point_sensitivity,i;return e.filter(function(e){return e&&n.isBarType(e.id)}).forEach(function(e){var t=n.main.select("."+l.bars+n.getTargetSelectorSuffix(e.id)+" ."+l.bar+"-"+e.index).node();!i&&n.isWithinBar(t)&&(i=e)}),e.filter(function(e){return e&&!n.isBarType(e.id)}).forEach(function(e){var s=n.dist(e,t);s<r&&(r=s,i=e)}),i},r.dist=function(e,t){var n=this,r=n.config,i=r.axis_rotated?1:0,s=r.axis_rotated?0:1,o=n.circleY(e,e.index),u=n.x(e.x);return Math.sqrt(Math.pow(u-t[i],2)+Math.pow(o-t[s],2))},r.convertValuesToStep=function(e){var t=[].concat(e),n;if(!this.isCategorized())return e;for(n=e.length+1;0<n;n--)t[n]=t[n-1];return t[0]={x:t[0].x-1,value:t[0].value,id:t[0].id},t[e.length+1]={x:t[e.length].x+1,value:t[e.length].value,id:t[e.length].id},t},r.updateDataAttributes=function(e,t){var n=this,r=n.config,i=r["data_"+e];return typeof t=="undefined"?i:(Object.keys(t).forEach(function(e){i[e]=t[e]}),n.redraw({withLegend:!0}),i)},r.convertUrlToData=function(e,t,n,r,i){var s=this,o=t?t:"csv",u=s.d3.xhr(e);n&&Object.keys(n).forEach(function(e){u.header(e,n[e])}),u.get(function(e,t){var n;if(!t)throw new Error(e.responseURL+" "+e.status+" ("+e.statusText+")");o==="json"?n=s.convertJsonToData(JSON.parse(t.response),r):o==="tsv"?n=s.convertTsvToData(t.response):n=s.convertCsvToData(t.response),i.call(s,n)})},r.convertXsvToData=function(e,t){var n=t.parseRows(e),r;return n.length===1?(r=[{}],n[0].forEach(function(e){r[0][e]=null})):r=t.parse(e),r},r.convertCsvToData=function(e){return this.convertXsvToData(e,this.d3.csv)},r.convertTsvToData=function(e){return this.convertXsvToData(e,this.d3.tsv)},r.convertJsonToData=function(e,t){var n=this,r=[],i,s;return t?(t.x?(i=t.value.concat(t.x),n.config.data_x=t.x):i=t.value,r.push(i),e.forEach(function(e){var t=[];i.forEach(function(r){var i=n.findValueInJson(e,r);d(i)&&(i=null),t.push(i)}),r.push(t)}),s=n.convertRowsToData(r)):(Object.keys(e).forEach(function(t){r.push([t].concat(e[t]))}),s=n.convertColumnsToData(r)),s},r.findValueInJson=function(e,t){t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");var n=t.split(".");for(var r=0;r<n.length;++r){var i=n[r];if(!(i in e))return;e=e[i]}return e},r.convertRowsToData=function(e){var t=e[0],n={},r=[],i,s;for(i=1;i<e.length;i++){n={};for(s=0;s<e[i].length;s++){if(d(e[i][s]))throw new Error("Source data is missing a component at ("+i+","+s+")!");n[t[s]]=e[i][s]}r.push(n)}return r},r.convertColumnsToData=function(e){var t=[],n,r,i;for(n=0;n<e.length;n++){i=e[n][0];for(r=1;r<e[n].length;r++){d(t[r-1])&&(t[r-1]={});if(d(e[n][r]))throw new Error("Source data is missing a component at ("+n+","+r+")!");t[r-1][i]=e[n][r]}}return t},r.convertDataToTargets=function(e,t){var n=this,r=n.config,i=n.d3.keys(e[0]).filter(n.isNotX,n),s=n.d3.keys(e[0]).filter(n.isX,n),o;return i.forEach(function(i){var o=n.getXKey(i);n.isCustomX()||n.isTimeSeries()?s.indexOf(o)>=0?n.data.xs[i]=(t&&n.data.xs[i]?n.data.xs[i]:[]).concat(e.map(function(e){return e[o]}).filter(c).map(function(e,t){return n.generateTargetX(e,i,t)})):r.data_x?n.data.xs[i]=n.getOtherTargetXs():w(r.data_xs)&&(n.data.xs[i]=n.getXValuesOfXKey(o,n.data.targets)):n.data.xs[i]=e.map(function(e,t){return t})}),i.forEach(function(e){if(!n.data.xs[e])throw new Error('x is not defined for id = "'+e+'".')}),o=i.map(function(t,i){var s=r.data_idConverter(t);return{id:s,id_org:t,values:e.map(function(e,o){var u=n.getXKey(t),a=e[u],f=e[t]!==null&&!isNaN(e[t])?+e[t]:null,l;n.isCustomX()&&n.isCategorized()&&i===0&&!d(a)?(i===0&&o===0&&(r.axis_x_categories=[]),l=r.axis_x_categories.indexOf(a),l===-1&&(l=r.axis_x_categories.length,r.axis_x_categories.push(a))):l=n.generateTargetX(a,t,o);if(d(e[t])||n.data.xs[t].length<=o)l=undefined;return{x:l,value:f,id:s}}).filter(function(e){return v(e.x)})}}),o.forEach(function(e){var t;r.data_xSort&&(e.values=e.values.sort(function(e,t){var n=e.x||e.x===0?e.x:Infinity,r=t.x||t.x===0?t.x:Infinity;return n-r})),t=0,e.values.forEach(function(e){e.index=t++}),n.data.xs[e.id].sort(function(e,t){return e-t})}),n.hasNegativeValue=n.hasNegativeValueInTargets(o),n.hasPositiveValue=n.hasPositiveValueInTargets(o),r.data_type&&n.setTargetType(n.mapToIds(o).filter(function(e){return!(e in r.data_types)}),r.data_type),o.forEach(function(e){n.addCache(e.id_org,e)}),o},r.load=function(e,t){var n=this;e&&(t.filter&&(e=e.filter(t.filter)),(t.type||t.types)&&e.forEach(function(e){var r=t.types&&t.types[e.id]?t.types[e.id]:t.type;n.setTargetType(e.id,r)}),n.data.targets.forEach(function(t){for(var n=0;n<e.length;n++)if(t.id===e[n].id){t.values=e[n].values,e.splice(n,1);break}}),n.data.targets=n.data.targets.concat(e)),n.updateTargets(n.data.targets),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()},r.loadFromArgs=function(e){var t=this;e.data?t.load(t.convertDataToTargets(e.data),e):e.url?t.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(n){t.load(t.convertDataToTargets(n),e)}):e.json?t.load(t.convertDataToTargets(t.convertJsonToData(e.json,e.keys)),e):e.rows?t.load(t.convertDataToTargets(t.convertRowsToData(e.rows)),e):e.columns?t.load(t.convertDataToTargets(t.convertColumnsToData(e.columns)),e):t.load(null,e)},r.unload=function(e,t){var n=this;t||(t=function(){}),e=e.filter(function(e){return n.hasTarget(n.data.targets,e)});if(!e||e.length===0){t();return}n.svg.selectAll(e.map(function(e){return n.selectorTarget(e)})).transition().style("opacity",0).remove().call(n.endall,t),e.forEach(function(e){n.withoutFadeIn[e]=!1,n.legend&&n.legend.selectAll("."+l.legendItem+n.getTargetSelectorSuffix(e)).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})})},r.categoryName=function(e){var t=this.config;return e<t.axis_x_categories.length?t.axis_x_categories[e]:e},r.initEventRect=function(){var e=this;e.main.select("."+l.chart).append("g").attr("class",l.eventRects).style("fill-opacity",0)},r.redrawEventRect=function(){var e=this,t=e.config,n,r,i=e.isMultipleX(),s=e.main.select("."+l.eventRects).style("cursor",t.zoom_enabled?t.axis_rotated?"ns-resize":"ew-resize":null).classed(l.eventRectsMultiple,i).classed(l.eventRectsSingle,!i);s.selectAll("."+l.eventRect).remove(),e.eventRect=s.selectAll("."+l.eventRect),i?(n=e.eventRect.data([0]),e.generateEventRectsForMultipleXs(n.enter()),e.updateEventRect(n)):(r=e.getMaxDataCountTarget(e.data.targets),s.datum(r?r.values:[]),e.eventRect=s.selectAll("."+l.eventRect),n=e.eventRect.data(function(e){return e}),e.generateEventRectsForSingleX(n.enter()),e.updateEventRect(n),n.exit().remove())},r.updateEventRect=function(e){var t=this,n=t.config,r,i,s,o,u,a;e=e||t.eventRect.data(function(e){return e}),t.isMultipleX()?(r=0,i=0,s=t.width,o=t.height):((t.isCustomX()||t.isTimeSeries())&&!t.isCategorized()?(t.updateXs(),u=function(e){var r=t.getPrevX(e.index),i=t.getNextX(e.index);return r===null&&i===null?n.axis_rotated?t.height:t.width:(r===null&&(r=t.x.domain()[0]),i===null&&(i=t.x.domain()[1]),Math.max(0,(t.x(i)-t.x(r))/2))},a=function(e){var n=t.getPrevX(e.index),r=t.getNextX(e.index),i=t.data.xs[e.id][e.index];return n===null&&r===null?0:(n===null&&(n=t.x.domain()[0]),(t.x(i)+t.x(n))/2)}):(u=t.getEventRectWidth(),a=function(e){return t.x(e.x)-u/2}),r=n.axis_rotated?0:a,i=n.axis_rotated?a:0,s=n.axis_rotated?t.width:u,o=n.axis_rotated?u:t.height),e.attr("class",t.classEvent.bind(t)).attr("x",r).attr("y",i).attr("width",s).attr("height",o)},r.generateEventRectsForSingleX=function(e){var t=this,n=t.d3,r=t.config;e.append("rect").attr("class",t.classEvent.bind(t)).style("cursor",r.data_selection_enabled&&r.data_selection_grouped?"pointer":null).on("mouseover",function(e){var n=e.index;if(t.dragging||t.flowing)return;if(t.hasArcType())return;r.point_focus_expand_enabled&&t.expandCircles(n,null,!0),t.expandBars(n,null,!0),t.main.selectAll("."+l.shape+"-"+n).each(function(e){r.data_onmouseover.call(t.api,e)})}).on("mouseout",function(e){var n=e.index;if(!t.config)return;if(t.hasArcType())return;t.hideXGridFocus(),t.hideTooltip(),t.unexpandCircles(),t.unexpandBars(),t.main.selectAll("."+l.shape+"-"+n).each(function(e){r.data_onmouseout.call(t.api,e)})}).on("mousemove",function(e){var i,s=e.index,o=t.svg.select("."+l.eventRect+"-"+s);if(t.dragging||t.flowing)return;if(t.hasArcType())return;t.isStepType(e)&&t.config.line_step_type==="step-after"&&n.mouse(this)[0]<t.x(t.getXValue(e.id,s))&&(s-=1),i=t.filterTargetsToShow(t.data.targets).map(function(e){return t.addName(t.getValueOnIndex(e.values,s))}),r.tooltip_grouped&&(t.showTooltip(i,this),t.showXGridFocus(i));if(r.tooltip_grouped&&(!r.data_selection_enabled||r.data_selection_grouped))return;t.main.selectAll("."+l.shape+"-"+s).each(function(){n.select(this).classed(l.EXPANDED,!0),r.data_selection_enabled&&o.style("cursor",r.data_selection_grouped?"pointer":null),r.tooltip_grouped||(t.hideXGridFocus(),t.hideTooltip(),r.data_selection_grouped||(t.unexpandCircles(s),t.unexpandBars(s)))}).filter(function(e){return t.isWithinShape(this,e)}).each(function(e){r.data_selection_enabled&&(r.data_selection_grouped||r.data_selection_isselectable(e))&&o.style("cursor","pointer"),r.tooltip_grouped||(t.showTooltip([e],this),t.showXGridFocus([e]),r.point_focus_expand_enabled&&t.expandCircles(s,e.id,!0),t.expandBars(s,e.id,!0))})}).on("click",function(e){var i=e.index;if(t.hasArcType()||!t.toggleShape)return;if(t.cancelClick){t.cancelClick=!1;return}t.isStepType(e)&&r.line_step_type==="step-after"&&n.mouse(this)[0]<t.x(t.getXValue(e.id,i))&&(i-=1),t.main.selectAll("."+l.shape+"-"+i).each(function(e){if(r.data_selection_grouped||t.isWithinShape(this,e))t.toggleShape(this,e,i),t.config.data_onclick.call(t.api,e,this)})}).call(r.data_selection_draggable&&t.drag?n.behavior.drag().origin(Object).on("drag",function(){t.drag(n.mouse(this))}).on("dragstart",function(){t.dragstart(n.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})},r.generateEventRectsForMultipleXs=function(e){function i(){t.svg.select("."+l.eventRect).style("cursor",null),t.hideXGridFocus(),t.hideTooltip(),t.unexpandCircles(),t.unexpandBars()}var t=this,n=t.d3,r=t.config;e.append("rect").attr("x",0).attr("y",0).attr("width",t.width).attr("height",t.height).attr("class",l.eventRect).on("mouseout",function(){if(!t.config)return;if(t.hasArcType())return;i()}).on("mousemove",function(){var e=t.filterTargetsToShow(t.data.targets),s,o,u,a;if(t.dragging)return;if(t.hasArcType(e))return;s=n.mouse(this),o=t.findClosestFromTargets(e,s),t.mouseover&&(!o||o.id!==t.mouseover.id)&&(r.data_onmouseout.call(t.api,t.mouseover),t.mouseover=undefined);if(!o){i();return}t.isScatterType(o)||!r.tooltip_grouped?u=[o]:u=t.filterByX(e,o.x),a=u.map(function(e){return t.addName(e)}),t.showTooltip(a,this),r.point_focus_expand_enabled&&t.expandCircles(o.index,o.id,!0),t.expandBars(o.index,o.id,!0),t.showXGridFocus(a);if(t.isBarType(o.id)||t.dist(o,s)<r.point_sensitivity)t.svg.select("."+l.eventRect).style("cursor","pointer"),t.mouseover||(r.data_onmouseover.call(t.api,o),t.mouseover=o)}).on("click",function(){var e=t.filterTargetsToShow(t.data.targets),i,s;if(t.hasArcType(e))return;i=n.mouse(this),s=t.findClosestFromTargets(e,i);if(!s)return;(t.isBarType(s.id)||t.dist(s,i)<r.point_sensitivity)&&t.main.selectAll("."+l.shapes+t.getTargetSelectorSuffix(s.id)).selectAll("."+l.shape+"-"+s.index).each(function(){if(r.data_selection_grouped||t.isWithinShape(this,s))t.toggleShape(this,s,s.index),t.config.data_onclick.call(t.api,s,this)})}).call(r.data_selection_draggable&&t.drag?n.behavior.drag().origin(Object).on("drag",function(){t.drag(n.mouse(this))}).on("dragstart",function(){t.dragstart(n.mouse(this))}).on("dragend",function(){t.dragend()}):function(){})},r.dispatchEvent=function(t,n,r){var i=this,s="."+l.eventRect+(i.isMultipleX()?"":"-"+n),o=i.main.select(s).node(),u=o.getBoundingClientRect(),a=u.left+(r?r[0]:0),f=u.top+(r?r[1]:0),c=document.createEvent("MouseEvents");c.initMouseEvent(t,!0,!0,e,0,a,f,a,f,!1,!1,!1,!1,0,null),o.dispatchEvent(c)},r.getCurrentWidth=function(){var e=this,t=e.config;return t.size_width?t.size_width:e.getParentWidth()},r.getCurrentHeight=function(){var e=this,t=e.config,n=t.size_height?t.size_height:e.getParentHeight();return n>0?n:320/(e.hasType("gauge")&&!t.gauge_fullCircle?2:1)},r.getCurrentPaddingTop=function(){var e=this,t=e.config,n=c(t.padding_top)?t.padding_top:0;return e.title&&e.title.node()&&(n+=e.getTitlePadding()),n},r.getCurrentPaddingBottom=function(){var e=this.config;return c(e.padding_bottom)?e.padding_bottom:0},r.getCurrentPaddingLeft=function(e){var t=this,n=t.config;return c(n.padding_left)?n.padding_left:n.axis_rotated?n.axis_x_show?Math.max(m(t.getAxisWidthByAxisId("x",e)),40):1:!n.axis_y_show||n.axis_y_inner?t.axis.getYAxisLabelPosition().isOuter?30:1:m(t.getAxisWidthByAxisId("y",e))},r.getCurrentPaddingRight=function(){var e=this,t=e.config,n=10,r=e.isLegendRight?e.getLegendWidth()+20:0;return c(t.padding_right)?t.padding_right+1:t.axis_rotated?n+r:!t.axis_y2_show||t.axis_y2_inner?2+r+(e.axis.getY2AxisLabelPosition().isOuter?20:0):m(e.getAxisWidthByAxisId("y2"))+r},r.getParentRectValue=function(e){var t=this.selectChart.node(),n;while(t&&t.tagName!=="BODY"){try{n=t.getBoundingClientRect()[e]}catch(r){e==="width"&&(n=t.offsetWidth)}if(n)break;t=t.parentNode}return n},r.getParentWidth=function(){return this.getParentRectValue("width")},r.getParentHeight=function(){var e=this.selectChart.style("height");return e.indexOf("px")>0?+e.replace("px",""):0},r.getSvgLeft=function(e){var t=this,n=t.config,r=n.axis_rotated||!n.axis_rotated&&!n.axis_y_inner,i=n.axis_rotated?l.axisX:l.axisY,s=t.main.select("."+i).node(),o=s&&r?s.getBoundingClientRect():{right:0},u=t.selectChart.node().getBoundingClientRect(),a=t.hasArcType(),f=o.right-u.left-(a?0:t.getCurrentPaddingLeft(e));return f>0?f:0},r.getAxisWidthByAxisId=function(e,t){var n=this,r=n.axis.getLabelPositionById(e);return n.axis.getMaxTickWidth(e,t)+(r.isInner?20:40)},r.getHorizontalAxisHeight=function(e){var t=this,n=t.config,r=30;return e==="x"&&!n.axis_x_show?8:e==="x"&&n.axis_x_height?n.axis_x_height:e==="y"&&!n.axis_y_show?n.legend_show&&!t.isLegendRight&&!t.isLegendInset?10:1:e==="y2"&&!n.axis_y2_show?t.rotated_padding_top:(e==="x"&&!n.axis_rotated&&n.axis_x_tick_rotate&&(r=30+t.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-n.axis_x_tick_rotate)/180)),e==="y"&&n.axis_rotated&&n.axis_y_tick_rotate&&(r=30+t.axis.getMaxTickWidth(e)*Math.cos(Math.PI*(90-n.axis_y_tick_rotate)/180)),r+(t.axis.getLabelPositionById(e).isInner?0:10)+(e==="y2"?-10:0))},r.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},r.getShapeIndices=function(e){var t=this,n=t.config,r={},i=0,s,o;return t.filterTargetsToShow(t.data.targets.filter(e,t)).forEach(function(e){for(s=0;s<n.data_groups.length;s++){if(n.data_groups[s].indexOf(e.id)<0)continue;for(o=0;o<n.data_groups[s].length;o++)if(n.data_groups[s][o]in r){r[e.id]=r[n.data_groups[s][o]];break}}d(r[e.id])&&(r[e.id]=i++)}),r.__max__=i-1,r},r.getShapeX=function(e,t,n,r){var i=this,s=r?i.subX:i.x;return function(r){var i=r.id in n?n[r.id]:0;return r.x||r.x===0?s(r.x)-e*(t/2-i):0}},r.getShapeY=function(e){var t=this;return function(n){var r=e?t.getSubYScale(n.id):t.getYScale(n.id);return r(n.value)}},r.getShapeOffset=function(e,t,n){var r=this,i=r.orderTargets(r.filterTargetsToShow(r.data.targets.filter(e,r))),s=i.map(function(e){return e.id});return function(e,o){var u=n?r.getSubYScale(e.id):r.getYScale(e.id),a=u(0),f=a;return i.forEach(function(n){var i=r.isStepType(e)?r.convertValuesToStep(n.values):n.values;if(n.id===e.id||t[n.id]!==t[e.id])return;if(s.indexOf(n.id)<s.indexOf(e.id)){if(typeof i[o]=="undefined"||+i[o].x!==+e.x)o=-1,i.forEach(function(t,n){t.x===e.x&&(o=n)});o in i&&i[o].value*e.value>=0&&(f+=u(i[o].value)-a)}}),f}},r.isWithinShape=function(e,t){var n=this,r=n.d3.select(e),i;return n.isTargetToShow(t.id)?e.nodeName==="circle"?i=n.isStepType(t)?n.isWithinStep(e,n.getYScale(t.id)(t.value)):n.isWithinCircle(e,n.pointSelectR(t)*1.5):e.nodeName==="path"&&(i=r.classed(l.bar)?n.isWithinBar(e):!0):i=!1,i},r.getInterpolate=function(e){var t=this,n=t.isInterpolationType(t.config.spline_interpolation_type)?t.config.spline_interpolation_type:"cardinal";return t.isSplineType(e)?n:t.isStepType(e)?t.config.line_step_type:"linear"},r.initLine=function(){var e=this;e.main.select("."+l.chart).append("g").attr("class",l.chartLines)},r.updateTargetsForLine=function(e){var t=this,n=t.config,r,i,s=t.classChartLine.bind(t),o=t.classLines.bind(t),u=t.classAreas.bind(t),a=t.classCircles.bind(t),f=t.classFocus.bind(t);r=t.main.select("."+l.chartLines).selectAll("."+l.chartLine).data(e).attr("class",function(e){return s(e)+f(e)}),i=r.enter().append("g").attr("class",s).style("opacity",0).style("pointer-events","none"),i.append("g").attr("class",o),i.append("g").attr("class",u),i.append("g").attr("class",function(e){return t.generateClass(l.selectedCircles,e.id)}),i.append("g").attr("class",a).style("cursor",function(e){return n.data_selection_isselectable(e)?"pointer":null}),e.forEach(function(e){t.main.selectAll("."+l.selectedCircles+t.getTargetSelectorSuffix(e.id)).selectAll("."+l.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},r.updateLine=function(e){var t=this;t.mainLine=t.main.selectAll("."+l.lines).selectAll("."+l.line).data(t.lineData.bind(t)),t.mainLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color),t.mainLine.style("opacity",t.initialOpacity.bind(t)).style("shape-rendering",function(e){return t.isStepType(e)?"crispEdges":""}).attr("transform",null),t.mainLine.exit().transition().duration(e).style("opacity",0).remove()},r.redrawLine=function(e,t){return[(t?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",e).style("stroke",this.color).style("opacity",1)]},r.generateDrawLine=function(e,t){var n=this,r=n.config,i=n.d3.svg.line(),s=n.generateGetLinePoints(e,t),o=t?n.getSubYScale:n.getYScale,u=function(e){return(t?n.subxx:n.xx).call(n,e)},a=function(e,t){return r.data_groups.length>0?s(e,t)[0][1]:o.call(n,e.id)(e.value)};return i=r.axis_rotated?i.x(a).y(u):i.x(u).y(a),r.line_connectNull||(i=i.defined(function(e){return e.value!=null})),function(e){var s=r.line_connectNull?n.filterRemoveNull(e.values):e.values,u=t?n.x:n.subX,a=o.call(n,e.id),f=0,l=0,c;return n.isLineType(e)?r.data_regions[e.id]?c=n.lineWithRegions(s,u,a,r.data_regions[e.id]):(n.isStepType(e)&&(s=n.convertValuesToStep(s)),c=i.interpolate(n.getInterpolate(e))(s)):(s[0]&&(f=u(s[0].x),l=a(s[0].value)),c=r.axis_rotated?"M "+l+" "+f:"M "+f+" "+l),c?c:"M 0 0"}},r.generateGetLinePoints=function(e,t){var n=this,r=n.config,i=e.__max__+1,s=n.getShapeX(0,i,e,!!t),o=n.getShapeY(!!t),u=n.getShapeOffset(n.isLineType,e,!!t),a=t?n.getSubYScale:n.getYScale;return function(e,t){var i=a.call(n,e.id)(0),f=u(e,t)||i,l=s(e),c=o(e);return r.axis_rotated&&(0<e.value&&c<i||e.value<0&&i<c)&&(c=i),[[l,c-(i-f)],[l,c-(i-f)],[l,c-(i-f)],[l,c-(i-f)]]}},r.lineWithRegions=function(e,t,n,r){function T(e,t){var n;for(n=0;n<t.length;n++)if(t[n].start<e&&e<=t[n].end)return!0;return!1}function N(e){return"M"+e[0][0]+" "+e[0][1]+" "+e[1][0]+" "+e[1][1]}var i=this,s=i.config,o=-1,u,a,f="M",l,c,h,p,m,g,y,b,w=i.isCategorized()?.5:0,E,S,x=[];if(v(r))for(u=0;u<r.length;u++)x[u]={},d(r[u].start)?x[u].start=e[0].x:x[u].start=i.isTimeSeries()?i.parseDate(r[u].start):r[u].start,d(r[u].end)?x[u].end=e[e.length-1].x:x[u].end=i.isTimeSeries()?i.parseDate(r[u].end):r[u].end;E=s.axis_rotated?function(e){return n(e.value)}:function(e){return t(e.x)},S=s.axis_rotated?function(e){return t(e.x)}:function(e){return n(e.value)},i.isTimeSeries()?l=function(e,r,i,o){var u=e.x.getTime(),a=r.x-e.x,f=new Date(u+a*i),l=new Date(u+a*(i+o)),c;return s.axis_rotated?c=[[n(h(i)),t(f)],[n(h(i+o)),t(l)]]:c=[[t(f),n(h(i))],[t(l),n(h(i+o))]],N(c)}:l=function(e,r,i,o){var u;return s.axis_rotated?u=[[n(h(i),!0),t(c(i))],[n(h(i+o),!0),t(c(i+o))]]:u=[[t(c(i),!0),n(h(i))],[t(c(i+o),!0),n(h(i+o))]],N(u)};for(u=0;u<e.length;u++){if(d(x)||!T(e[u].x,x))f+=" "+E(e[u])+" "+S(e[u]);else{c=i.getScale(e[u-1].x+w,e[u].x+w,i.isTimeSeries()),h=i.getScale(e[u-1].value,e[u].value),p=t(e[u].x)-t(e[u-1].x),m=n(e[u].value)-n(e[u-1].value),g=Math.sqrt(Math.pow(p,2)+Math.pow(m,2)),y=2/g,b=y*2;for(a=y;a<=1;a+=b)f+=l(e[u-1],e[u],a,y)}o=e[u].x}return f},r.updateArea=function(e){var t=this,n=t.d3;t.mainArea=t.main.selectAll("."+l.areas).selectAll("."+l.area).data(t.lineData.bind(t)),t.mainArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+n.select(this).style("opacity"),0}),t.mainArea.style("opacity",t.orgAreaOpacity),t.mainArea.exit().transition().duration(e).style("opacity",0).remove()},r.redrawArea=function(e,t){return[(t?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},r.generateDrawArea=function(e,t){var n=this,r=n.config,i=n.d3.svg.area(),s=n.generateGetAreaPoints(e,t),o=t?n.getSubYScale:n.getYScale,u=function(e){return(t?n.subxx:n.xx).call(n,e)},a=function(e,t){return r.data_groups.length>0?s(e,t)[0][1]:o.call(n,e.id)(n.getAreaBaseValue(e.id))},f=function(e,t){return r.data_groups.length>0?s(e,t)[1][1]:o.call(n,e.id)(e.value)};return i=r.axis_rotated?i.x0(a).x1(f).y(u):i.x(u).y0(r.area_above?0:a).y1(f),r.line_connectNull||(i=i.defined(function(e){return e.value!==null})),function(e){var t=r.line_connectNull?n.filterRemoveNull(e.values):e.values,s=0,o=0,u;return n.isAreaType(e)?(n.isStepType(e)&&(t=n.convertValuesToStep(t)),u=i.interpolate(n.getInterpolate(e))(t)):(t[0]&&(s=n.x(t[0].x),o=n.getYScale(e.id)(t[0].value)),u=r.axis_rotated?"M "+o+" "+s:"M "+s+" "+o),u?u:"M 0 0"}},r.getAreaBaseValue=function(){return 0},r.generateGetAreaPoints=function(e,t){var n=this,r=n.config,i=e.__max__+1,s=n.getShapeX(0,i,e,!!t),o=n.getShapeY(!!t),u=n.getShapeOffset(n.isAreaType,e,!!t),a=t?n.getSubYScale:n.getYScale;return function(e,t){var i=a.call(n,e.id)(0),f=u(e,t)||i,l=s(e),c=o(e);return r.axis_rotated&&(0<e.value&&c<i||e.value<0&&i<c)&&(c=i),[[l,f],[l,c-(i-f)],[l,c-(i-f)],[l,f]]}},r.updateCircle=function(){var e=this;e.mainCircle=e.main.selectAll("."+l.circles).selectAll("."+l.circle).data(e.lineOrScatterData.bind(e)),e.mainCircle.enter().append("circle").attr("class",e.classCircle.bind(e)).attr("r",e.pointR.bind(e)).style("fill",e.color),e.mainCircle.style("opacity",e.initialOpacityForCircle.bind(e)),e.mainCircle.exit().remove()},r.redrawCircle=function(e,t,n){var r=this.main.selectAll("."+l.selectedCircle);return[(n?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",e).attr("cy",t),(n?r.transition(Math.random().toString()):r).attr("cx",e).attr("cy",t)]},r.circleX=function(e){return e.x||e.x===0?this.x(e.x):null},r.updateCircleY=function(){var e=this,t,n;e.config.data_groups.length>0?(t=e.getShapeIndices(e.isLineType),n=e.generateGetLinePoints(t),e.circleY=function(e,t){return n(e,t)[0][1]}):e.circleY=function(t){return e.getYScale(t.id)(t.value)}},r.getCircles=function(e,t){var n=this;return(t?n.main.selectAll("."+l.circles+n.getTargetSelectorSuffix(t)):n.main).selectAll("."+l.circle+(c(e)?"-"+e:""))},r.expandCircles=function(e,t,n){var r=this,i=r.pointExpandedR.bind(r);n&&r.unexpandCircles(),r.getCircles(e,t).classed(l.EXPANDED,!0).attr("r",i)},r.unexpandCircles=function(e){var t=this,n=t.pointR.bind(t);t.getCircles(e).filter(function(){return t.d3.select(this).classed(l.EXPANDED)}).classed(l.EXPANDED,!1).attr("r",n)},r.pointR=function(e){var t=this,n=t.config;return t.isStepType(e)?0:h(n.point_r)?n.point_r(e):n.point_r},r.pointExpandedR=function(e){var t=this,n=t.config;return n.point_focus_expand_enabled?n.point_focus_expand_r?n.point_focus_expand_r:t.pointR(e)*1.75:t.pointR(e)},r.pointSelectR=function(e){var t=this,n=t.config;return h(n.point_select_r)?n.point_select_r(e):n.point_select_r?n.point_select_r:t.pointR(e)*4},r.isWithinCircle=function(e,t){var n=this.d3,r=n.mouse(e),i=n.select(e),s=+i.attr("cx"),o=+i.attr("cy");return Math.sqrt(Math.pow(s-r[0],2)+Math.pow(o-r[1],2))<t},r.isWithinStep=function(e,t){return Math.abs(t-this.d3.mouse(e)[1])<30},r.initBar=function(){var e=this;e.main.select("."+l.chart).append("g").attr("class",l.chartBars)},r.updateTargetsForBar=function(e){var t=this,n=t.config,r,i,s=t.classChartBar.bind(t),o=t.classBars.bind(t),u=t.classFocus.bind(t);r=t.main.select("."+l.chartBars).selectAll("."+l.chartBar).data(e).attr("class",function(e){return s(e)+u(e)}),i=r.enter().append("g").attr("class",s).style("opacity",0).style("pointer-events","none"),i.append("g").attr("class",o).style("cursor",function(e){return n.data_selection_isselectable(e)?"pointer":null})},r.updateBar=function(e){var t=this,n=t.barData.bind(t),r=t.classBar.bind(t),i=t.initialOpacity.bind(t),s=function(e){return t.color(e.id)};t.mainBar=t.main.selectAll("."+l.bars).selectAll("."+l.bar).data(n),t.mainBar.enter().append("path").attr("class",r).style("stroke",s).style("fill",s),t.mainBar.style("opacity",i),t.mainBar.exit().transition().duration(e).style("opacity",0).remove()},r.redrawBar=function(e,t){return[(t?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",e).style("fill",this.color).style("opacity",1)]},r.getBarW=function(e,t){var n=this,r=n.config,i=typeof r.bar_width=="number"?r.bar_width:t?e.tickInterval()*r.bar_width_ratio/t:0;return r.bar_width_max&&i>r.bar_width_max?r.bar_width_max:i},r.getBars=function(e,t){var n=this;return(t?n.main.selectAll("."+l.bars+n.getTargetSelectorSuffix(t)):n.main).selectAll("."+l.bar+(c(e)?"-"+e:""))},r.expandBars=function(e,t,n){var r=this;n&&r.unexpandBars(),r.getBars(e,t).classed(l.EXPANDED,!0)},r.unexpandBars=function(e){var t=this;t.getBars(e).classed(l.EXPANDED,!1)},r.generateDrawBar=function(e,t){var n=this,r=n.config,i=n.generateGetBarPoints(e,t);return function(e,t){var n=i(e,t),s=r.axis_rotated?1:0,o=r.axis_rotated?0:1,u="M "+n[0][s]+","+n[0][o]+" "+"L"+n[1][s]+","+n[1][o]+" "+"L"+n[2][s]+","+n[2][o]+" "+"L"+n[3][s]+","+n[3][o]+" "+"z";return u}},r.generateGetBarPoints=function(e,t){var n=this,r=t?n.subXAxis:n.xAxis,i=e.__max__+1,s=n.getBarW(r,i),o=n.getShapeX(s,i,e,!!t),u=n.getShapeY(!!t),a=n.getShapeOffset(n.isBarType,e,!!t),f=t?n.getSubYScale:n.getYScale;return function(e,t){var r=f.call(n,e.id)(0),i=a(e,t)||r,l=o(e),c=u(e);return n.config.axis_rotated&&(0<e.value&&c<r||e.value<0&&r<c)&&(c=r),[[l,i],[l,c-(r-i)],[l+s,c-(r-i)],[l+s,i]]}},r.isWithinBar=function(e){var t=this.d3.mouse(e),n=e.getBoundingClientRect(),r=e.pathSegList.getItem(0),i=e.pathSegList.getItem(1),s=Math.min(r.x,i.x),o=Math.min(r.y,i.y),u=n.width,a=n.height,f=2,l=s-f,c=s+u+f,h=o+a+f,p=o-f;return l<t[0]&&t[0]<c&&p<t[1]&&t[1]<h},r.initText=function(){var e=this;e.main.select("."+l.chart).append("g").attr("class",l.chartTexts),e.mainText=e.d3.selectAll([])},r.updateTargetsForText=function(e){var t=this,n,r,i=t.classChartText.bind(t),s=t.classTexts.bind(t),o=t.classFocus.bind(t);n=t.main.select("."+l.chartTexts).selectAll("."+l.chartText).data(e).attr("class",function(e){return i(e)+o(e)}),r=n.enter().append("g").attr("class",i).style("opacity",0).style("pointer-events","none"),r.append("g").attr("class",s)},r.updateText=function(e){var t=this,n=t.config,r=t.barOrLineData.bind(t),i=t.classText.bind(t);t.mainText=t.main.selectAll("."+l.texts).selectAll("."+l.text).data(r),t.mainText.enter().append("text").attr("class",i).attr("text-anchor",function(e){return n.axis_rotated?e.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(e){return t.color(e)}).style("fill-opacity",0),t.mainText.text(function(e,n,r){return t.dataLabelFormat(e.id)(e.value,e.id,n,r)}),t.mainText.exit().transition().duration(e).style("fill-opacity",0).remove()},r.redrawText=function(e,t,n,r){return[(r?this.mainText.transition():this.mainText).attr("x",e).attr("y",t).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},r.getTextRect=function(e,t,n){var r=this.d3.select("body").append("div").classed("c3",!0),i=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),s=this.d3.select(n).style("font"),o;return i.selectAll(".dummy").data([e]).enter().append("text").classed(t?t:"",!0).style("font",s).text(e).each(function(){o=this.getBoundingClientRect()}),r.remove(),o},r.generateXYForText=function(e,t,n,r){var i=this,s=i.generateGetAreaPoints(e,!1),o=i.generateGetBarPoints(t,!1),u=i.generateGetLinePoints(n,!1),a=r?i.getXForText:i.getYForText;return function(e,t){var n=i.isAreaType(e)?s:i.isBarType(e)?o:u;return a.call(i,n(e,t),e,this)}},r.getXForText=function(e,t,n){var r=this,i=n.getBoundingClientRect(),s,o;return r.config.axis_rotated?(o=r.isBarType(t)?4:6,s=e[2][1]+o*(t.value<0?-1:1)):s=r.hasType("bar")?(e[2][0]+e[0][0])/2:e[0][0],t.value===null&&(s>r.width?s=r.width-i.width:s<0&&(s=4)),s},r.getYForText=function(e,t,n){var r=this,i=n.getBoundingClientRect(),s;return r.config.axis_rotated?s=(e[0][0]+e[2][0]+i.height*.6)/2:(s=e[2][1],t.value<0||t.value===0&&!r.hasPositiveValue?(s+=i.height,r.isBarType(t)&&r.isSafari()?s-=3:!r.isBarType(t)&&r.isChrome()&&(s+=3)):s+=r.isBarType(t)?-3:-6),t.value===null&&!r.config.axis_rotated&&(s<i.height?s=i.height:s>this.height&&(s=this.height-4)),s},r.setTargetType=function(e,t){var n=this,r=n.config;n.mapToTargetIds(e).forEach(function(e){n.withoutFadeIn[e]=t===r.data_types[e],r.data_types[e]=t}),e||(r.data_type=t)},r.hasType=function(e,t){var n=this,r=n.config.data_types,i=!1;return t=t||n.data.targets,t&&t.length?t.forEach(function(t){var n=r[t.id];if(n&&n.indexOf(e)>=0||!n&&e==="line")i=!0}):Object.keys(r).length?Object.keys(r).forEach(function(t){r[t]===e&&(i=!0)}):i=n.config.data_type===e,i},r.hasArcType=function(e){return this.hasType("pie",e)||this.hasType("donut",e)||this.hasType("gauge",e)},r.isLineType=function(e){var t=this.config,n=p(e)?e:e.id;return!t.data_types[n]||["line","spline","area","area-spline","step","area-step"].indexOf(t.data_types[n])>=0},r.isStepType=function(e){var t=p(e)?e:e.id;return["step","area-step"].indexOf(this.config.data_types[t])>=0},r.isSplineType=function(e){var t=p(e)?e:e.id;return["spline","area-spline"].indexOf(this.config.data_types[t])>=0},r.isAreaType=function(e){var t=p(e)?e:e.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[t])>=0},r.isBarType=function(e){var t=p(e)?e:e.id;return this.config.data_types[t]==="bar"},r.isScatterType=function(e){var t=p(e)?e:e.id;return this.config.data_types[t]==="scatter"},r.isPieType=function(e){var t=p(e)?e:e.id;return this.config.data_types[t]==="pie"},r.isGaugeType=function(e){var t=p(e)?e:e.id;return this.config.data_types[t]==="gauge"},r.isDonutType=function(e){var t=p(e)?e:e.id;return this.config.data_types[t]==="donut"},r.isArcType=function(e){return this.isPieType(e)||this.isDonutType(e)||this.isGaugeType(e)},r.lineData=function(e){return this.isLineType(e)?[e]:[]},r.arcData=function(e){return this.isArcType(e.data)?[e]:[]},r.barData=function(e){return this.isBarType(e)?e.values:[]},r.lineOrScatterData=function(e){return this.isLineType(e)||this.isScatterType(e)?e.values:[]},r.barOrLineData=function(e){return this.isBarType(e)||this.isLineType(e)?e.values:[]},r.isInterpolationType=function(e){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(e)>=0},r.initGrid=function(){var e=this,t=e.config,n=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",l.grid),t.grid_x_show&&e.grid.append("g").attr("class",l.xgrids),t.grid_y_show&&e.grid.append("g").attr("class",l.ygrids),t.grid_focus_show&&e.grid.append("g").attr("class",l.xgridFocus).append("line").attr("class",l.xgridFocus),e.xgrid=n.selectAll([]),t.grid_lines_front||e.initGridLines()},r.initGridLines=function(){var e=this,t=e.d3;e.gridLines=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",l.grid+" "+l.gridLines),e.gridLines.append("g").attr("class",l.xgridLines),e.gridLines.append("g").attr("class",l.ygridLines),e.xgridLines=t.selectAll([])},r.updateXGrid=function(e){var t=this,n=t.config,r=t.d3,i=t.generateGridData(n.grid_x_type,t.x),s=t.isCategorized()?t.xAxis.tickOffset():0;t.xgridAttr=n.axis_rotated?{x1:0,x2:t.width,y1:function(e){return t.x(e)-s},y2:function(e){return t.x(e)-s}}:{x1:function(e){return t.x(e)+s},x2:function(e){return t.x(e)+s},y1:0,y2:t.height},t.xgrid=t.main.select("."+l.xgrids).selectAll("."+l.xgrid).data(i),t.xgrid.enter().append("line").attr("class",l.xgrid),e||t.xgrid.attr(t.xgridAttr).style("opacity",function(){return+r.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?t.height:0)?0:1}),t.xgrid.exit().remove()},r.updateYGrid=function(){var e=this,t=e.config,n=e.yAxis.tickValues()||e.y.ticks(t.grid_y_ticks);e.ygrid=e.main.select("."+l.ygrids).selectAll("."+l.ygrid).data(n),e.ygrid.enter().append("line").attr("class",l.ygrid),e.ygrid.attr("x1",t.axis_rotated?e.y:0).attr("x2",t.axis_rotated?e.y:e.width).attr("y1",t.axis_rotated?0:e.y).attr("y2",t.axis_rotated?e.height:e.y),e.ygrid.exit().remove(),e.smoothLines(e.ygrid,"grid")},r.gridTextAnchor=function(e){return e.position?e.position:"end"},r.gridTextDx=function(e){return e.position==="start"?4:e.position==="middle"?0:-4},r.xGridTextX=function(e){return e.position==="start"?-this.height:e.position==="middle"?-this.height/2:0},r.yGridTextX=function(e){return e.position==="start"?0:e.position==="middle"?this.width/2:this.width},r.updateGrid=function(e){var t=this,n=t.main,r=t.config,i,s,o;t.grid.style("visibility",t.hasArcType()?"hidden":"visible"),n.select("line."+l.xgridFocus).style("visibility","hidden"),r.grid_x_show&&t.updateXGrid(),t.xgridLines=n.select("."+l.xgridLines).selectAll("."+l.xgridLine).data(r.grid_x_lines),i=t.xgridLines.enter().append("g").attr("class",function(e){return l.xgridLine+(e["class"]?" "+e["class"]:"")}),i.append("line").style("opacity",0),i.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",r.axis_rotated?"":"rotate(-90)").attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0),t.xgridLines.exit().transition().duration(e).style("opacity",0).remove(),r.grid_y_show&&t.updateYGrid(),t.ygridLines=n.select("."+l.ygridLines).selectAll("."+l.ygridLine).data(r.grid_y_lines),s=t.ygridLines.enter().append("g").attr("class",function(e){return l.ygridLine+(e["class"]?" "+e["class"]:"")}),s.append("line").style("opacity",0),s.append("text").attr("text-anchor",t.gridTextAnchor).attr("transform",r.axis_rotated?"rotate(-90)":"").attr("dx",t.gridTextDx).attr("dy",-5).style("opacity",0),o=t.yv.bind(t),t.ygridLines.select("line").transition().duration(e).attr("x1",r.axis_rotated?o:0).attr("x2",r.axis_rotated?o:t.width).attr("y1",r.axis_rotated?0:o).attr("y2",r.axis_rotated?t.height:o).style("opacity",1),t.ygridLines.select("text").transition().duration(e).attr("x",r.axis_rotated?t.xGridTextX.bind(t):t.yGridTextX.bind(t)).attr("y",o).text(function(e){return e.text}).style("opacity",1),t.ygridLines.exit().transition().duration(e).style("opacity",0).remove()},r.redrawGrid=function(e){var t=this,n=t.config,r=t.xv.bind(t),i=t.xgridLines.select("line"),s=t.xgridLines.select("text");return[(e?i.transition():i).attr("x1",n.axis_rotated?0:r).attr("x2",n.axis_rotated?t.width:r).attr("y1",n.axis_rotated?r:0).attr("y2",n.axis_rotated?r:t.height).style("opacity",1),(e?s.transition():s).attr("x",n.axis_rotated?t.yGridTextX.bind(t):t.xGridTextX.bind(t)).attr("y",r).text(function(e){return e.text}).style("opacity",1)]},r.showXGridFocus=function(e){var t=this,n=t.config,r=e.filter(function(e){return e&&c(e.value)}),i=t.main.selectAll("line."+l.xgridFocus),s=t.xx.bind(t);if(!n.tooltip_show)return;if(t.hasType("scatter")||t.hasArcType())return;i.style("visibility","visible").data([r[0]]).attr(n.axis_rotated?"y1":"x1",s).attr(n.axis_rotated?"y2":"x2",s),t.smoothLines(i,"grid")},r.hideXGridFocus=function(){this.main.select("line."+l.xgridFocus).style("visibility","hidden")},r.updateXgridFocus=function(){var e=this,t=e.config;e.main.select("line."+l.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?e.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:e.height)},r.generateGridData=function(e,t){var n=this,r=[],i,s,o,u,a=n.main.select("."+l.axisX).selectAll(".tick").size();if(e==="year"){i=n.getXDomain(),s=i[0].getFullYear(),o=i[1].getFullYear();for(u=s;u<=o;u++)r.push(new Date(u+"-01-01 00:00:00"))}else r=t.ticks(10),r.length>a&&(r=r.filter(function(e){return(""+e).indexOf(".")<0}));return r},r.getGridFilterToRemove=function(e){return e?function(t){var n=!1;return[].concat(e).forEach(function(e){if("value"in e&&t.value===e.value||"class"in e&&t["class"]===e["class"])n=!0}),n}:function(){return!0}},r.removeGridLines=function(e,t){var n=this,r=n.config,i=n.getGridFilterToRemove(e),s=function(e){return!i(e)},o=t?l.xgridLines:l.ygridLines,u=t?l.xgridLine:l.ygridLine;n.main.select("."+o).selectAll("."+u).filter(i).transition().duration(r.transition_duration).style("opacity",0).remove(),t?r.grid_x_lines=r.grid_x_lines.filter(s):r.grid_y_lines=r.grid_y_lines.filter(s)},r.initTooltip=function(){var e=this,t=e.config,n;e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",l.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none");if(t.tooltip_init_show){if(e.isTimeSeries()&&p(t.tooltip_init_x)){t.tooltip_init_x=e.parseDate(t.tooltip_init_x);for(n=0;n<e.data.targets[0].values.length;n++)if(e.data.targets[0].values[n].x-t.tooltip_init_x===0)break;t.tooltip_init_x=n}e.tooltip.html(t.tooltip_contents.call(e,e.data.targets.map(function(n){return e.addName(n.values[t.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",t.tooltip_init_position.top).style("left",t.tooltip_init_position.left).style("display","block")}},r.getTooltipContent=function(e,t,n,r){var i=this,s=i.config,o=s.tooltip_format_title||t,u=s.tooltip_format_name||function(e){return e},a=s.tooltip_format_value||n,f,l,c,h,p,d,v=i.isOrderAsc();if(s.data_groups.length===0)e.sort(function(e,t){var n=e?e.value:null,r=t?t.value:null;return v?n-r:r-n});else{var m=i.orderTargets(i.data.targets).map(function(e){return e.id});e.sort(function(e,t){var n=e?e.value:null,r=t?t.value:null;return n>0&&r>0&&(n=e?m.indexOf(e.id):null,r=t?m.indexOf(t.id):null),v?n-r:r-n})}for(l=0;l<e.length;l++){if(!e[l]||!e[l].value&&e[l].value!==0)continue;f||(c=x(o?o(e[l].x):e[l].x),f="<table class='"+i.CLASS.tooltip+"'>"+(c||c===0?"<tr><th colspan='2'>"+c+"</th></tr>":"")),h=x(a(e[l].value,e[l].ratio,e[l].id,e[l].index,e));if(h!==undefined){if(e[l].name===null)continue;p=x(u(e[l].name,e[l].ratio,e[l].id,e[l].index)),d=i.levelColor?i.levelColor(e[l].value):r(e[l].id),f+="<tr class='"+i.CLASS.tooltipName+"-"+i.getTargetSelectorSuffix(e[l].id)+"'>",f+="<td class='name'><span style='background-color:"+d+"'></span>"+p+"</td>",f+="<td class='value'>"+h+"</td>",f+="</tr>"}}return f+"</table>"},r.tooltipPosition=function(e,t,n,r){var i=this,s=i.config,o=i.d3,u,a,f,l,c,h=i.hasArcType(),p=o.mouse(r);return h?(a=(i.width-(i.isLegendRight?i.getLegendWidth():0))/2+p[0],l=i.height/2+p[1]+20):(u=i.getSvgLeft(!0),s.axis_rotated?(a=u+p[0]+100,f=a+t,c=i.currentWidth-i.getCurrentPaddingRight(),l=i.x(e[0].x)+20):(a=u+i.getCurrentPaddingLeft(!0)+i.x(e[0].x)+20,f=a+t,c=u+i.currentWidth-i.getCurrentPaddingRight(),l=p[1]+15),f>c&&(a-=f-c+20),l+n>i.currentHeight&&(l-=n+30)),l<0&&(l=0),{top:l,left:a}},r.showTooltip=function(e,t){var n=this,i=n.config,s,o,u,a=n.hasArcType(),f=e.filter(function(e){return e&&c(e.value)}),l=i.tooltip_position||r.tooltipPosition;if(f.length===0||!i.tooltip_show)return;n.tooltip.html(i.tooltip_contents.call(n,e,n.axis.getXAxisTickFormat(),n.getYFormat(a),n.color)).style("display","block"),s=n.tooltip.property("offsetWidth"),o=n.tooltip.property("offsetHeight"),u=l.call(this,f,s,o,t),n.tooltip.style("top",u.top+"px").style("left",u.left+"px")},r.hideTooltip=function(){this.tooltip.style("display","none")},r.initLegend=function(){var e=this;e.legendItemTextBox={},e.legendHasRendered=!1,e.legend=e.svg.append("g").attr("transform",e.getTranslate("legend"));if(!e.config.legend_show){e.legend.style("visibility","hidden"),e.hiddenLegendIds=e.mapToIds(e.data.targets);return}e.updateLegendWithDefaults()},r.updateLegendWithDefaults=function(){var e=this;e.updateLegend(e.mapToIds(e.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},r.updateSizeForLegend=function(e,t){var n=this,r=n.config,i={top:n.isLegendTop?n.getCurrentPaddingTop()+r.legend_inset_y+5.5:n.currentHeight-e-n.getCurrentPaddingBottom()-r.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+r.legend_inset_x+.5:n.currentWidth-t-n.getCurrentPaddingRight()-r.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?i.top:n.currentHeight-e,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-t:n.isLegendInset?i.left:0}},r.transformLegend=function(e){var t=this;(e?t.legend.transition():t.legend).attr("transform",t.getTranslate("legend"))},r.updateLegendStep=function(e){this.legendStep=e},r.updateLegendItemWidth=function(e){this.legendItemWidth=e},r.updateLegendItemHeight=function(e){this.legendItemHeight=e},r.getLegendWidth=function(){var e=this;return e.config.legend_show?e.isLegendRight||e.isLegendInset?e.legendItemWidth*(e.legendStep+1):e.currentWidth:0},r.getLegendHeight=function(){var e=this,t=0;return e.config.legend_show&&(e.isLegendRight?t=e.currentHeight:t=Math.max(20,e.legendItemHeight)*(e.legendStep+1)),t},r.opacityForLegend=function(e){return e.classed(l.legendItemHidden)?null:1},r.opacityForUnfocusedLegend=function(e){return e.classed(l.legendItemHidden)?null:.3},r.toggleFocusLegend=function(e,t){var n=this;e=n.mapToTargetIds(e),n.legend.selectAll("."+l.legendItem).filter(function(t){return e.indexOf(t)>=0}).classed(l.legendItemFocused,t).transition().duration(100).style("opacity",function(){var e=t?n.opacityForLegend:n.opacityForUnfocusedLegend;return e.call(n,n.d3.select(this))})},r.revertLegend=function(){var e=this,t=e.d3;e.legend.selectAll("."+l.legendItem).classed(l.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return e.opacityForLegend(t.select(this))})},r.showLegend=function(e){var t=this,n=t.config;n.legend_show||(n.legend_show=!0,t.legend.style("visibility","visible"),t.legendHasRendered||t.updateLegendWithDefaults()),t.removeHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("visibility","visible").transition().style("opacity",function(){return t.opacityForLegend(t.d3.select(this))})},r.hideLegend=function(e){var t=this,n=t.config;n.legend_show&&b(e)&&(n.legend_show=!1,t.legend.style("visibility","hidden")),t.addHiddenLegendIds(e),t.legend.selectAll(t.selectorLegends(e)).style("opacity",0).style("visibility","hidden")},r.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},r.updateLegend=function(e,t,n){function j(e,t){return r.legendItemTextBox[t]||(r.legendItemTextBox[t]=r.getTextRect(e.textContent,l.legendItem,e)),r.legendItemTextBox[t]}function F(t,n,s){function v(e,t){t||(p=(h-T-c)/2,p<w&&(p=(h-c)/2,T=0,O++)),A[e]=O,L[O]=r.isLegendInset?10:p,N[e]=T,T+=c}var o=s===0,u=s===e.length-1,a=j(t,n),f=a.width+S+(u&&!r.isLegendRight&&!r.isLegendInset?0:g)+i.legend_padding,l=a.height+m,c=r.isLegendRight||r.isLegendInset?l:f,h=r.isLegendRight||r.isLegendInset?r.getLegendHeight():r.getLegendWidth(),p,d;o&&(T=0,O=0,y=0,b=0);if(i.legend_show&&!r.isLegendToShow(n)){C[n]=k[n]=A[n]=N[n]=0;return}C[n]=f,k[n]=l;if(!y||f>=y)y=f;if(!b||l>=b)b=l;d=r.isLegendRight||r.isLegendInset?b:y,i.legend_equally?(Object.keys(C).forEach(function(e){C[e]=y}),Object.keys(k).forEach(function(e){k[e]=b}),p=(h-d*e.length)/2,p<w?(T=0,O=0,e.forEach(function(e){v(e)})):v(n,!0)):v(n)}var r=this,i=r.config,s,o,u,a,f,c,h,p,d,m=4,g=10,y=0,b=0,w=10,S=i.legend_item_tile_width+5,x,T=0,N={},C={},k={},L=[0],A={},O=0,M,_,D,P,H,B;e=e.filter(function(e){return!v(i.data_names[e])||i.data_names[e]!==null}),t=t||{},M=E(t,"withTransition",!0),_=E(t,"withTransitionForTransform",!0),r.isLegendInset&&(O=i.legend_inset_step?i.legend_inset_step:e.length,r.updateLegendStep(O)),r.isLegendRight?(s=function(e){return y*A[e]},a=function(e){return L[A[e]]+N[e]}):r.isLegendInset?(s=function(e){return y*A[e]+10},a=function(e){return L[A[e]]+N[e]}):(s=function(e){return L[A[e]]+N[e]},a=function(e){return b*A[e]}),o=function(e,t){return s(e,t)+4+i.legend_item_tile_width},f=function(e,t){return a(e,t)+9},u=function(e,t){return s(e,t)},c=function(e,t){return a(e,t)-5},h=function(e,t){return s(e,t)-2},p=function(e,t){return s(e,t)-2+i.legend_item_tile_width},d=function(e,t){return a(e,t)+4},x=r.legend.selectAll("."+l.legendItem).data(e).enter().append("g").attr("class",function(e){return r.generateClass(l.legendItem,e)}).style("visibility",function(e){return r.isLegendToShow(e)?"visible":"hidden"}).style("cursor","pointer").on("click",function(e){i.legend_item_onclick?i.legend_item_onclick.call(r,e):r.d3.event.altKey?(r.api.hide(),r.api.show(e)):(r.api.toggle(e),r.isTargetToShow(e)?r.api.focus(e):r.api.revert())}).on("mouseover",function(e){i.legend_item_onmouseover?i.legend_item_onmouseover.call(r,e):(r.d3.select(this).classed(l.legendItemFocused,!0),!r.transiting&&r.isTargetToShow(e)&&r.api.focus(e))}).on("mouseout",function(e){i.legend_item_onmouseout?i.legend_item_onmouseout.call(r,e):(r.d3.select(this).classed(l.legendItemFocused,!1),r.api.revert())}),x.append("text").text(function(e){return v(i.data_names[e])?i.data_names[e]:e}).each(function(e,t){F(this,e,t)}).style("pointer-events","none").attr("x",r.isLegendRight||r.isLegendInset?o:-200).attr("y",r.isLegendRight||r.isLegendInset?-200:f),x.append("rect").attr("class",l.legendItemEvent).style("fill-opacity",0).attr("x",r.isLegendRight||r.isLegendInset?u:-200).attr("y",r.isLegendRight||r.isLegendInset?-200:c),x.append("line").attr("class",l.legendItemTile).style("stroke",r.color).style("pointer-events","none").attr("x1",r.isLegendRight||r.isLegendInset?h:-200).attr("y1",r.isLegendRight||r.isLegendInset?-200:d).attr("x2",r.isLegendRight||r.isLegendInset?p:-200).attr("y2",r.isLegendRight||r.isLegendInset?-200:d).attr("stroke-width",i.legend_item_tile_height),B=r.legend.select("."+l.legendBackground+" rect"),r.isLegendInset&&y>0&&B.size()===0&&(B=r.legend.insert("g","."+l.legendItem).attr("class",l.legendBackground).append("rect")),D=r.legend.selectAll("text").data(e).text(function(e){return v(i.data_names[e])?i.data_names[e]:e}).each(function(e,t){F(this,e,t)}),(M?D.transition():D).attr("x",o).attr("y",f),P=r.legend.selectAll("rect."+l.legendItemEvent).data(e),(M?P.transition():P).attr("width",function(e){return C[e]}).attr("height",function(e){return k[e]}).attr("x",u).attr("y",c),H=r.legend.selectAll("line."+l.legendItemTile).data(e),(M?H.transition():H).style("stroke",r.color).attr("x1",h).attr("y1",d).attr("x2",p).attr("y2",d),B&&(M?B.transition():B).attr("height",r.getLegendHeight()-12).attr("width",y*(O+1)+10),r.legend.selectAll("."+l.legendItem).classed(l.legendItemHidden,function(e){return!r.isTargetToShow(e)}),r.updateLegendItemWidth(y),r.updateLegendItemHeight(b),r.updateLegendStep(O),r.updateSizes(),r.updateScales(),r.updateSvgSize(),r.transformAll(_,n),r.legendHasRendered=!0},r.initTitle=function(){var e=this;e.title=e.svg.append("text").text(e.config.title_text).attr("class",e.CLASS.title)},r.redrawTitle=function(){var e=this;e.title.attr("x",e.xForTitle.bind(e)).attr("y",e.yForTitle.bind(e))},r.xForTitle=function(){var e=this,t=e.config,n=t.title_position||"left",r;return n.indexOf("right")>=0?r=e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width-t.title_padding.right:n.indexOf("center")>=0?r=(e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width)/2:r=t.title_padding.left,r},r.yForTitle=function(){var e=this;return e.config.title_padding.top+e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).height},r.getTitlePadding=function(){var e=this;return e.yForTitle()+e.config.title_padding.bottom},o(s,f),f.prototype.init=function(){var t=this.owner,n=t.config,r=t.main;t.axes.x=r.append("g").attr("class",l.axis+" "+l.axisX).attr("clip-path",t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",n.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",l.axisXLabel).attr("transform",n.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=r.append("g").attr("class",l.axis+" "+l.axisY).attr("clip-path",n.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",n.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",l.axisYLabel).attr("transform",n.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=r.append("g").attr("class",l.axis+" "+l.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",n.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",l.axisY2Label).attr("transform",n.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},f.prototype.getXAxis=function(t,n,r,i,s,o,u){var a=this.owner,f=a.config,l={isCategory:a.isCategorized(),withOuterTick:s,tickMultiline:f.axis_x_tick_multiline,tickWidth:f.axis_x_tick_width,tickTextRotate:u?0:f.axis_x_tick_rotate,withoutTransition:o},c=C(a.d3,l).scale(t).orient(n);return a.isTimeSeries()&&i&&typeof i!="function"&&(i=i.map(function(e){return a.parseDate(e)})),c.tickFormat(r).tickValues(i),a.isCategorized()&&(c.tickCentered(f.axis_x_tick_centered),b(f.axis_x_tick_culling)&&(f.axis_x_tick_culling=!1)),c},f.prototype.updateXAxisTickValues=function(t,n){var r=this.owner,i=r.config,s;if(i.axis_x_tick_fit||i.axis_x_tick_count)s=this.generateTickValues(r.mapTargetsToUniqueXs(t),i.axis_x_tick_count,r.isTimeSeries());return n?n.tickValues(s):(r.xAxis.tickValues(s),r.subXAxis.tickValues(s)),s},f.prototype.getYAxis=function(t,n,r,i,s,o,u){var a=this.owner,f=a.config,l={withOuterTick:s,withoutTransition:o,tickTextRotate:u?0:f.axis_y_tick_rotate},c=C(a.d3,l).scale(t).orient(n).tickFormat(r);return a.isTimeSeriesY()?c.ticks(a.d3.time[f.axis_y_tick_time_value],f.axis_y_tick_time_interval):c.tickValues(i),c},f.prototype.getId=function(t){var n=this.owner.config;return t in n.data_axes?n.data_axes[t]:"y"},f.prototype.getXAxisTickFormat=function(){var t=this.owner,n=t.config,r=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(e){return e<0?e.toFixed(0):e};return n.axis_x_tick_format&&(h(n.axis_x_tick_format)?r=n.axis_x_tick_format:t.isTimeSeries()&&(r=function(e){return e?t.axisTimeFormat(n.axis_x_tick_format)(e):""})),h(r)?function(e){return r.call(t,e)}:r},f.prototype.getTickValues=function(t,n){return t?t:n?n.tickValues():undefined},f.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},f.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},f.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},f.prototype.getLabelOptionByAxisId=function(t){var n=this.owner,r=n.config,i;return t==="y"?i=r.axis_y_label:t==="y2"?i=r.axis_y2_label:t==="x"&&(i=r.axis_x_label),i},f.prototype.getLabelText=function(t){var n=this.getLabelOptionByAxisId(t);return p(n)?n:n?n.text:null},f.prototype.setLabelText=function(t,n){var r=this.owner,i=r.config,s=this.getLabelOptionByAxisId(t);p(s)?t==="y"?i.axis_y_label=n:t==="y2"?i.axis_y2_label=n:t==="x"&&(i.axis_x_label=n):s&&(s.text=n)},f.prototype.getLabelPosition=function(t,n){var r=this.getLabelOptionByAxisId(t),i=r&&typeof r=="object"&&r.position?r.position:n;return{isInner:i.indexOf("inner")>=0,isOuter:i.indexOf("outer")>=0,isLeft:i.indexOf("left")>=0,isCenter:i.indexOf("center")>=0,isRight:i.indexOf("right")>=0,isTop:i.indexOf("top")>=0,isMiddle:i.indexOf("middle")>=0,isBottom:i.indexOf("bottom")>=0}},f.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},f.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getLabelPositionById=function(t){return t==="y2"?this.getY2AxisLabelPosition():t==="y"?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},f.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},f.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},f.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},f.prototype.xForAxisLabel=function(t,n){var r=this.owner;return t?n.isLeft?0:n.isCenter?r.width/2:r.width:n.isBottom?-r.height:n.isMiddle?-r.height/2:0},f.prototype.dxForAxisLabel=function(t,n){return t?n.isLeft?"0.5em":n.isRight?"-0.5em":"0":n.isTop?"-0.5em":n.isBottom?"0.5em":"0"},f.prototype.textAnchorForAxisLabel=function(t,n){return t?n.isLeft?"start":n.isCenter?"middle":"end":n.isBottom?"start":n.isMiddle?"middle":"end"},f.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dyForXAxisLabel=function(){var t=this.owner,n=t.config,r=this.getXAxisLabelPosition();return n.axis_rotated?r.isInner?"1.2em":-25-this.getMaxTickWidth("x"):r.isInner?"-0.5em":n.axis_x_height?n.axis_x_height-10:"3em"},f.prototype.dyForYAxisLabel=function(){var t=this.owner,n=this.getYAxisLabelPosition();return t.config.axis_rotated?n.isInner?"-0.5em":"3em":n.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},f.prototype.dyForY2AxisLabel=function(){var t=this.owner,n=this.getY2AxisLabelPosition();return t.config.axis_rotated?n.isInner?"1.2em":"-2.2em":n.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},f.prototype.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.getMaxTickWidth=function(t,n){var r=this.owner,i=r.config,s=0,o,u,a,f,l;return n&&r.currentMaxTickWidths[t]?r.currentMaxTickWidths[t]:(r.svg&&(o=r.filterTargetsToShow(r.data.targets),t==="y"?(u=r.y.copy().domain(r.getYDomain(o,"y")),a=this.getYAxis(u,r.yOrient,i.axis_y_tick_format,r.yAxisTickValues,!1,!0,!0)):t==="y2"?(u=r.y2.copy().domain(r.getYDomain(o,"y2")),a=this.getYAxis(u,r.y2Orient,i.axis_y2_tick_format,r.y2AxisTickValues,!1,!0,!0)):(u=r.x.copy().domain(r.getXDomain(o)),a=this.getXAxis(u,r.xOrient,r.xAxisTickFormat,r.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(o,a)),f=r.d3.select("body").append("div").classed("c3",!0),l=f.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),l.append("g").call(a).each(function(){r.d3.select(this).selectAll("text").each(function(){var e=this.getBoundingClientRect();s<e.width&&(s=e.width)}),f.remove()})),r.currentMaxTickWidths[t]=s<=0?r.currentMaxTickWidths[t]:s,r.currentMaxTickWidths[t])},f.prototype.updateLabels=function(t){var n=this.owner,r=n.main.select("."+l.axisX+" ."+l.axisXLabel),i=n.main.select("."+l.axisY+" ."+l.axisYLabel),s=n.main.select("."+l.axisY2+" ."+l.axisY2Label);(t?r.transition():r).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?s.transition():s).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},f.prototype.getPadding=function(t,n,r,i){var s=typeof t=="number"?t:t[n];return c(s)?t.unit==="ratio"?t[n]*i:this.convertPixelsToAxisPadding(s,i):r},f.prototype.convertPixelsToAxisPadding=function(t,n){var r=this.owner,i=r.config.axis_rotated?r.width:r.height;return n*(t/i)},f.prototype.generateTickValues=function(t,n,r){var i=t,s,o,u,a,f,l,c;if(n){s=h(n)?n():n;if(s===1)i=[t[0]];else if(s===2)i=[t[0],t[t.length-1]];else if(s>2){a=s-2,o=t[0],u=t[t.length-1],f=(u-o)/(a+1),i=[o];for(l=0;l<a;l++)c=+o+f*(l+1),i.push(r?new Date(c):c);i.push(u)}}return r||(i=i.sort(function(e,t){return e-t})),i},f.prototype.generateTransitions=function(t){var n=this.owner,r=n.axes;return{axisX:t?r.x.transition().duration(t):r.x,axisY:t?r.y.transition().duration(t):r.y,axisY2:t?r.y2.transition().duration(t):r.y2,axisSubX:t?r.subx.transition().duration(t):r.subx}},f.prototype.redraw=function(t,n){var r=this.owner;r.axes.x.style("opacity",n?0:1),r.axes.y.style("opacity",n?0:1),r.axes.y2.style("opacity",n?0:1),r.axes.subx.style("opacity",n?0:1),t.axisX.call(r.xAxis),t.axisY.call(r.yAxis),t.axisY2.call(r.y2Axis),t.axisSubX.call(r.subXAxis)},r.getClipPath=function(t){var n=e.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(n?"":document.URL.split("#")[0])+"#"+t+")"},r.appendClip=function(e,t){return e.append("clipPath").attr("id",t).append("rect")},r.getAxisClipX=function(e){var t=Math.max(30,this.margin.left);return e?-(1+t):-(t-1)},r.getAxisClipY=function(e){return e?-20:-this.margin.top},r.getXAxisClipX=function(){var e=this;return e.getAxisClipX(!e.config.axis_rotated)},r.getXAxisClipY=function(){var e=this;return e.getAxisClipY(!e.config.axis_rotated)},r.getYAxisClipX=function(){var e=this;return e.config.axis_y_inner?-1:e.getAxisClipX(e.config.axis_rotated)},r.getYAxisClipY=function(){var e=this;return e.getAxisClipY(e.config.axis_rotated)},r.getAxisClipWidth=function(e){var t=this,n=Math.max(30,t.margin.left),r=Math.max(30,t.margin.right);return e?t.width+2+n+r:t.margin.left+20},r.getAxisClipHeight=function(e){return(e?this.margin.bottom:this.margin.top+this.height)+20},r.getXAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(!e.config.axis_rotated)},r.getXAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(!e.config.axis_rotated)},r.getYAxisClipWidth=function(){var e=this;return e.getAxisClipWidth(e.config.axis_rotated)+(e.config.axis_y_inner?20:0)},r.getYAxisClipHeight=function(){var e=this;return e.getAxisClipHeight(e.config.axis_rotated)},r.initPie=function(){var e=this,t=e.d3,n=e.config;e.pie=t.layout.pie().value(function(e){return e.values.reduce(function(e,t){return e+t.value},0)}),n.data_order||e.pie.sort(null)},r.updateRadius=function(){var e=this,t=e.config,n=t.gauge_width||t.donut_width;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2,e.radius=e.radiusExpanded*.95,e.innerRadiusRatio=n?(e.radius-n)/e.radius:.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0},r.updateArc=function(){var e=this;e.svgArc=e.getSvgArc(),e.svgArcExpanded=e.getSvgArcExpanded(),e.svgArcExpandedSub=e.getSvgArcExpanded(.98)},r.updateAngle=function(e){var t=this,n=t.config,r=!1,i=0,s,o,u,a;return n?(t.pie(t.filterTargetsToShow(t.data.targets)).forEach(function(t){!r&&t.data.id===e.data.id&&(r=!0,e=t,e.index=i),i++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),t.isGaugeType(e.data)&&(s=n.gauge_min,o=n.gauge_max,u=Math.PI*(n.gauge_fullCircle?2:1)/(o-s),a=e.value<s?0:e.value<o?e.value-s:o-s,e.startAngle=n.gauge_startingAngle,e.endAngle=e.startAngle+u*a),r?e:null):null},r.getSvgArc=function(){var e=this,t=e.d3.svg.arc().outerRadius(e.radius).innerRadius(e.innerRadius),n=function(n,r){var i;return r?t(n):(i=e.updateAngle(n),i?t(i):"M 0 0")};return n.centroid=t.centroid,n},r.getSvgArcExpanded=function(e){var t=this,n=t.d3.svg.arc().outerRadius(t.radiusExpanded*(e?e:1)).innerRadius(t.innerRadius);return function(e){var r=t.updateAngle(e);return r?n(r):"M 0 0"}},r.getArc=function(e,t,n){return n||this.isArcType(e.data)?this.svgArc(e,t):"M 0 0"},r.transformForArcLabel=function(e){var t=this,n=t.config,r=t.updateAngle(e),i,s,o,u,a,f="";return r&&!t.hasType("gauge")&&(i=this.svgArc.centroid(r),s=isNaN(i[0])?0:i[0],o=isNaN(i[1])?0:i[1],u=Math.sqrt(s*s+o*o),t.hasType("donut")&&n.donut_label_ratio?a=h(n.donut_label_ratio)?n.donut_label_ratio(e,t.radius,u):n.donut_label_ratio:t.hasType("pie")&&n.pie_label_ratio?a=h(n.pie_label_ratio)?n.pie_label_ratio(e,t.radius,u):n.pie_label_ratio:a=t.radius&&u?(36/t.radius>.375?1.175-36/t.radius:.8)*t.radius/u:0,f="translate("+s*a+","+o*a+")"),f},r.getArcRatio=function(e){var t=this,n=t.config,r=Math.PI*(t.hasType("gauge")&&!n.gauge_fullCircle?1:2);return e?(e.endAngle-e.startAngle)/r:null},r.convertToArcData=function(e){return this.addName({id:e.data.id,value:e.value,ratio:this.getArcRatio(e),index:e.index})},r.textForArcLabel=function(e){var t=this,n,r,i,s,o;return t.shouldShowArcLabel()?(n=t.updateAngle(e),r=n?n.value:null,i=t.getArcRatio(n),s=e.data.id,!t.hasType("gauge")&&!t.meetsArcLabelThreshold(i)?"":(o=t.getArcLabelFormat(),o?o(r,i,s):t.defaultArcValueFormat(r,i))):""},r.expandArc=function(t){var n=this,r;if(n.transiting){r=e.setInterval(function(){n.transiting||(e.clearInterval(r),n.legend.selectAll(".c3-legend-item-focused").size()>0&&n.expandArc(t))},10);return}t=n.mapToTargetIds(t),n.svg.selectAll(n.selectorTargets(t,"."+l.chartArc)).each(function(e){if(!n.shouldExpand(e.data.id))return;n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(e.data.id)).attr("d",n.svgArcExpanded).transition().duration(n.expandDuration(e.data.id)*2).attr("d",n.svgArcExpandedSub).each(function(e){n.isDonutType(e.data)})})},r.unexpandArc=function(e){var t=this;if(t.transiting)return;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e,"."+l.chartArc)).selectAll("path").transition().duration(function(e){return t.expandDuration(e.data.id)}).attr("d",t.svgArc),t.svg.selectAll("."+l.arc).style("opacity",1)},r.expandDuration=function(e){var t=this,n=t.config;return t.isDonutType(e)?n.donut_expand_duration:t.isGaugeType(e)?n.gauge_expand_duration:t.isPieType(e)?n.pie_expand_duration:50},r.shouldExpand=function(e){var t=this,n=t.config;return t.isDonutType(e)&&n.donut_expand||t.isGaugeType(e)&&n.gauge_expand||t.isPieType(e)&&n.pie_expand},r.shouldShowArcLabel=function(){var e=this,t=e.config,n=!0;return e.hasType("donut")?n=t.donut_label_show:e.hasType("pie")&&(n=t.pie_label_show),n},r.meetsArcLabelThreshold=function(e){var t=this,n=t.config,r=t.hasType("donut")?n.donut_label_threshold:n.pie_label_threshold;return e>=r},r.getArcLabelFormat=function(){var e=this,t=e.config,n=t.pie_label_format;return e.hasType("gauge")?n=t.gauge_label_format:e.hasType("donut")&&(n=t.donut_label_format),n},r.getArcTitle=function(){var e=this;return e.hasType("donut")?e.config.donut_title:""},r.updateTargetsForArc=function(e){var t=this,n=t.main,r,i,s=t.classChartArc.bind(t),o=t.classArcs.bind(t),u=t.classFocus.bind(t);r=n.select("."+l.chartArcs).selectAll("."+l.chartArc).data(t.pie(e)).attr("class",function(e){return s(e)+u(e.data)}),i=r.enter().append("g").attr("class",s),i.append("g").attr("class",o),i.append("text").attr("dy",t.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},r.initArc=function(){var e=this;e.arcs=e.main.select("."+l.chart).append("g").attr("class",l.chartArcs).attr("transform",e.getTranslate("arc")),e.arcs.append("text").attr("class",l.chartArcsTitle).style("text-anchor","middle").text(e.getArcTitle())},r.redrawArc=function(e,t,n){var r=this,i=r.d3,s=r.config,o=r.main,u;u=o.selectAll("."+l.arcs).selectAll("."+l.arc).data(r.arcData.bind(r)),u.enter().append("path").attr("class",r.classArc.bind(r)).style("fill",function(e){return r.color(e.data)}).style("cursor",function(e){return s.interaction_enabled&&s.data_selection_isselectable(e)?"pointer":null}).style("opacity",0).each(function(e){r.isGaugeType(e.data)&&(e.startAngle=e.endAngle=s.gauge_startingAngle),this._current=e}),u.attr("transform",function(e){return!r.isGaugeType(e.data)&&n?"scale(0)":""}).style("opacity",function(e){return e===this._current?0:1}).on("mouseover",s.interaction_enabled?function(e){var t,n;if(r.transiting)return;t=r.updateAngle(e),t&&(n=r.convertToArcData(t),r.expandArc(t.data.id),r.api.focus(t.data.id),r.toggleFocusLegend(t.data.id,!0),r.config.data_onmouseover(n,this))}:null).on("mousemove",s.interaction_enabled?function(e){var t=r.updateAngle(e),n,i;t&&(n=r.convertToArcData(t),i=[n],r.showTooltip(i,this))}:null).on("mouseout",s.interaction_enabled?function(e){var t,n;if(r.transiting)return;t=r.updateAngle(e),t&&(n=r.convertToArcData(t),r.unexpandArc(t.data.id),r.api.revert(),r.revertLegend(),r.hideTooltip(),r.config.data_onmouseout(n,this))}:null).on("click",s.interaction_enabled?function(e,t){var n=r.updateAngle(e),i;n&&(i=r.convertToArcData(n),r.toggleShape&&r.toggleShape(this,i,t),r.config.data_onclick.call(r.api,i,this))}:null).each(function(){r.transiting=!0}).transition().duration(e).attrTween("d",function(e){var t=r.updateAngle(e),n;return t?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),n=i.interpolate(this._current,t),this._current=n(0),function(t){var i=n(t);return i.data=e.data,r.getArc(i,!0)}):function(){return"M 0 0"}}).attr("transform",n?"scale(1)":"").style("fill",function(e){return r.levelColor?r.levelColor(e.data.values[0].value):r.color(e.data.id)}).style("opacity",1).call(r.endall,function(){r.transiting=!1}),u.exit().transition().duration(t).style("opacity",0).remove(),o.selectAll("."+l.chartArc).select("text").style("opacity",0).attr("class",function(e){return r.isGaugeType(e.data)?l.gaugeValue:""}).text(r.textForArcLabel.bind(r)).attr("transform",r.transformForArcLabel.bind(r)).style("font-size",function(e){return r.isGaugeType(e.data)?Math.round(r.radius/5)+"px":""}).transition().duration(e).style("opacity",function(e){return r.isTargetToShow(e.data.id)&&r.isArcType(e.data)?1:0}),o.select("."+l.chartArcsTitle).style("opacity",r.hasType("donut")||r.hasType("gauge")?1:0),r.hasType("gauge")&&(r.arcs.select("."+l.chartArcsBackground).attr("d",function(){var e={data:[{value:s.gauge_max}],startAngle:s.gauge_startingAngle,endAngle:-1*s.gauge_startingAngle};return r.getArc(e,!0,!0)}),r.arcs.select("."+l.chartArcsGaugeUnit).attr("dy",".75em").text(s.gauge_label_show?s.gauge_units:""),r.arcs.select("."+l.chartArcsGaugeMin).attr("dx",-1*(r.innerRadius+(r.radius-r.innerRadius)/(s.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(s.gauge_label_show?s.gauge_min:""),r.arcs.select("."+l.chartArcsGaugeMax).attr("dx",r.innerRadius+(r.radius-r.innerRadius)/(s.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(s.gauge_label_show?s.gauge_max:""))},r.initGauge=function(){var e=this.arcs;this.hasType("gauge")&&(e.append("path").attr("class",l.chartArcsBackground),e.append("text").attr("class",l.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",l.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),e.append("text").attr("class",l.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},r.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},r.initRegion=function(){var e=this;e.region=e.main.append("g").attr("clip-path",e.clipPath).attr("class",l.regions)},r.updateRegion=function(e){var t=this,n=t.config;t.region.style("visibility",t.hasArcType()?"hidden":"visible"),t.mainRegion=t.main.select("."+l.regions).selectAll("."+l.region).data(n.regions),t.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),t.mainRegion.attr("class",t.classRegion.bind(t)),t.mainRegion.exit().transition().duration(e).style("opacity",0).remove()},r.redrawRegion=function(e){var t=this,n=t.mainRegion.selectAll("rect").each(function(){var e=t.d3.select(this.parentNode).datum();t.d3.select(this).datum(e)}),r=t.regionX.bind(t),i=t.regionY.bind(t),s=t.regionWidth.bind(t),o=t.regionHeight.bind(t);return[(e?n.transition():n).attr("x",r).attr("y",i).attr("width",s).attr("height",o).style("fill-opacity",function(e){return c(e.opacity)?e.opacity:.1})]},r.regionX=function(e){var t=this,n=t.config,r,i=e.axis==="y"?t.y:t.y2;return e.axis==="y"||e.axis==="y2"?r=n.axis_rotated?"start"in e?i(e.start):0:0:r=n.axis_rotated?0:"start"in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0,r},r.regionY=function(e){var t=this,n=t.config,r,i=e.axis==="y"?t.y:t.y2;return e.axis==="y"||e.axis==="y2"?r=n.axis_rotated?0:"end"in e?i(e.end):0:r=n.axis_rotated?"start"in e?t.x(t.isTimeSeries()?t.parseDate(e.start):e.start):0:0,r},r.regionWidth=function(e){var t=this,n=t.config,r=t.regionX(e),i,s=e.axis==="y"?t.y:t.y2;return e.axis==="y"||e.axis==="y2"?i=n.axis_rotated?"end"in e?s(e.end):t.width:t.width:i=n.axis_rotated?t.width:"end"in e?t.x(t.isTimeSeries()?t.parseDate(e.end):e.end):t.width,i<r?0:i-r},r.regionHeight=function(e){var t=this,n=t.config,r=this.regionY(e),i,s=e.axis==="y"?t.y:t.y2;return e.axis==="y"||e.axis==="y2"?i=n.axis_rotated?t.height:"start"in e?s(e.start):t.height:i=n.axis_rotated?"end"in e?t.x(t.isTimeSeries()?t.parseDate(e.end):e.end):t.height:t.height,i<r?0:i-r},r.isRegionOnX=function(e){return!e.axis||e.axis==="x"},r.drag=function(e){var t=this,n=t.config,r=t.main,i=t.d3,s,o,u,a,f,c,h,p;if(t.hasArcType())return;if(!n.data_selection_enabled)return;if(n.zoom_enabled&&!t.zoom.altDomain)return;if(!n.data_selection_multiple)return;s=t.dragStart[0],o=t.dragStart[1],u=e[0],a=e[1],f=Math.min(s,u),c=Math.max(s,u),h=n.data_selection_grouped?t.margin.top:Math.min(o,a),p=n.data_selection_grouped?t.height:Math.max(o,a),r.select("."+l.dragarea).attr("x",f).attr("y",h).attr("width",c-f).attr("height",p-h),r.selectAll("."+l.shapes).selectAll("."+l.shape).filter(function(e){return n.data_selection_isselectable(e)}).each(function(e,n){var r=i.select(this),s=r.classed(l.SELECTED),o=r.classed(l.INCLUDED),u,a,d,v,m,g=!1,y;if(r.classed(l.circle))u=r.attr("cx")*1,a=r.attr("cy")*1,m=t.togglePoint,g=f<u&&u<c&&h<a&&a<p;else{if(!r.classed(l.bar))return;y=T(this),u=y.x,a=y.y,d=y.width,v=y.height,m=t.togglePath,g=!(c<u||u+d<f)&&!(p<a||a+v<h)}g^o&&(r.classed(l.INCLUDED,!o),r.classed(l.SELECTED,!s),m.call(t,!s,r,e,n))})},r.dragstart=function(e){var t=this,n=t.config;if(t.hasArcType())return;if(!n.data_selection_enabled)return;t.dragStart=e,t.main.select("."+l.chart).append("rect").attr("class",l.dragarea).style("opacity",.1),t.dragging=!0},r.dragend=function(){var e=this,t=e.config;if(e.hasArcType())return;if(!t.data_selection_enabled)return;e.main.select("."+l.dragarea).transition().duration(100).style("opacity",0).remove(),e.main.selectAll("."+l.shape).classed(l.INCLUDED,!1),e.dragging=!1},r.selectPoint=function(e,t,n){var r=this,i=r.config,s=(i.axis_rotated?r.circleY:r.circleX).bind(r),o=(i.axis_rotated?r.circleX:r.circleY).bind(r),u=r.pointSelectR.bind(r);i.data_onselected.call(r.api,t,e.node()),r.main.select("."+l.selectedCircles+r.getTargetSelectorSuffix(t.id)).selectAll("."+l.selectedCircle+"-"+n).data([t]).enter().append("circle").attr("class",function(){return r.generateClass(l.selectedCircle,n)}).attr("cx",s).attr("cy",o).attr("stroke",function(){return r.color(t)}).attr("r",function(e){return r.pointSelectR(e)*1.4}).transition().duration(100).attr("r",u)},r.unselectPoint=function(e,t,n){var r=this;r.config.data_onunselected.call(r.api,t,e.node()),r.main.select("."+l.selectedCircles+r.getTargetSelectorSuffix(t.id)).selectAll("."+l.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},r.togglePoint=function(e,t,n,r){e?this.selectPoint(t,n,r):this.unselectPoint(t,n,r)},r.selectPath=function(e,t){var n=this;n.config.data_onselected.call(n,t,e.node()),n.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(t)).brighter(.75)})},r.unselectPath=function(e,t){var n=this;n.config.data_onunselected.call(n,t,e.node()),n.config.interaction_brighten&&e.transition().duration(100).style("fill",function(){return n.color(t)})},r.togglePath=function(e,t,n,r){e?this.selectPath(t,n,r):this.unselectPath(t,n,r)},r.getToggle=function(e,t){var n=this,r;return e.nodeName==="circle"?n.isStepType(t)?r=function(){}:r=n.togglePoint:e.nodeName==="path"&&(r=n.togglePath),r},r.toggleShape=function(e,t,n){var r=this,i=r.d3,s=r.config,o=i.select(e),u=o.classed(l.SELECTED),a=r.getToggle(e,t).bind(r);s.data_selection_enabled&&s.data_selection_isselectable(t)&&(s.data_selection_multiple||r.main.selectAll("."+l.shapes+(s.data_selection_grouped?r.getTargetSelectorSuffix(t.id):"")).selectAll("."+l.shape).each(function(e,t){var n=i.select(this);n.classed(l.SELECTED)&&a(!1,n.classed(l.SELECTED,!1),e,t)}),o.classed(l.SELECTED,!u),a(!u,o,t,n))},r.initBrush=function(){var e=this,t=e.d3;e.brush=t.svg.brush().on("brush",function(){e.redrawForBrush()}),e.brush.update=function(){return e.context&&e.context.select("."+l.brush).call(this),this},e.brush.scale=function(t){return e.config.axis_rotated?this.y(t):this.x(t)}},r.initSubchart=function(){var e=this,t=e.config,n=e.context=e.svg.append("g").attr("transform",e.getTranslate("context")),r=t.subchart_show?"visible":"hidden";n.style("visibility",r),n.append("g").attr("clip-path",e.clipPathForSubchart).attr("class",l.chart),n.select("."+l.chart).append("g").attr("class",l.chartBars),n.select("."+l.chart).append("g").attr("class",l.chartLines),n.append("g").attr("clip-path",e.clipPath).attr("class",l.brush).call(e.brush),e.axes.subx=n.append("g").attr("class",l.axisX).attr("transform",e.getTranslate("subx")).attr("clip-path",t.axis_rotated?"":e.clipPathForXAxis).style("visibility",t.subchart_axis_x_show?r:"hidden")},r.updateTargetsForSubchart=function(e){var t=this,n=t.context,r=t.config,i,s,o,u,a=t.classChartBar.bind(t),f=t.classBars.bind(t),c=t.classChartLine.bind(t),h=t.classLines.bind(t),p=t.classAreas.bind(t);r.subchart_show&&(u=n.select("."+l.chartBars).selectAll("."+l.chartBar).data(e).attr("class",a),o=u.enter().append("g").style("opacity",0).attr("class",a),o.append("g").attr("class",f),s=n.select("."+l.chartLines).selectAll("."+l.chartLine).data(e).attr("class",c),i=s.enter().append("g").style("opacity",0).attr("class",c),i.append("g").attr("class",h),i.append("g").attr("class",p),n.selectAll("."+l.brush+" rect").attr(r.axis_rotated?"width":"height",r.axis_rotated?t.width2:t.height2))},r.updateBarForSubchart=function(e){var t=this;t.contextBar=t.context.selectAll("."+l.bars).selectAll("."+l.bar).data(t.barData.bind(t)),t.contextBar.enter().append("path").attr("class",t.classBar.bind(t)).style("stroke","none").style("fill",t.color),t.contextBar.style("opacity",t.initialOpacity.bind(t)),t.contextBar.exit().transition().duration(e).style("opacity",0).remove()},r.redrawBarForSubchart=function(e,t,n){(t?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",e).style("opacity",1)},r.updateLineForSubchart=function(e){var t=this;t.contextLine=t.context.selectAll("."+l.lines).selectAll("."+l.line).data(t.lineData.bind(t)),t.contextLine.enter().append("path").attr("class",t.classLine.bind(t)).style("stroke",t.color),t.contextLine.style("opacity",t.initialOpacity.bind(t)),t.contextLine.exit().transition().duration(e).style("opacity",0).remove()},r.redrawLineForSubchart=function(e,t,n){(t?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",e).style("opacity",1)},r.updateAreaForSubchart=function(e){var t=this,n=t.d3;t.contextArea=t.context.selectAll("."+l.areas).selectAll("."+l.area).data(t.lineData.bind(t)),t.contextArea.enter().append("path").attr("class",t.classArea.bind(t)).style("fill",t.color).style("opacity",function(){return t.orgAreaOpacity=+n.select(this).style("opacity"),0}),t.contextArea.style("opacity",0),t.contextArea.exit().transition().duration(e).style("opacity",0).remove()},r.redrawAreaForSubchart=function(e,t,n){(t?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)},r.redrawSubchart=function(e,t,n,r,i,s,o){var u=this,a=u.d3,f=u.config,l,c,h;u.context.style("visibility",f.subchart_show?"visible":"hidden"),f.subchart_show&&(a.event&&a.event.type==="zoom"&&u.brush.extent(u.x.orgDomain()).update(),e&&(u.brush.empty()||u.brush.extent(u.x.orgDomain()).update(),l=u.generateDrawArea(i,!0),c=u.generateDrawBar(s,!0),h=u.generateDrawLine(o,!0),u.updateBarForSubchart(n),u.updateLineForSubchart(n),u.updateAreaForSubchart(n),u.redrawBarForSubchart(c,n,n),u.redrawLineForSubchart(h,n,n),u.redrawAreaForSubchart(l,n,n)))},r.redrawForBrush=function(){var e=this,t=e.x;e.redraw({withTransition:!1,withY:e.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),e.config.subchart_onbrush.call(e.api,t.orgDomain())},r.transformContext=function(e,t){var n=this,r;t&&t.axisSubX?r=t.axisSubX:(r=n.context.select("."+l.axisX),e&&(r=r.transition())),n.context.attr("transform",n.getTranslate("context")),r.attr("transform",n.getTranslate("subx"))},r.getDefaultExtent=function(){var e=this,t=e.config,n=h(t.axis_x_extent)?t.axis_x_extent(e.getXDomain(e.data.targets)):t.axis_x_extent;return e.isTimeSeries()&&(n=[e.parseDate(n[0]),e.parseDate(n[1])]),n},r.initZoom=function(){var e=this,t=e.d3,n=e.config,r;e.zoom=t.behavior.zoom().on("zoomstart",function(){r=t.event.sourceEvent,e.zoom.altDomain=t.event.sourceEvent.altKey?e.x.orgDomain():null,n.zoom_onzoomstart.call(e.api,t.event.sourceEvent)}).on("zoom",function(){e.redrawForZoom.call(e)}).on("zoomend",function(){var i=t.event.sourceEvent;if(i&&r.clientX===i.clientX&&r.clientY===i.clientY)return;e.redrawEventRect(),e.updateZoom(),n.zoom_onzoomend.call(e.api,e.x.orgDomain())}),e.zoom.scale=function(e){return n.axis_rotated?this.y(e):this.x(e)},e.zoom.orgScaleExtent=function(){var t=n.zoom_extent?n.zoom_extent:[1,10];return[t[0],Math.max(e.getMaxDataCount()/t[1],t[1])]},e.zoom.updateScaleExtent=function(){var t=y(e.x.orgDomain())/y(e.getZoomDomain()),n=this.orgScaleExtent();return this.scaleExtent([n[0]*t,n[1]*t]),this}},r.getZoomDomain=function(){var e=this,t=e.config,n=e.d3,r=n.min([e.orgXDomain[0],t.zoom_x_min]),i=n.max([e.orgXDomain[1],t.zoom_x_max]);return[r,i]},r.updateZoom=function(){var e=this,t=e.config.zoom_enabled?e.zoom:function(){};e.main.select("."+l.zoomRect).call(t).on("dblclick.zoom",null),e.main.selectAll("."+l.eventRect).call(t).on("dblclick.zoom",null)},r.redrawForZoom=function(){var e=this,t=e.d3,n=e.config,r=e.zoom,i=e.x;if(!n.zoom_enabled)return;if(e.filterTargetsToShow(e.data.targets).length===0)return;if(t.event.sourceEvent.type==="mousemove"&&r.altDomain){i.domain(r.altDomain),r.scale(i).updateScaleExtent();return}e.isCategorized()&&i.orgDomain()[0]===e.orgXDomain[0]&&i.domain([e.orgXDomain[0]-1e-10,i.orgDomain()[1]]),e.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),t.event.sourceEvent.type==="mousemove"&&(e.cancelClick=!0),n.zoom_onzoom.call(e.api,i.orgDomain())},r.generateColor=function(){var e=this,t=e.config,n=e.d3,r=t.data_colors,i=w(t.color_pattern)?t.color_pattern:n.scale.category10().range(),s=t.data_color,o=[];return function(e){var t=e.id||e.data&&e.data.id||e,n;return r[t]instanceof Function?n=r[t](e):r[t]?n=r[t]:(o.indexOf(t)<0&&o.push(t),n=i[o.indexOf(t)%i.length],r[t]=n),s instanceof Function?s(n,e):n}},r.generateLevelColor=function(){var e=this,t=e.config,n=t.color_pattern,r=t.color_threshold,i=r.unit==="value",s=r.values&&r.values.length?r.values:[],o=r.max||100;return w(t.color_threshold)?function(e){var t,r,u=n[n.length-1];for(t=0;t<s.length;t++){r=i?e:e*100/o;if(r<s[t]){u=n[t];break}}return u}:null},r.getYFormat=function(e){var t=this,n=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.yFormat,r=e&&!t.hasType("gauge")?t.defaultArcValueFormat:t.y2Format;return function(e,i,s){var o=t.axis.getId(s)==="y2"?r:n;return o.call(t,e,i)}},r.yFormat=function(e){var t=this,n=t.config,r=n.axis_y_tick_format?n.axis_y_tick_format:t.defaultValueFormat;return r(e)},r.y2Format=function(e){var t=this,n=t.config,r=n.axis_y2_tick_format?n.axis_y2_tick_format:t.defaultValueFormat;return r(e)},r.defaultValueFormat=function(e){return c(e)?+e:""},r.defaultArcValueFormat=function(e,t){return(t*100).toFixed(1)+"%"},r.dataLabelFormat=function(e){var t=this,n=t.config.data_labels,r,i=function(e){return c(e)?+e:""};return typeof n.format=="function"?r=n.format:typeof n.format=="object"?n.format[e]?r=n.format[e]===!0?i:n.format[e]:r=function(){return""}:r=i,r},r.hasCaches=function(e){for(var t=0;t<e.length;t++)if(!(e[t]in this.cache))return!1;return!0},r.addCache=function(e,t){this.cache[e]=this.cloneTarget(t)},r.getCaches=function(e){var t=[],n;for(n=0;n<e.length;n++)e[n]in this.cache&&t.push(this.cloneTarget(this.cache[e[n]]));return t};var l=r.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};r.generateClass=function(e,t){return" "+e+" "+e+this.getTargetSelectorSuffix(t)},r.classText=function(e){return this.generateClass(l.text,e.index)},r.classTexts=function(e){return this.generateClass(l.texts,e.id)},r.classShape=function(e){return this.generateClass(l.shape,e.index)},r.classShapes=function(e){return this.generateClass(l.shapes,e.id)},r.classLine=function(e){return this.classShape(e)+this.generateClass(l.line,e.id)},r.classLines=function(e){return this.classShapes(e)+this.generateClass(l.lines,e.id)},r.classCircle=function(e){return this.classShape(e)+this.generateClass(l.circle,e.index)},r.classCircles=function(e){return this.classShapes(e)+this.generateClass(l.circles,e.id)},r.classBar=function(e){return this.classShape(e)+this.generateClass(l.bar,e.index)},r.classBars=function(e){return this.classShapes(e)+this.generateClass(l.bars,e.id)},r.classArc=function(e){return this.classShape(e.data)+this.generateClass(l.arc,e.data.id)},r.classArcs=function(e){return this.classShapes(e.data)+this.generateClass(l.arcs,e.data.id)},r.classArea=function(e){return this.classShape(e)+this.generateClass(l.area,e.id)},r.classAreas=function(e){return this.classShapes(e)+this.generateClass(l.areas,e.id)},r.classRegion=function(e,t){return this.generateClass(l.region,t)+" "+("class"in e?e["class"]:"")},r.classEvent=function(e){return this.generateClass(l.eventRect,e.index)},r.classTarget=function(e){var t=this,n=t.config.data_classes[e],r="";return n&&(r=" "+l.target+"-"+n),t.generateClass(l.target,e)+r},r.classFocus=function(e){return this.classFocused(e)+this.classDefocused(e)},r.classFocused=function(e){return" "+(this.focusedTargetIds.indexOf(e.id)>=0?l.focused:"")},r.classDefocused=function(e){return" "+(this.defocusedTargetIds.indexOf(e.id)>=0?l.defocused:"")},r.classChartText=function(e){return l.chartText+this.classTarget(e.id)},r.classChartLine=function(e){return l.chartLine+this.classTarget(e.id)},r.classChartBar=function(e){return l.chartBar+this.classTarget(e.id)},r.classChartArc=function(e){return l.chartArc+this.classTarget(e.data.id)},r.getTargetSelectorSuffix=function(e){return e||e===0?("-"+e).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},r.selectorTarget=function(e,t){return(t||"")+"."+l.target+this.getTargetSelectorSuffix(e)},r.selectorTargets=function(e,t){var n=this;return e=e||[],e.length?e.map(function(e){return n.selectorTarget(e,t)}):null},r.selectorLegend=function(e){return"."+l.legendItem+this.getTargetSelectorSuffix(e)},r.selectorLegends=function(e){var t=this;return e&&e.length?e.map(function(e){return t.selectorLegend(e)}):null};var c=r.isValue=function(e){return e||e===0},h=r.isFunction=function(e){return typeof e=="function"},p=r.isString=function(e){return typeof e=="string"},d=r.isUndefined=function(e){return typeof e=="undefined"},v=r.isDefined=function(e){return typeof e!="undefined"},m=r.ceil10=function(e){return Math.ceil(e/10)*10},g=r.asHalfPixel=function(e){return Math.ceil(e)+.5},y=r.diffDomain=function(e){return e[1]-e[0]},b=r.isEmpty=function(e){return typeof e=="undefined"||e===null||p(e)&&e.length===0||typeof e=="object"&&Object.keys(e).length===0},w=r.notEmpty=function(e){return!r.isEmpty(e)},E=r.getOption=function(e,t,n){return v(e[t])?e[t]:n},S=r.hasValue=function(e,t){var n=!1;return Object.keys(e).forEach(function(r){e[r]===t&&(n=!0)}),n},x=r.sanitise=function(e){return typeof e=="string"?e.replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},T=r.getPathBox=function(e){var t=e.getBoundingClientRect(),n=[e.pathSegList.getItem(0),e.pathSegList.getItem(1)],r=n[0].x,i=Math.min(n[0].y,n[1].y);return{x:r,y:i,width:t.width,height:t.height}};n.focus=function(e){var t=this.internal,n;e=t.mapToTargetIds(e),n=t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))),this.revert(),this.defocus(),n.classed(l.focused,!0).classed(l.defocused,!1),t.hasArcType()&&t.expandArc(e),t.toggleFocusLegend(e,!0),t.focusedTargetIds=e,t.defocusedTargetIds=t.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})},n.defocus=function(e){var t=this.internal,n;e=t.mapToTargetIds(e),n=t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))),n.classed(l.focused,!1).classed(l.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return e.indexOf(t)<0}),t.defocusedTargetIds=e},n.revert=function(e){var t=this.internal,n;e=t.mapToTargetIds(e),n=t.svg.selectAll(t.selectorTargets(e)),n.classed(l.focused,!1).classed(l.defocused,!1),t.hasArcType()&&t.unexpandArc(e),t.config.legend_show&&(t.showLegend(e.filter(t.isLegendToShow.bind(t))),t.legend.selectAll(t.selectorLegends(e)).filter(function(){return t.d3.select(this).classed(l.legendItemFocused)}).classed(l.legendItemFocused,!1)),t.focusedTargetIds=[],t.defocusedTargetIds=[]},n.show=function(e,t){var n=this.internal,r;e=n.mapToTargetIds(e),t=t||{},n.removeHiddenTargetIds(e),r=n.svg.selectAll(n.selectorTargets(e)),r.transition().style("opacity",1,"important").call(n.endall,function(){r.style("opacity",null).style("opacity",1)}),t.withLegend&&n.showLegend(e),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},n.hide=function(e,t){var n=this.internal,r;e=n.mapToTargetIds(e),t=t||{},n.addHiddenTargetIds(e),r=n.svg.selectAll(n.selectorTargets(e)),r.transition().style("opacity",0,"important").call(n.endall,function(){r.style("opacity",null).style("opacity",0)}),t.withLegend&&n.hideLegend(e),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},n.toggle=function(e,t){var n=this,r=this.internal;r.mapToTargetIds(e).forEach(function(e){r.isTargetToShow(e)?n.hide(e,t):n.show(e,t)})},n.zoom=function(e){var t=this.internal;return e&&(t.isTimeSeries()&&(e=e.map(function(e){return t.parseDate(e)})),t.brush.extent(e),t.redraw({withUpdateXDomain:!0,withY:t.config.zoom_rescale}),t.config.zoom_onzoom.call(this,t.x.orgDomain())),t.brush.extent()},n.zoom.enable=function(e){var t=this.internal;t.config.zoom_enabled=e,t.updateAndRedraw()},n.unzoom=function(){var e=this.internal;e.brush.clear().update(),e.redraw({withUpdateXDomain:!0})},n.zoom.max=function(e){var t=this.internal,n=t.config,r=t.d3;if(e!==0&&!e)return n.zoom_x_max;n.zoom_x_max=r.max([t.orgXDomain[1],e])},n.zoom.min=function(e){var t=this.internal,n=t.config,r=t.d3;if(e!==0&&!e)return n.zoom_x_min;n.zoom_x_min=r.min([t.orgXDomain[0],e])},n.zoom.range=function(e){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};v(e.max)&&this.domain.max(e.max),v(e.min)&&this.domain.min(e.min)},n.load=function(e){var t=this.internal,r=t.config;e.xs&&t.addXs(e.xs),"names"in e&&n.data.names.bind(this)(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){r.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(r.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){r.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){r.data_colors[t]=e.colors[t]});if("cacheIds"in e&&t.hasCaches(e.cacheIds)){t.load(t.getCaches(e.cacheIds),e.done);return}"unload"in e?t.unload(t.mapToTargetIds(typeof e.unload=="boolean"&&e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e)},n.unload=function(e){var t=this.internal;e=e||{},e instanceof Array?e={ids:e}:typeof e=="string"&&(e={ids:[e]}),t.unload(t.mapToTargetIds(e.ids),function(){t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()})},n.flow=function(e){var t=this.internal,n,r,i=[],s=t.getMaxDataCount(),o,u,a,f,l=0,h=0,p,d;if(e.json)r=t.convertJsonToData(e.json,e.keys);else if(e.rows)r=t.convertRowsToData(e.rows);else{if(!e.columns)return;r=t.convertColumnsToData(e.columns)}n=t.convertDataToTargets(r,!0),t.data.targets.forEach(function(e){var r=!1,s,o;for(s=0;s<n.length;s++)if(e.id===n[s].id){r=!0,e.values[e.values.length-1]&&(h=e.values[e.values.length-1].index+1),l=n[s].values.length;for(o=0;o<l;o++)n[s].values[o].index=h+o,t.isTimeSeries()||(n[s].values[o].x=h+o);e.values=e.values.concat(n[s].values),n.splice(s,1);break}r||i.push(e.id)}),t.data.targets.forEach(function(e){var n,r;for(n=0;n<i.length;n++)if(e.id===i[n]){h=e.values[e.values.length-1].index+1;for(r=0;r<l;r++)e.values.push({id:e.id,index:h+r,x:t.isTimeSeries()?t.getOtherTargetX(h+r):h+r,value:null})}}),t.data.targets.length&&n.forEach(function(e){var n,r=[];for(n=t.data.targets[0].values[0].index;n<h;n++)r.push({id:e.id,index:n,x:t.isTimeSeries()?t.getOtherTargetX(n):n,value:null});e.values.forEach(function(e){e.index+=h,t.isTimeSeries()||(e.x+=h)}),e.values=r.concat(e.values)}),t.data.targets=t.data.targets.concat(n),o=t.getMaxDataCount(),a=t.data.targets[0],f=a.values[0],v(e.to)?(l=0,d=t.isTimeSeries()?t.parseDate(e.to):e.to,a.values.forEach(function(e){e.x<d&&l++})):v(e.length)&&(l=e.length),s?s===1&&t.isTimeSeries()&&(p=(a.values[a.values.length-1].x-f.x)/2,u=[new Date(+f.x-p),new Date(+f.x+p)],t.updateXDomain(null,!0,!0,!1,u)):(t.isTimeSeries()?a.values.length>1?p=a.values[a.values.length-1].x-f.x:p=f.x-t.getXDomain(t.data.targets)[0]:p=1,u=[f.x-p,f.x],t.updateXDomain(null,!0,!0,!1,u)),t.updateTargets(t.data.targets),t.redraw({flow:{index:f.index,length:l,duration:c(e.duration)?e.duration:t.config.transition_duration,done:e.done,orgDataCount:s},withLegend:!0,withTransition:s>1,withTrimXDomain:!1,withUpdateXAxis:!0})},r.generateFlow=function(e){var t=this,n=t.config,r=t.d3;return function(){var i=e.targets,s=e.flow,o=e.drawBar,u=e.drawLine,a=e.drawArea,f=e.cx,c=e.cy,h=e.xv,p=e.xForText,d=e.yForText,v=e.duration,m,g=1,b,w=s.index,E=s.length,S=t.getValueOnIndex(t.data.targets[0].values,w),x=t.getValueOnIndex(t.data.targets[0].values,w+E),T=t.x.domain(),N,C=s.duration||v,k=s.done||function(){},L=t.generateWait(),A=t.xgrid||r.selectAll([]),O=t.xgridLines||r.selectAll([]),M=t.mainRegion||r.selectAll([]),_=t.mainText||r.selectAll([]),D=t.mainBar||r.selectAll([]),P=t.mainLine||r.selectAll([]),H=t.mainArea||r.selectAll([]),B=t.mainCircle||r.selectAll([]);t.flowing=!0,t.data.targets.forEach(function(e){e.values.splice(0,E)}),N=t.updateXDomain(i,!0,!0),t.updateXGrid&&t.updateXGrid(!0),s.orgDataCount?s.orgDataCount===1||(S&&S.x)===(x&&x.x)?m=t.x(T[0])-t.x(N[0]):t.isTimeSeries()?m=t.x(T[0])-t.x(N[0]):m=t.x(S.x)-t.x(x.x):t.data.targets[0].values.length!==1?m=t.x(T[0])-t.x(N[0]):t.isTimeSeries()?(S=t.getValueOnIndex(t.data.targets[0].values,0),x=t.getValueOnIndex(t.data.targets[0].values,t.data.targets[0].values.length-1),m=t.x(S.x)-t.x(x.x)):m=y(N)/2,g=y(T)/y(N),b="translate("+m+",0) scale("+g+",1)",t.hideXGridFocus(),r.transition().ease("linear").duration(C).each(function(){L.add(t.axes.x.transition().call(t.xAxis)),L.add(D.transition().attr("transform",b)),L.add(P.transition().attr("transform",b)),L.add(H.transition().attr("transform",b)),L.add(B.transition().attr("transform",b)),L.add(_.transition().attr("transform",b)),L.add(M.filter(t.isRegionOnX).transition().attr("transform",b)),L.add(A.transition().attr("transform",b)),L.add(O.transition().attr("transform",b))}).call(L,function(){var e,r=[],i=[],s=[];if(E){for(e=0;e<E;e++)r.push("."+l.shape+"-"+(w+e)),i.push("."+l.text+"-"+(w+e)),s.push("."+l.eventRect+"-"+(w+e));t.svg.selectAll("."+l.shapes).selectAll(r).remove(),t.svg.selectAll("."+l.texts).selectAll(i).remove(),t.svg.selectAll("."+l.eventRects).selectAll(s).remove(),t.svg.select("."+l.xgrid).remove()}A.attr("transform",null).attr(t.xgridAttr),O.attr("transform",null),O.select("line").attr("x1",n.axis_rotated?0:h).attr("x2",n.axis_rotated?t.width:h),O.select("text").attr("x",n.axis_rotated?t.width:0).attr("y",h),D.attr("transform",null).attr("d",o),P.attr("transform",null).attr("d",u),H.attr("transform",null).attr("d",a),B.attr("transform",null).attr("cx",f).attr("cy",c),_.attr("transform",null).attr("x",p).attr("y",d).style("fill-opacity",t.opacityForText.bind(t)),M.attr("transform",null),M.select("rect").filter(t.isRegionOnX).attr("x",t.regionX.bind(t)).attr("width",t.regionWidth.bind(t)),n.interaction_enabled&&t.redrawEventRect(),k(),t.flowing=!1})}},n.selected=function(e){var t=this.internal,n=t.d3;return n.merge(t.main.selectAll("."+l.shapes+t.getTargetSelectorSuffix(e)).selectAll("."+l.shape).filter(function(){return n.select(this).classed(l.SELECTED)}).map(function(e){return e.map(function(e){var t=e.__data__;return t.data?t.data:t})}))},n.select=function(e,t,n){var r=this.internal,i=r.d3,s=r.config;if(!s.data_selection_enabled)return;r.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(o,u){var a=i.select(this),f=o.data?o.data.id:o.id,c=r.getToggle(this,o).bind(r),h=s.data_selection_grouped||!e||e.indexOf(f)>=0,p=!t||t.indexOf(u)>=0,d=a.classed(l.SELECTED);if(a.classed(l.line)||a.classed(l.area))return;h&&p?s.data_selection_isselectable(o)&&!d&&c(!0,a.classed(l.SELECTED,!0),o,u):v(n)&&n&&d&&c(!1,a.classed(l.SELECTED,!1),o,u)})},n.unselect=function(e,t){var n=this.internal,r=n.d3,i=n.config;if(!i.data_selection_enabled)return;n.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(s,o){var u=r.select(this),a=s.data?s.data.id:s.id,f=n.getToggle(this,s).bind(n),c=i.data_selection_grouped||!e||e.indexOf(a)>=0,h=!t||t.indexOf(o)>=0,p=u.classed(l.SELECTED);if(u.classed(l.line)||u.classed(l.area))return;c&&h&&i.data_selection_isselectable(s)&&p&&f(!1,u.classed(l.SELECTED,!1),s,o)})},n.transform=function(e,t){var n=this.internal,r=["pie","donut"].indexOf(e)>=0?{withTransform:!0}:null;n.transformTo(t,e,r)},r.transformTo=function(e,t,n){var r=this,i=!r.hasArcType(),s=n||{withTransitionForAxis:i};s.withTransitionForTransform=!1,r.transiting=!1,r.setTargetType(e,t),r.updateTargets(r.data.targets),r.updateAndRedraw(s)},n.groups=function(e){var t=this.internal,n=t.config;return d(e)?n.data_groups:(n.data_groups=e,t.redraw(),n.data_groups)},n.xgrids=function(e){var t=this.internal,n=t.config;return e?(n.grid_x_lines=e,t.redrawWithoutRescale(),n.grid_x_lines):n.grid_x_lines},n.xgrids.add=function(e){var t=this.internal;return this.xgrids(t.config.grid_x_lines.concat(e?e:[]))},n.xgrids.remove=function(e){var t=this.internal;t.removeGridLines(e,!0)},n.ygrids=function(e){var t=this.internal,n=t.config;return e?(n.grid_y_lines=e,t.redrawWithoutRescale(),n.grid_y_lines):n.grid_y_lines},n.ygrids.add=function(e){var t=this.internal;return this.ygrids(t.config.grid_y_lines.concat(e?e:[]))},n.ygrids.remove=function(e){var t=this.internal;t.removeGridLines(e,!1)},n.regions=function(e){var t=this.internal,n=t.config;return e?(n.regions=e,t.redrawWithoutRescale(),n.regions):n.regions},n.regions.add=function(e){var t=this.internal,n=t.config;return e?(n.regions=n.regions.concat(e),t.redrawWithoutRescale(),n.regions):n.regions},n.regions.remove=function(e){var t=this.internal,n=t.config,r,i,s;return e=e||{},r=t.getOption(e,"duration",n.transition_duration),i=t.getOption(e,"classes",[l.region]),s=t.main.select("."+l.regions).selectAll(i.map(function(e){return"."+e})),(r?s.transition().duration(r):s).style("opacity",0).remove(),n.regions=n.regions.filter(function(e){var t=!1;return e["class"]?(e["class"].split(" ").forEach(function(e){i.indexOf(e)>=0&&(t=!0)}),!t):!0}),n.regions},n.data=function(e){var t=this.internal.data.targets;return typeof e=="undefined"?t:t.filter(function(t){return[].concat(e).indexOf(t.id)>=0})},n.data.shown=function(e){return this.internal.filterTargetsToShow(this.data(e))},n.data.values=function(e){var t,n=null;return e&&(t=this.data(e),n=t[0]?t[0].values.map(function(e){return e.value}):null),n},n.data.names=function(e){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",e)},n.data.colors=function(e){return this.internal.updateDataAttributes("colors",e)},n.data.axes=function(e){return this.internal.updateDataAttributes("axes",e)},n.category=function(e,t){var n=this.internal,r=n.config;return arguments.length>1&&(r.axis_x_categories[e]=t,n.redraw()),r.axis_x_categories[e]},n.categories=function(e){var t=this.internal,n=t.config;return arguments.length?(n.axis_x_categories=e,t.redraw(),n.axis_x_categories):n.axis_x_categories},n.color=function(e){var t=this.internal;return t.color(e)},n.x=function(e){var t=this.internal;return arguments.length&&(t.updateTargetX(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},n.xs=function(e){var t=this.internal;return arguments.length&&(t.updateTargetXs(t.data.targets,e),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),t.data.xs},n.axis=function(){},n.axis.labels=function(e){var t=this.internal;arguments.length&&(Object.keys(e).forEach(function(n){t.axis.setLabelText(n,e[n])}),t.axis.updateLabels())},n.axis.max=function(e){var t=this.internal,n=t.config;if(!arguments.length)return{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max};typeof e=="object"?(c(e.x)&&(n.axis_x_max=e.x),c(e.y)&&(n.axis_y_max=e.y),c(e.y2)&&(n.axis_y2_max=e.y2)):n.axis_y_max=n.axis_y2_max=e,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},n.axis.min=function(e){var t=this.internal,n=t.config;if(!arguments.length)return{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min};typeof e=="object"?(c(e.x)&&(n.axis_x_min=e.x),c(e.y)&&(n.axis_y_min=e.y),c(e.y2)&&(n.axis_y2_min=e.y2)):n.axis_y_min=n.axis_y2_min=e,t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},n.axis.range=function(e){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};v(e.max)&&this.axis.max(e.max),v(e.min)&&this.axis.min(e.min)},n.legend=function(){},n.legend.show=function(e){var t=this.internal;t.showLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},n.legend.hide=function(e){var t=this.internal;t.hideLegend(t.mapToTargetIds(e)),t.updateAndRedraw({withLegend:!0})},n.resize=function(e){var t=this.internal,n=t.config;n.size_width=e?e.width:null,n.size_height=e?e.height:null,this.flush()},n.flush=function(){var e=this.internal;e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},n.destroy=function(){var t=this.internal;e.clearInterval(t.intervalForObserveInserted),t.resizeTimeout!==undefined&&e.clearTimeout(t.resizeTimeout);if(e.detachEvent)e.detachEvent("onresize",t.resizeFunction);else if(e.removeEventListener)e.removeEventListener("resize",t.resizeFunction);else{var n=e.onresize;n&&n.add&&n.remove&&n.remove(t.resizeFunction)}return t.selectChart.classed("c3",!1).html(""),Object.keys(t).forEach(function(e){t[e]=null}),null},n.tooltip=function(){},n.tooltip.show=function(e){var t=this.internal,n,r;e.mouse&&(r=e.mouse),e.data?t.isMultipleX()?(r=[t.x(e.data.x),t.getYScale(e.data.id)(e.data.value)],n=null):n=c(e.data.index)?e.data.index:t.getIndexByX(e.data.x):typeof e.x!="undefined"?n=t.getIndexByX(e.x):typeof e.index!="undefined"&&(n=e.index),t.dispatchEvent("mouseover",n,r),t.dispatchEvent("mousemove",n,r),t.config.tooltip_onshow.call(t,e.data)},n.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var N;r.isSafari=function(){var t=e.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0},r.isChrome=function(){var t=e.navigator.userAgent;return t.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),function(){"SVGPathSeg"in e||(e.SVGPathSeg=function(e,t,n){this.pathSegType=e,this.pathSegTypeAsLetter=t,this._owningPathSegList=n},SVGPathSeg.PATHSEG_UNKNOWN=0,SVGPathSeg.PATHSEG_CLOSEPATH=1,SVGPathSeg.PATHSEG_MOVETO_ABS=2,SVGPathSeg.PATHSEG_MOVETO_REL=3,SVGPathSeg.PATHSEG_LINETO_ABS=4,SVGPathSeg.PATHSEG_LINETO_REL=5,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,SVGPathSeg.PATHSEG_ARC_ABS=10,SVGPathSeg.PATHSEG_ARC_REL=11,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},e.SVGPathSegClosePath=function(e){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CLOSEPATH,"z",e)},SVGPathSegClosePath.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},SVGPathSegClosePath.prototype.clone=function(){return new SVGPathSegClosePath(undefined)},e.SVGPathSegMovetoAbs=function(e,t,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_ABS,"M",e),this._x=t,this._y=n},SVGPathSegMovetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoAbs.prototype.clone=function(){return new SVGPathSegMovetoAbs(undefined,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegMovetoRel=function(e,t,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_MOVETO_REL,"m",e),this._x=t,this._y=n},SVGPathSegMovetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegMovetoRel.prototype.clone=function(){return new SVGPathSegMovetoRel(undefined,this._x,this._y)},Object.defineProperty(SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegLinetoAbs=function(e,t,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_ABS,"L",e),this._x=t,this._y=n},SVGPathSegLinetoAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoAbs.prototype.clone=function(){return new SVGPathSegLinetoAbs(undefined,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegLinetoRel=function(e,t,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_REL,"l",e),this._x=t,this._y=n},SVGPathSegLinetoRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegLinetoRel.prototype.clone=function(){return new SVGPathSegLinetoRel(undefined,this._x,this._y)},Object.defineProperty(SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegCurvetoCubicAbs=function(e,t,n,r,i,s,o){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",e),this._x=t,this._y=n,this._x1=r,this._y1=i,this._x2=s,this._y2=o},SVGPathSegCurvetoCubicAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicAbs(undefined,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegCurvetoCubicRel=function(e,t,n,r,i,s,o){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",e),this._x=t,this._y=n,this._x1=r,this._y1=i,this._x2=s,this._y2=o},SVGPathSegCurvetoCubicRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicRel(undefined,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegCurvetoQuadraticAbs=function(e,t,n,r,i){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",e),this._x=t,this._y=n,this._x1=r,this._y1=i},SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticAbs(undefined,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegCurvetoQuadraticRel=function(e,t,n,r,i){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",e),this._x=t,this._y=n,this._x1=r,this._y1=i},SVGPathSegCurvetoQuadraticRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticRel(undefined,this._x,this._y,this._x1,this._y1)},Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(e){this._x1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(e){this._y1=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegArcAbs=function(e,t,n,r,i,s,o,u){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_ABS,"A",e),this._x=t,this._y=n,this._r1=r,this._r2=i,this._angle=s,this._largeArcFlag=o,this._sweepFlag=u},SVGPathSegArcAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcAbs.prototype.clone=function(){return new SVGPathSegArcAbs(undefined,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegArcRel=function(e,t,n,r,i,s,o,u){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_ARC_REL,"a",e),this._x=t,this._y=n,this._r1=r,this._r2=i,this._angle=s,this._largeArcFlag=o,this._sweepFlag=u},SVGPathSegArcRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},SVGPathSegArcRel.prototype.clone=function(){return new SVGPathSegArcRel(undefined,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(e){this._r1=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(e){this._r2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegLinetoHorizontalAbs=function(e,t){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",e),this._x=t},SVGPathSegLinetoHorizontalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new SVGPathSegLinetoHorizontalAbs(undefined,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegLinetoHorizontalRel=function(e,t){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",e),this._x=t},SVGPathSegLinetoHorizontalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new SVGPathSegLinetoHorizontalRel(undefined,this._x)},Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegLinetoVerticalAbs=function(e,t){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",e),this._y=t},SVGPathSegLinetoVerticalAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new SVGPathSegLinetoVerticalAbs(undefined,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegLinetoVerticalRel=function(e,t){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",e),this._y=t},SVGPathSegLinetoVerticalRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new SVGPathSegLinetoVerticalRel(undefined,this._y)},Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegCurvetoCubicSmoothAbs=function(e,t,n,r,i){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",e),this._x=t,this._y=n,this._x2=r,this._y2=i},SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothAbs(undefined,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegCurvetoCubicSmoothRel=function(e,t,n,r,i){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",e),this._x=t,this._y=n,this._x2=r,this._y2=i},SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoCubicSmoothRel(undefined,this._x,this._y,this._x2,this._y2)},Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(e){this._x2=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(e){this._y2=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegCurvetoQuadraticSmoothAbs=function(e,t,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",e),this._x=t,this._y=n},SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothAbs(undefined,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),e.SVGPathSegCurvetoQuadraticSmoothRel=function(e,t,n){SVGPathSeg.call(this,SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",e),this._x=t,this._y=n},SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(SVGPathSeg.prototype),SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new SVGPathSegCurvetoQuadraticSmoothRel(undefined,this._x,this._y)},Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e,this._segmentChanged()},enumerable:!0}),Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e,this._segmentChanged()},enumerable:!0}),SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new SVGPathSegClosePath(undefined)},SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(e,t){return new SVGPathSegMovetoAbs(undefined,e,t)},SVGPathElement.prototype.createSVGPathSegMovetoRel=function(e,t){return new SVGPathSegMovetoRel(undefined,e,t)},SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(e,t){return new SVGPathSegLinetoAbs(undefined,e,t)},SVGPathElement.prototype.createSVGPathSegLinetoRel=function(e,t){return new SVGPathSegLinetoRel(undefined,e,t)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(e,t,n,r,i,s){return new SVGPathSegCurvetoCubicAbs(undefined,e,t,n,r,i,s)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(e,t,n,r,i,s){return new SVGPathSegCurvetoCubicRel(undefined,e,t,n,r,i,s)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(e,t,n,r){return new SVGPathSegCurvetoQuadraticAbs(undefined,e,t,n,r)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(e,t,n,r){return new SVGPathSegCurvetoQuadraticRel(undefined,e,t,n,r)},SVGPathElement.prototype.createSVGPathSegArcAbs=function(e,t,n,r,i,s,o){return new SVGPathSegArcAbs(undefined,e,t,n,r,i,s,o)},SVGPathElement.prototype.createSVGPathSegArcRel=function(e,t,n,r,i,s,o){return new SVGPathSegArcRel(undefined,e,t,n,r,i,s,o)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(e){return new SVGPathSegLinetoHorizontalAbs(undefined,e)},SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(e){return new SVGPathSegLinetoHorizontalRel(undefined,e)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(e){return new SVGPathSegLinetoVerticalAbs(undefined,e)},SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(e){return new SVGPathSegLinetoVerticalRel(undefined,e)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(e,t,n,r){return new SVGPathSegCurvetoCubicSmoothAbs(undefined,e,t,n,r)},SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(e,t,n,r){return new SVGPathSegCurvetoCubicSmoothRel(undefined,e,t,n,r)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(e,t){return new SVGPathSegCurvetoQuadraticSmoothAbs(undefined,e,t)},SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(e,t){return new SVGPathSegCurvetoQuadraticSmoothRel(undefined,e,t)}),"SVGPathSegList"in e||(e.SVGPathSegList=function(e){this._pathElement=e,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},Object.defineProperty(SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},SVGPathSegList.prototype._updateListFromPathMutations=function(e){if(!this._pathElement)return;var t=!1;e.forEach(function(e){e.attributeName=="d"&&(t=!0)}),t&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))},SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},SVGPathSegList.prototype.segmentChanged=function(e){this._writeListToPath()},SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(e){e._owningPathSegList=null}),this._list=[],this._writeListToPath()},SVGPathSegList.prototype.initialize=function(e){return this._checkPathSynchronizedToList(),this._list=[e],e._owningPathSegList=this,this._writeListToPath(),e},SVGPathSegList.prototype._checkValidIndex=function(e){if(isNaN(e)||e<0||e>=this.numberOfItems)throw"INDEX_SIZE_ERR"},SVGPathSegList.prototype.getItem=function(e){return this._checkPathSynchronizedToList(),this._checkValidIndex(e),this._list[e]},SVGPathSegList.prototype.insertItemBefore=function(e,t){return this._checkPathSynchronizedToList(),t>this.numberOfItems&&(t=this.numberOfItems),e._owningPathSegList&&(e=e.clone()),this._list.splice(t,0,e),e._owningPathSegList=this,this._writeListToPath(),e},SVGPathSegList.prototype.replaceItem=function(e,t){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._checkValidIndex(t),this._list[t]=e,e._owningPathSegList=this,this._writeListToPath(),e},SVGPathSegList.prototype.removeItem=function(e){this._checkPathSynchronizedToList(),this._checkValidIndex(e);var t=this._list[e];return this._list.splice(e,1),this._writeListToPath(),t},SVGPathSegList.prototype.appendItem=function(e){return this._checkPathSynchronizedToList(),e._owningPathSegList&&(e=e.clone()),this._list.push(e),e._owningPathSegList=this,this._writeListToPath(),e},SVGPathSegList._pathSegArrayAsString=function(e){var t="",n=!0;return e.forEach(function(e){n?(n=!1,t+=e._asPathString()):t+=" "+e._asPathString()}),t},SVGPathSegList.prototype._parsePath=function(e){if(!e||e.length==0)return[];var t=this,n=function(){this.pathSegList=[]};n.prototype.appendSegment=function(e){this.pathSegList.push(e)};var r=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};r.prototype._isCurrentSpace=function(){var e=this._string[this._currentIndex];return e<=" "&&(e==" "||e=="\n"||e=="	"||e=="\r"||e=="\f")},r.prototype._skipOptionalSpaces=function(){while(this._currentIndex<this._endIndex&&this._isCurrentSpace())this._currentIndex++;return this._currentIndex<this._endIndex},r.prototype._skipOptionalSpacesOrDelimiter=function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string.charAt(this._currentIndex)!=","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)==","&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},r.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},r.prototype.peekSegmentType=function(){var e=this._string[this._currentIndex];return this._pathSegTypeFromChar(e)},r.prototype._pathSegTypeFromChar=function(e){switch(e){case"Z":case"z":return SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return SVGPathSeg.PATHSEG_LINETO_REL;case"C":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return SVGPathSeg.PATHSEG_ARC_ABS;case"a":return SVGPathSeg.PATHSEG_ARC_REL;case"H":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return SVGPathSeg.PATHSEG_UNKNOWN}},r.prototype._nextCommandHelper=function(e,t){return(e=="+"||e=="-"||e=="."||e>="0"&&e<="9")&&t!=SVGPathSeg.PATHSEG_CLOSEPATH?t==SVGPathSeg.PATHSEG_MOVETO_ABS?SVGPathSeg.PATHSEG_LINETO_ABS:t==SVGPathSeg.PATHSEG_MOVETO_REL?SVGPathSeg.PATHSEG_LINETO_REL:t:SVGPathSeg.PATHSEG_UNKNOWN},r.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return e==SVGPathSeg.PATHSEG_MOVETO_ABS||e==SVGPathSeg.PATHSEG_MOVETO_REL},r.prototype._parseNumber=function(){var e=0,t=0,n=1,r=0,i=1,s=1,o=this._currentIndex;this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="+"?this._currentIndex++:this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="-"&&(this._currentIndex++,i=-1);if(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&this._string.charAt(this._currentIndex)!=".")return undefined;var u=this._currentIndex;while(this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9")this._currentIndex++;if(this._currentIndex!=u){var a=this._currentIndex-1,f=1;while(a>=u)t+=f*(this._string.charAt(a--)-"0"),f*=10}if(this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="."){this._currentIndex++;if(this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return undefined;while(this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9")r+=(this._string.charAt(this._currentIndex++)-"0")*(n*=.1)}if(this._currentIndex!=o&&this._currentIndex+1<this._endIndex&&(this._string.charAt(this._currentIndex)=="e"||this._string.charAt(this._currentIndex)=="E")&&this._string.charAt(this._currentIndex+1)!="x"&&this._string.charAt(this._currentIndex+1)!="m"){this._currentIndex++,this._string.charAt(this._currentIndex)=="+"?this._currentIndex++:this._string.charAt(this._currentIndex)=="-"&&(this._currentIndex++,s=-1);if(this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return undefined;while(this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9")e*=10,e+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var l=t+r;return l*=i,e&&(l*=Math.pow(10,s*e)),o==this._currentIndex?undefined:(this._skipOptionalSpacesOrDelimiter(),l)},r.prototype._parseArcFlag=function(){if(this._currentIndex>=this._endIndex)return undefined;var e=!1,t=this._string.charAt(this._currentIndex++);if(t=="0")e=!1;else{if(t!="1")return undefined;e=!0}return this._skipOptionalSpacesOrDelimiter(),e},r.prototype.parseSegment=function(){var e=this._string[this._currentIndex],n=this._pathSegTypeFromChar(e);if(n==SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==SVGPathSeg.PATHSEG_UNKNOWN)return null;n=this._nextCommandHelper(e,this._previousCommand);if(n==SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;this._previousCommand=n;switch(n){case SVGPathSeg.PATHSEG_MOVETO_REL:return new SVGPathSegMovetoRel(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_MOVETO_ABS:return new SVGPathSegMovetoAbs(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_REL:return new SVGPathSegLinetoRel(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_ABS:return new SVGPathSegLinetoAbs(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new SVGPathSegLinetoHorizontalRel(t,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new SVGPathSegLinetoHorizontalAbs(t,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new SVGPathSegLinetoVerticalRel(t,this._parseNumber());case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new SVGPathSegLinetoVerticalAbs(t,this._parseNumber());case SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new SVGPathSegClosePath(t);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var r={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicRel(t,r.x,r.y,r.x1,r.y1,r.x2,r.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var r={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicAbs(t,r.x,r.y,r.x1,r.y1,r.x2,r.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var r={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothRel(t,r.x,r.y,r.x2,r.y2);case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var r={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoCubicSmoothAbs(t,r.x,r.y,r.x2,r.y2);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var r={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticRel(t,r.x,r.y,r.x1,r.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var r={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegCurvetoQuadraticAbs(t,r.x,r.y,r.x1,r.y1);case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new SVGPathSegCurvetoQuadraticSmoothRel(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new SVGPathSegCurvetoQuadraticSmoothAbs(t,this._parseNumber(),this._parseNumber());case SVGPathSeg.PATHSEG_ARC_REL:var r={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcRel(t,r.x,r.y,r.x1,r.y1,r.arcAngle,r.arcLarge,r.arcSweep);case SVGPathSeg.PATHSEG_ARC_ABS:var r={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new SVGPathSegArcAbs(t,r.x,r.y,r.x1,r.y1,r.arcAngle,r.arcLarge,r.arcSweep);default:throw"Unknown path seg type."}};var i=new n,s=new r(e);if(!s.initialCommandIsMoveTo())return[];while(s.hasMoreData()){var o=s.parseSegment();if(!o)return[];i.appendSegment(o)}return i.pathSegList})}(),typeof define=="function"&&define.amd?define("c3",["d3"],function(){return t}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=t:e.c3=t})(window),define("css!c3",[],function(){}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Common",["d3","c3","../common/HTMLWidget","css!c3"],t):e.c3chart_Common=t(e.d3,e.c3,e.common_HTMLWidget)}(this,function(e,t,n){function r(e){n.call(this);var t=this;this._tag="div",this._type="unknown",this._config={axis:{},legend:{position:"bottom",show:!0},data:{}},this._prevColumnIDs=[],this._config.data.onclick=function(e,n){t.click(t.rowToObj(t.data()[e.index]),e.id,t.c3Chart.selected().length>0)}}return r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.prototype._class+=" c3chart_Common",r.prototype.publish("showLegend",!1,"boolean","Show/Hide Legend",null,{tags:["Basic","Shared"]}),r.prototype.publish("legendFontColor",null,"html-color","Legend Font Color",null,{tags:["Intermediate","Shared"]}),r.prototype.publish("legendFontSize",null,"number","Legend Font Size",null,{tags:["Intermediate","Shared"]}),r.prototype.publish("legendFontFamily",null,"string","Legend Font Name",null,{tags:["Private","Shared"]}),r.prototype.publish("legendFontBold",!1,"boolean","Legend Font Bold",null,{tags:["Private","Shared"]}),r.prototype.publish("legendFontItalic",!1,"boolean","Legend Font Italic",null,{tags:["Private","Shared"]}),r.prototype.publish("fontSize",null,"number","Font Size",null,{tags:["Basic","Shared"]}),r.prototype.publish("fontFamily",null,"string","Font Name",null,{tags:["Basic","Shared","Shared"]}),r.prototype.publish("fontColor",null,"html-color","Font Color",null,{tags:["Basic","Shared"]}),r.prototype.publish("legendPosition","right","set","Legend Position",["bottom","right"],{tags:["Intermediate"]}),r.prototype.publish("animationDuration",0,"number","Animation Duration",null,{tags:["Advanced"]}),r.prototype.type=function(e){return arguments.length?(this._type=e,this):this._type},r.prototype.getC3Series=function(){return this.columns().filter(function(e,t){return t>0})},r.prototype.getC3Rows=function(){var e=[this.columns().filter(function(e,t){return t>0})].concat(this.data().map(function(e){return e.filter(function(e,t){return t>0})}));return e},r.prototype.getC3Categories=function(){var e=this.data().map(function(e,t){return e[0]});return e},r.prototype.getC3Column=function(e){var t=[this.columns()[e]].concat(this.data().map(function(t,n){return t[e]}));return t},r.prototype.getC3Columns=function(e){if(!this.data().length)return[];e=e||this.columns().length;var t=[],n=typeof this.xAxisType=="function"&&this.xAxisType()==="time"?0:1;for(var r=n;r<e;++r)t.push(this.getC3Column(r));return t},r.prototype.enter=function(e,r){n.prototype.enter.apply(this,arguments),r.style("overflow","hidden"),this._config.size={width:this.width(),height:this.height()},this._config.transition={duration:this.animationDuration()},this._config.data.type=this._type,this._type!=="gauge"&&(this._config.legend={position:this.legendPosition()}),this._config.data.selection={enabled:!0,multiple:!1},this._config.bindto=r.append("div").datum(null),this._config.data.columns=[],this.c3Chart=t.generate(this._config)},r.prototype.update=function(e,t){n.prototype.update.apply(this,arguments),this.showLegend()?this.c3Chart.legend.show():this.c3Chart.legend.hide(),this.c3Chart.resize({width:this.width(),height:this.height()});var r=this.getChartOptions(),i=r.columns.map(function(e){return e[0]});r.unload=this._prevColumnIDs.filter(function(e){return i.indexOf(e)<0}),this.c3Chart.load(r),this._prevColumnIDs=i,t.selectAll(".c3 text").style({stroke:this.fontColor(),fill:this.fontColor(),"font-size":this.fontSize_exists()?this.fontSize()+"px":null,"font-family":this.fontFamily()}).attr("font-family",this.fontFamily()),t.selectAll(".c3 .c3-legend-item text").style({fill:this.legendFontColor(),"font-size":this.legendFontSize_exists()?this.legendFontSize()+"px":null,"font-family":this.legendFontFamily(),"font-weight":this.legendFontBold()?"bold":"normal","font-style":this.legendFontItalic()?"italic":"normal"}).attr("font-family",this.legendFontFamily())},r.prototype.getChartOptions=function(){return{}},r}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/CommonND",["d3","./Common","../api/INDChart"],t):e.c3chart_CommonND=t(e.d3,e.c3chart_Common,e.api_INDChart)}(this,function(e,t,n){function r(e){t.call(this),n.call(this);var r=this;this._config.color={pattern:this._palette.colors()},this._config.data.color=function(e,t){return r._palette(t.id?t.id:t)}}return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype._class+=" c3chart_CommonND",r.prototype.implements(n.prototype),r.prototype.publish("paletteID","default","set","Palette ID",r.prototype._palette.switch(),{tags:["Basic","Shared"]}),r.prototype.publish("axisLineWidth",1,"number","Axis Line Width",null,{tags:["Intermediate","Shared"]}),r.prototype.publish("xAxisBaselineColor",null,"html-color","X Axis Baseline Color",null,{tags:["Basic","Shared"]}),r.prototype.publish("yAxisBaselineColor",null,"html-color","Y Axis Baseline Color",null,{tags:["Basic","Shared"]}),r.prototype.publish("xAxisFontColor",null,"html-color","X Axis Text Font Color",null,{tags:["Basic","Shared"]}),r.prototype.publish("yAxisFontColor",null,"html-color","Y Axis Text Font Color",null,{tags:["Basic","Shared"]}),r.prototype.publish("axisFontSize",null,"number","X/Y Axis Text Font Size",null,{tags:["Basic","Shared"]}),r.prototype.publish("axisFontFamily",null,"string","X/Y Axis Text Font Name",null,{tags:["Basic","Shared"]}),r.prototype.publish("xAxisLabelRotation",0,"number","X Axis Label Angle",null,{tags:["Intermediate","Shared"]}),r.prototype.publish("yAxisTitle","","string","Y-Axis Title",null,{tags:["Intermediate","Shared"]}),r.prototype.publish("xAxisTitle","","string","X-Axis Title",null,{tags:["Intermediate","Shared"]}),r.prototype.publish("xAxisTitleFontColor",null,"html-color","Horizontal Axis Title Text Style (Color)",null,{tags:["Advanced","Shared"]}),r.prototype.publish("xAxisTitleFontFamily",null,"string","Horizontal Axis Title Text Style (Font Name)",null,{tags:["Advanced","Shared"]}),r.prototype.publish("xAxisTitleFontSize",null,"number","Horizontal Axis Title Text Style (Font Size)",null,{tags:["Advanced","Shared"]}),r.prototype.publish("yAxisTitleFontColor",null,"html-color","Vertical Axis Title Text Style (Color)",null,{tags:["Advanced","Shared"]}),r.prototype.publish("yAxisTitleFontFamily",null,"string","Vertical Axis Title Text Style (Font Name)",null,{tags:["Advanced","Shared"]}),r.prototype.publish("yAxisTitleFontSize",null,"number","Vertical Axis Title Text Style (Font Size)",null,{tags:["Advanced","Shared"]}),r.prototype.publish("xAxisType","category","set","X-Axis Type",["category","time","indexed"],{tags:["Intermediate"]}),r.prototype.publish("subchart",!1,"boolean","Show SubChart",null,{tags:["Private"]}),r.prototype.publish("showXGrid",!1,"boolean","Show X Grid",null,{tags:["Intermediate"]}),r.prototype.publish("showYGrid",!1,"boolean","Show Y Grid",null,{tags:["Intermediate"]}),r.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),r.prototype.publish("xAxisTickFormat","","string","X-Axis Tick Format",null,{}),r.prototype.publish("yAxisTickFormat",null,"string","Y-Axis Tick Format",null,{optional:!0}),r.prototype.publish("xAxisTypeTimePattern","%Y-%m-%d","string","Time Series Pattern",null,{}),r.prototype.publish("yAxisTypeTimePattern","%Y-%m-%d","string","Time Series Pattern",null,{}),r.prototype.publish("axisTickLabelMultiLine",!1,"boolean","Show Y Grid",null,{tags:["Intermediate"]}),r.prototype.enter=function(e,n){this.subchart()&&(this._config.subchart={show:!0,size:{height:20}});var r;switch(this.xAxisType()){case"time":r="timeseries";break;default:r=this.xAxisType()}this._config.axis.x={type:r,tick:{rotate:this.xAxisLabelRotation(),multiline:this.axisTickLabelMultiLine()},label:{text:this.xAxisTitle(),position:"outer-center"}},this._config.axis.y={label:{text:this.yAxisTitle(),position:"outer-center"}},this._config.grid={x:{show:this.showXGrid()},y:{show:this.showYGrid()}};switch(this.xAxisType()){case"category":this._config.axis.tick={centered:!0,multiline:this.axisTickLabelMultiLine()};break;case"time":this.data(this.data().map(function(e,t){return e.map(function(e,t){return t===0&&typeof e=="number"?e.toString():e})})),this._config.data.x=this.columns()[0],this._config.data.xFormat=this.xAxisTypeTimePattern()}t.prototype.enter.apply(this,arguments)},r.prototype.update=function(n,r){t.prototype.update.apply(this,arguments),this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this.c3Chart.internal.config.axis_y_tick_format=this.yAxisTickFormat()?e.format(this.yAxisTickFormat()):undefined,this.xAxisType()==="time"?this.c3Chart.internal.config.axis_x_tick_format=this.xAxisTickFormat()?e.time.format(this.xAxisTickFormat()):"%Y-%m-%d %I:%M:%S %p":this.c3Chart.internal.config.axis_x_tick_format=this.xAxisTickFormat()?e.format(this.xAxisTickFormat()):undefined,t.prototype.update.apply(this,arguments),r.selectAll(".c3 svg").style({"font-size":this.axisFontSize_exists()?this.axisFontSize()+"px":null}),r.selectAll(".c3 svg text").style({"font-family":this.axisFontFamily()}),r.selectAll(".c3 .c3-axis.c3-axis-x text").style({fill:this.xAxisFontColor()}),r.selectAll(".c3 .c3-axis.c3-axis-y text").style({fill:this.yAxisFontColor()}),r.selectAll(".c3 .c3-axis path").style({"stroke-width":this.axisLineWidth_exists()?this.axisLineWidth()+"px":null}),r.selectAll(".c3 .c3-axis-x path, .c3 .c3-axis-x line").style({stroke:this.xAxisBaselineColor()}),r.selectAll(".c3 .c3-axis-y path, .c3 .c3-axis-y line").style({stroke:this.yAxisBaselineColor()}),r.selectAll(".c3-axis-x-label").style({"font-family":this.xAxisTitleFontFamily(),"font-size":this.xAxisTitleFontSize(),stroke:this.xAxisTitleFontColor()}),r.selectAll(".c3-axis-y-label").style({"font-family":this.yAxisTitleFontFamily(),"font-size":this.yAxisTitleFontSize(),stroke:this.yAxisTitleFontColor()})},r.prototype.getChartOptions=function(){var e=t.prototype.getChartOptions.apply(this,arguments);switch(this.xAxisType()){case"category":e.categories=this.getC3Categories(),e.columns=this.getC3Columns();break;case"indexed":case"time":e.columns=this.getC3Columns()}return e},r}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Area",["./CommonND"],t):e.c3chart_Area=t(e.c3chart_CommonND)}(this,function(e){function t(t){e.call(this),this._type="area"}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" c3chart_Area",t.prototype.publish("stacked",!1,"boolean","Stack Chart",null,{tags:["Basic","Shared"]}),t.prototype.publish("lineWidth",1,"number","Line Width",null,{tags:["Basic","Shared"]}),t.prototype.publish("lineDashStyle",[],"array","Dashed Lines",null,{tags:["Basic","Shared"]}),t.prototype.publish("lineOpacity",1,"number","Line Alpha",null,{tags:["Basic","Shared"]}),t.prototype.publish("fillOpacity",.2,"number","Opacity of The Fill Color",null,{tags:["Basic","Shared"]}),t.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments)},t.prototype.update=function(t,n){e.prototype.update.apply(this,arguments),this.stacked()?this.c3Chart.groups([this.columns().slice(1,this.columns().length)]):this.c3Chart.groups([]),n.selectAll(".c3-line").style({"stroke-width":this.lineWidth()+"px","stroke-opacity":this.lineOpacity(),"stroke-dasharray":this.lineDashStyle().toString()}),n.selectAll(".c3-area").style({opacity:this.fillOpacity()})},t}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Column",["./CommonND"],t):e.c3chart_Column=t(e.c3chart_CommonND)}(this,function(e){function t(t){e.call(this),this._type="bar"}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" c3chart_Column",t.prototype.publish("stacked",!1,"boolean","Stack Chart",null,{tags:["Basic","Shared"]}),t.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments)},t.prototype.update=function(t,n){e.prototype.update.apply(this,arguments),this.stacked()?this.c3Chart.groups([this.columns().slice(1,this.columns().length)]):this.c3Chart.groups([])},t}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Bar",["./Column"],t):e.c3chart_Bar=t(e.c3chart_Column)}(this,function(e){function t(t){e.call(this),this._config.axis.rotated=!0}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" c3chart_Bar",t}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Combo",["./CommonND"],t):e.c3chart_Combo=t(e.c3chart_CommonND)}(this,function(e){function t(t){e.call(this),this._type="bar",this._previousTypes=undefined}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" c3chart_Column",t.prototype.publish("stacked",!1,"boolean","Stack Chart",null,{tags:["Basic"]}),t.prototype.publish("defaultType","bar","set","Default chart type",["bar","line","spline","area","area-spline","step","area-step","scatter"],{tags:["Basic"]}),t.prototype.publish("types",[],"array","Array of chart types (ex:bar|line|spline|area|area-spline|step|area-step|scatter)",null,{tags:["Basic"]}),t.prototype.publish("areaFillOpacity",.4,"number","Opacity of all 'Area' chart types in this Combo chart",null,{tags:["Basic"],number:{min:0,max:1,step:.1,slider:!1}}),t.prototype.enter=function(t,n){var r={},i=this.types();this._previousTypes=this.types().join("|");for(var s in i)r[this.columns()[parseInt(s)+1]]=i[s];i.length>0&&(this._config.data.types=r),e.prototype.enter.apply(this,arguments)},t.prototype.update=function(t,n){e.prototype.update.apply(this,arguments);if(this._previousTypes!==this.types().join("|")){var r=this._previousTypes.split("|"),i=this.getC3Columns();for(var s in i)if(typeof r[s]=="undefined"||this.types()[s]!==r[s])this.c3Chart.unload({ids:i[s][0]}),this.c3Chart.load({columns:[i[s]],type:typeof this.types()[s]!="undefined"?this.types()[s]:this.defaultType()});this._previousTypes=this.types().join("|")}this.stacked()?this.c3Chart.groups([this.columns().slice(1,this.columns().length)]):this.c3Chart.groups([]),n.selectAll(".c3-area").style({opacity:this.areaFillOpacity()})},t}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Common1D",["./Common","../api/I1DChart"],t):e.c3chart_Common1D=t(e.c3chart_Common,e.api_I1DChart)}(this,function(e,t){function n(n){e.call(this),t.call(this);var r=this;this._config.color={pattern:this._palette.colors()},this._config.data.color=function(e,t){return r._palette(t.id?t.id:t)}}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" c3chart_Common1D",n.prototype.implements(t.prototype),n.prototype.publish("paletteID","default","set","Palette ID",n.prototype._palette.switch(),{tags:["Basic","Shared"]}),n.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),n.prototype.update=function(t,n){this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),e.prototype.update.apply(this,arguments)},n}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Common2D",["./Common","../api/I2DChart"],t):e.c3chart_Common2D=t(e.c3chart_Common,e.api_I2DChart)}(this,function(e,t){function n(n){e.call(this),t.call(this);var r=this;this._config.color={pattern:this._palette.colors()},this._config.data.color=function(e,t){return r._palette(t.id?t.id:t)}}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" c3chart_Common2D",n.prototype.implements(t.prototype),n.prototype.publish("paletteID","default","set","Palette ID",n.prototype._palette.switch(),{tags:["Basic","Shared"]}),n.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),n.prototype.update=function(t,n){this._palette=this._palette.switch(this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),e.prototype.update.apply(this,arguments)},n}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Donut",["./Common2D"],t):e.c3chart_Donut=t(e.c3chart_Common2D)}(this,function(e){function t(t){e.call(this),this._type="donut"}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" c3chart_Donut",t.prototype.publish("showLabel",!0,"boolean","Show Label",null,{tags:["Basic"]}),t.prototype.publish("arcWidth",45,"number","Arc Width",null,{tags:["Basic"]}),t.prototype.publish("expand",!0,"boolean","Arc Explode",null,{tags:["Intermediate"]}),t.prototype.publish("title","xxx","string","Center Label",null,{tags:["Intermediate"]}),t.prototype.enter=function(t,n){this._config.donut={label_show:this.showLabel(),width:this.arcWidth(),expand:this.expand(),title:this.title()},e.prototype.enter.apply(this,arguments)},t.prototype.update=function(t,n){e.prototype.update.apply(this,arguments),this.c3Chart.internal.config.donut_label_show=this.showLabel(),this.c3Chart.internal.config.donut_width=this.arcWidth(),this.c3Chart.internal.config.donut_expand=this.expand(),this.c3Chart.internal.config.donut_title=this.title()},t.prototype.getChartOptions=function(){var t=e.prototype.getChartOptions.apply(this,arguments),n=this.data().map(function(e,t){return[e[0],e[1]]},this);return t.columns=n,t},t}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Gauge",["./Common1D"],t):e.c3chart_Gauge=t(e.c3chart_Common1D)}(this,function(e){function t(t){e.call(this),this._type="gauge";var n=this;this._config.data.onclick=function(e,t){var r={};r[e.id]=e.value,n.click(r,e.id)},this._config.data.color=function(e,t){return n._palette(n.data(),n.low(),n.high())}}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" c3chart_Gauge",t.prototype.publish("low",0,"number","Gauge Lower Bound",null,{tags:["Intermediate","Shared"]}),t.prototype.publish("high",100,"number","Gauge Higher Bound",null,{tags:["Intermediate","Shared"]}),t.prototype.publish("valueFormat","Percent","set","Value Display Format",["Percent","Value"],{tags:["Basic"]}),t.prototype.publish("arcWidth",10,"number","Gauge Width of Arc",null,{tags:["Basic"]}),t.prototype.publish("showLabels",!0,"boolean","Show Labels",null,{tags:["Basic"]}),t.prototype.publish("showValueLabel",!0,"boolean","Show Value Label",null,{tags:["Basic"]}),t.prototype.update=function(t,n){this.c3Chart.internal.config.gauge_min=this.low(),this.c3Chart.internal.config.gauge_max=this.high(),this.c3Chart.internal.config.gauge_units=this.showValueLabel()?this.columns():"",this.c3Chart.internal.config.gauge_width=this.arcWidth(),this.c3Chart.internal.config.gauge_label_format=this.valueFormat()==="Percent"?null:function(e,t){return e},this.c3Chart.internal.config.gauge_label_show=this.showLabels(),e.prototype.update.apply(this,arguments)},t.prototype.getChartOptions=function(){var t=e.prototype.getChartOptions.apply(this,arguments);return t.columns=[[this.columns(),this.data()]],t},t}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Line",["./CommonND"],t):e.c3chart_Line=t(e.c3chart_CommonND)}(this,function(e){function t(t){e.call(this),this._type="line"}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" c3chart_Line",t.prototype.publish("lineWidth",1,"number","Line Width",null,{tags:["Basic","Shared"]}),t.prototype.publish("lineDashStyle",[],"array","Dashed Lines",null,{tags:["Basic","Shared"]}),t.prototype.publish("lineOpacity",1,"number","Line Alpha",null,{tags:["Basic","Shared"]}),t.prototype.publish("connectNull",!0,"boolean","Connect null data points in line",null,{tags:["Basic","Shared"]}),t.prototype.enter=function(t,n){this._config.line={connectNull:this.connectNull()},e.prototype.enter.apply(this,arguments)},t.prototype.update=function(t,n){e.prototype.update.apply(this,arguments),n.selectAll(".c3-line").style({"stroke-width":this.lineWidth_exists()?this.lineWidth()+"px":null,"stroke-opacity":this.lineOpacity(),"stroke-dasharray":this.lineDashStyle().toString()})},t}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Pie",["./Common2D"],t):e.c3chart_Pie=t(e.c3chart_Common2D)}(this,function(e){function t(t){e.call(this),this._type="pie"}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" c3chart_Pie",t.prototype.update=function(t,n){e.prototype.update.apply(this,arguments)},t.prototype.getChartOptions=function(){var t=e.prototype.getChartOptions.apply(this,arguments),n=this.data().map(function(e,t){return[e[0],e[1]]},this);return t.columns=n,t},t}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Scatter",["./CommonND"],t):e.c3chart_Scatter=t(e.c3chart_CommonND)}(this,function(e){function t(t){e.call(this),this._type="scatter"}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" c3chart_Scatter",t}),function(e,t){typeof define=="function"&&define.amd?define("src/c3chart/Step",["./CommonND"],t):e.c3chart_Step=t(e.c3chart_CommonND)}(this,function(e){function t(t){e.call(this),this._type="step"}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._class+=" c3chart_Step",t}),function(e){var t=document,n="appendChild",r="styleSheet",i=t.createElement("style");i.type="text/css",t.getElementsByTagName("head")[0][n](i),i[r]?i[r].cssText=e:i[n](t.createTextNode(e))}(".c3 svg{font:10px sans-serif;-webkit-tap-highlight-color:transparent}.c3 path,.c3 line{fill:none;stroke:#000}.c3 text{-webkit-user-select:none;-moz-user-select:none;user-select:none}.c3-legend-item-tile,.c3-xgrid-focus,.c3-ygrid,.c3-event-rect,.c3-bars path{shape-rendering:crispEdges}.c3-chart-arc path{stroke:#fff}.c3-chart-arc text{fill:#fff;font-size:13px}.c3-grid line{stroke:#aaa}.c3-grid text{fill:#aaa}.c3-xgrid,.c3-ygrid{stroke-dasharray:3 3}.c3-text.c3-empty{fill:gray;font-size:2em}.c3-line{stroke-width:1px}.c3-circle._expanded_{stroke-width:1px;stroke:#fff}.c3-selected-circle{fill:#fff;stroke-width:2px}.c3-bar{stroke-width:0}.c3-bar._expanded_{fill-opacity:.75}.c3-target.c3-focused{opacity:1}.c3-target.c3-focused path.c3-line,.c3-target.c3-focused path.c3-step{stroke-width:2px}.c3-target.c3-defocused{opacity:.3!important}.c3-region{fill:#4682b4}.c3-region,.c3-brush .extent{fill-opacity:.1}.c3-legend-item{font-size:12px}.c3-legend-item-hidden{opacity:.15}.c3-legend-background{opacity:.75;fill:#fff;stroke:#d3d3d3;stroke-width:1}.c3-title{font:14px sans-serif}.c3-tooltip-container{z-index:10}.c3-tooltip{border-collapse:collapse;border-spacing:0;background-color:#fff;empty-cells:show;-webkit-box-shadow:7px 7px 12px -9px #777;-moz-box-shadow:7px 7px 12px -9px #777;box-shadow:7px 7px 12px -9px #777;opacity:.9}.c3-tooltip tr{border:1px solid #ccc}.c3-tooltip th{background-color:#aaa;font-size:14px;padding:2px 5px;text-align:left;color:#fff}.c3-tooltip td{font-size:13px;padding:3px 6px;background-color:#fff;border-left:1px dotted #999}.c3-tooltip td>span{display:inline-block;width:10px;height:10px;margin-right:6px}.c3-tooltip td.value{text-align:right}.c3-area{stroke-width:0;opacity:.2}.c3-chart-arcs-title{dominant-baseline:middle;font-size:1.3em}.c3-chart-arcs .c3-chart-arcs-background{fill:#e0e0e0;stroke:none}.c3-chart-arcs .c3-chart-arcs-gauge-unit{fill:#000;font-size:16px}.c3-chart-arcs .c3-chart-arcs-gauge-max,.c3-chart-arcs .c3-chart-arcs-gauge-min{fill:#777}.c3-chart-arc .c3-gauge-value{fill:#000}"),define("hpcc-viz-c3chart",function(){});