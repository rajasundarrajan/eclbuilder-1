(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/Widget","../layout/AbsoluteSurface","../common/TextBox"],t):e.api_ITooltip=t(e.d3,e.common_Widget,e.layout_AbsoluteSurface,e.common_TextBox)})(this,function(e,t,n,r){function i(){t.call(this),this._textBox=(new r).shape_colorFill("#FFFFFA").shape_colorStroke("#E6E6E1"),this._tooltip=(new n).units("pixels").widget(this._textBox).visible(!1)}return i.prototype=Object.create(t.prototype),i.prototype.publish("tooltipOffset",5,"number","Offset from the cursor",null,{}),i.prototype.lazyTooltipShow=i.prototype.debounce(function(e,t,n,r){var i=this;if(e!==undefined){this._textBox.columns(n===undefined?t:[t[0],t[n]]).data([n===undefined?e:[e[0],e[n]]]).text(e[0]+", "+t[n]+":  "+e[n]),this._tooltip._target?this._textBox.render():this._tooltip.target(this._parentOverlay.node()).render(function(e){i._textBox._parentElement&&i._textBox._parentElement.style("overflow","hidden")});var s=this._textBox.getBBox(!0),o=r[0]-s.width/2;o<0?o=0:o+s.width>this.width()&&(o=this.width()-s.width);var u=r[1]-s.height-this.tooltipOffset();u<0?u=r[1]+this.tooltipOffset():u+s.height>this.height()&&(u=this.height()-s.height-this.tooltipOffset()),this._tooltip.widgetX(o).widgetY(u).widgetWidth(s.width).widgetHeight(s.height)}this._tooltip.visible(e!==undefined).render()},250),i.prototype.tooltipShow=function(t,n,r){this.lazyTooltipShow(t,n,r,e.mouse(this._parentOverlay.node()))},i});