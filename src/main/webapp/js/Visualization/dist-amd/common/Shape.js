(function(e,t){typeof define=="function"&&define.amd?define(["d3","./SVGWidget","css!./Shape"],t):e.common_Shape=t(e.d3,e.common_SVGWidget)})(this,function(e,t){function n(){t.call(this)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._class+=" common_Shape",n.prototype.publish("shape","circle","set","Shape Type",["circle","square","rect","ellipse"],{tags:["Private"]}),n.prototype.publish("width",24,"number","Width",null,{tags:["Private"]}),n.prototype.publish("height",24,"number","Height",null,{tags:["Private"]}),n.prototype.publish("colorStroke",null,"html-color","Stroke Color",null,{tags:["Private"]}),n.prototype.publish("colorFill",null,"html-color","Fill Color",null,{tags:["Private"]}),n.prototype.publish("radius",null,"number","Radius",null,{tags:["Private"]}),n.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),n.prototype._origRadius=n.prototype.radius,n.prototype.radius=function(e){var t=n.prototype._origRadius.apply(this,arguments);return arguments.length?(this.width(e),this.height(e),t):Math.max(this.width(),this.height())/2},n.prototype.intersection=function(e,n){switch(this.shape()){case"circle":return this.intersectCircle(e,n)}return t.prototype.intersection.apply(this,arguments)},n.prototype.update=function(t,n){var r=n.selectAll("rect,circle,ellipse").data([this.shape()],function(e){return e}),i=this;r.enter().append(this.shape()==="square"?"rect":this.shape()).attr("class","common_Shape").each(function(t){var n=e.select(this);i._tooltipElement=n.append("title")}),r.style("fill",this.colorFill()).style("stroke",this.colorStroke()).each(function(t){var n=e.select(this);i._tooltipElement.text(i.tooltip());switch(i.shape()){case"circle":var r=i.radius();n.attr("r",r);break;case"square":var s=Math.max(i.width(),i.height());n.attr("x",-s/2).attr("y",-s/2).attr("width",s).attr("height",s);break;case"rect":n.attr("x",-i.width()/2).attr("y",-i.height()/2).attr("width",i.width()).attr("height",i.height());break;case"ellipse":n.attr("rx",i.width()/2).attr("ry",i.height()/2)}}),r.exit().remove()},n});