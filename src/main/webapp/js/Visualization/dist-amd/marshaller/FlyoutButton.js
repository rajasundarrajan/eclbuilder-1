(function(e,t){typeof define=="function"&&define.amd?define(["../form/Button","../layout/Popup","../layout/Surface"],t):e.marshaller_FlyoutButton=t(e.form_Button,e.layout_Popup,e.layout_Surface)})(this,function(e,t,n){function r(){e.call(this),this.value("^");var r=this;this._popupSurface=(new n).surfaceBackgroundColor("rgb(234, 249, 255)").buttonAnnotations([{id:"",label:"ÔÄç",width:20,padding:"0px 5px","class":"close",font:"FontAwesome"}]).on("click",function(e){e.class==="close"&&r._popup.visible(!1).popupState(!1).render()}),this._popup=(new t).size({width:400,height:400}).position("absolute").widget(this._popupSurface)}return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype._class+=" marshaller_FlyoutButton",r.prototype.publishProxy("title","_popupSurface"),r.prototype.publishProxy("widget","_popupSurface"),r.prototype.click=function(e){var t=this;this._popup.visible(!0).popupState(!0).render(function(e){var n=t._popupSurface.widget().getBBox();t._popupSurface.resize({width:n.width,height:n.height+t._popupSurface.calcHeight(t._popupSurface.element().select(".surfaceTitle"))+18}),t._popup.render()})},r.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments);var r=this;while(r&&["marshaller_HTML","marshaller_Graph"].indexOf(r.classID())===-1)r=r.locateParentWidget();r&&(this._popupParentWidget=r,this._popup.target(r.node()))},r.prototype.render=function(t){var n=this;e.prototype.render.call(n,function(e){var r=n._popupParentWidget.getBBox(),i=e.getBBox();n._popup.left(i.x-r.x+i.width-n._popup.width()).top(i.y-r.y+i.height).visible(!1).popupState(!1).render(),t&&t(e)})},r});